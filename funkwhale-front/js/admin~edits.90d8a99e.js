(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin~edits"],{"3fb2":function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("4de4"),n("4160"),n("a15b"),n("fb6a"),n("4e82"),n("b0c0"),n("159b");function r(e){return e?e.slice().sort().join("\n"):""}function i(e){return e.text}t["a"]={getConfigs:function(){var e={id:"description",type:"content",required:!0,label:this.$pgettext("*/*/*/Noun","Description"),getValue:function(e){return e.description||{text:null,content_type:"text/markdown"}},getValueRepr:i},t={id:"cover",type:"attachment",required:!1,label:this.$pgettext("Content/*/*/Noun","Cover"),getValue:function(e){return e.cover?e.cover.uuid:null}};return{artist:{fields:[{id:"name",type:"text",required:!0,label:this.$pgettext("*/*/*/Noun","Name"),getValue:function(e){return e.name}},e,t,{id:"tags",type:"tags",required:!0,label:this.$pgettext("*/*/*/Noun","Tags"),getValue:function(e){return e.tags},getValueRepr:r}]},album:{fields:[{id:"title",type:"text",required:!0,label:this.$pgettext("*/*/*/Noun","Title"),getValue:function(e){return e.title}},e,{id:"release_date",type:"text",required:!1,label:this.$pgettext("Content/*/*/Noun","Release date"),getValue:function(e){return e.release_date}},t,{id:"tags",type:"tags",required:!0,label:this.$pgettext("*/*/*/Noun","Tags"),getValue:function(e){return e.tags},getValueRepr:r}]},track:{fields:[{id:"title",type:"text",required:!0,label:this.$pgettext("*/*/*/Noun","Title"),getValue:function(e){return e.title}},e,t,{id:"position",type:"text",inputType:"number",required:!1,label:this.$pgettext("*/*/*/Short, Noun","Position"),getValue:function(e){return e.position}},{id:"copyright",type:"text",required:!1,label:this.$pgettext("Content/Track/*/Noun","Copyright"),getValue:function(e){return e.copyright}},{id:"license",type:"license",required:!1,label:this.$pgettext("Content/*/*/Noun","License"),getValue:function(e){return e.license}},{id:"tags",type:"tags",required:!0,label:this.$pgettext("*/*/*/Noun","Tags"),getValue:function(e){return e.tags},getValueRepr:r}]}}},getConfig:function(){return this.configs[this.objectType]},getFieldConfig:function(e,t,n){var r=e[t];return r.fields.filter((function(e){return e.id==n}))[0]},getCurrentState:function(){var e=this,t={};return this.config.fields.forEach((function(n){t[n.id]={value:n.getValue(e.object)}})),t},getCurrentStateForObj:function(e,t){var n={};return t.fields.forEach((function(t){n[t.id]={value:t.getValue(e)}})),n},getCanDelete:function(){return!this.obj.is_applied&&!this.obj.is_approved&&(!!this.$store.state.auth.authenticated&&(this.obj.created_by.full_username===this.$store.state.auth.fullUsername||this.$store.state.auth.availablePermissions["library"]))},getCanApprove:function(){return!this.obj.is_applied&&(!!this.$store.state.auth.authenticated&&this.$store.state.auth.availablePermissions["library"])},getCanEdit:function(){if(!this.$store.state.auth.authenticated)return!1;var e=this.$store.state.auth.availablePermissions["library"],t=this.object||{},n=!1;return t.attributed_to&&(n=this.$store.state.auth.fullUsername===t.attributed_to.full_username),e||n}}},"4e82":function(e,t,n){"use strict";var r=n("23e7"),i=n("1c0b"),a=n("7b0b"),o=n("d039"),s=n("a640"),l=[],u=l.sort,d=o((function(){l.sort(void 0)})),c=o((function(){l.sort(null)})),f=s("sort"),p=d||!c||!f;r({target:"Array",proto:!0,forced:p},{sort:function(e){return void 0===e?u.call(a(this)):u.call(a(this),i(e))}})},5786:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui fluid card"},[n("div",{staticClass:"content"},[n("h4",{staticClass:"header"},[n("router-link",{attrs:{to:e.detailUrl}},[n("translate",{attrs:{"translate-context":"Content/Library/Card/Short","translate-params":{id:e.obj.uuid.substring(0,8)}}},[e._v("Modification %{ id }")])],1)],1),n("div",{staticClass:"meta"},[e.obj.target&&"track"===e.obj.target.type?n("router-link",{attrs:{to:{name:"library.tracks.detail",params:{id:e.obj.target.id}}}},[n("i",{staticClass:"music icon"}),n("translate",{attrs:{"translate-context":"Content/Library/Card/Short","translate-params":{id:e.obj.target.id,name:e.obj.target.repr}}},[e._v("Track #%{ id } - %{ name }")])],1):e._e(),n("br"),n("human-date",{attrs:{date:e.obj.creation_date,icon:!0}}),n("span",{staticClass:"right floated"},[e.obj.is_approved&&e.obj.is_applied?n("span",[n("i",{staticClass:"success check icon"}),n("translate",{attrs:{"translate-context":"Content/Library/Card/Short"}},[e._v("Approved and applied")])],1):e.obj.is_approved?n("span",[n("i",{staticClass:"success check icon"}),n("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[e._v("Approved")])],1):null===e.obj.is_approved?n("span",[n("i",{staticClass:"warning hourglass icon"}),n("translate",{attrs:{"translate-context":"Content/Admin/*/Noun"}},[e._v("Pending review")])],1):!1===e.obj.is_approved?n("span",[n("i",{staticClass:"danger x icon"}),n("translate",{attrs:{"translate-context":"Content/Library/*/Short"}},[e._v("Rejected")])],1):e._e()])],1)]),e.obj.summary?n("div",{staticClass:"content"},[e._v(" "+e._s(e.obj.summary)+" ")]):e._e(),n("div",{staticClass:"content"},["update"===e.obj.type?n("table",{staticClass:"ui celled very basic fixed stacking table"},[n("thead",[n("tr",[n("th",[n("translate",{attrs:{"translate-context":"Content/Library/Card.Table.Header/Short"}},[e._v("Field")])],1),n("th",[n("translate",{attrs:{"translate-context":"Content/Library/Card.Table.Header/Short"}},[e._v("Old value")])],1),n("th",[n("translate",{attrs:{"translate-context":"Content/Library/Card.Table.Header/Short"}},[e._v("New value")])],1)])]),n("tbody",e._l(e.updatedFields,(function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.id))]),t.diff?n("td",["attachment"===t.config.type&&t.oldRepr?[n("img",{staticClass:"ui image",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.oldRepr+"/proxy?next=medium_square_crop")}})]:e._l(t.diff,(function(t){return t.added?e._e():n("span",{class:["diff",{removed:t.removed}]},[e._v(" "+e._s(t.value)+" ")])}))],2):n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[e._v("N/A")])],1),t.diff?n("td",{attrs:{title:t.newRepr}},["attachment"===t.config.type&&t.newRepr?[n("img",{staticClass:"ui image",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.newRepr+"/proxy?next=medium_square_crop")}})]:e._l(t.diff,(function(t){return t.removed?e._e():n("span",{class:["diff",{added:t.added}]},[e._v(" "+e._s(t.value)+" ")])}))],2):n("td",{attrs:{title:t.newRepr}},["attachment"===t.config.type&&t.newRepr?[n("img",{staticClass:"ui image",attrs:{alt:"",src:e.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.newRepr+"/proxy?next=medium_square_crop")}})]:[e._v(" "+e._s(t.newRepr)+" ")]],2)])})),0)]):e._e()]),e.obj.created_by?n("div",{staticClass:"extra content"},[n("actor-link",{attrs:{actor:e.obj.created_by}})],1):e._e(),e.canDelete||e.canApprove?n("div",{staticClass:"ui bottom attached buttons"},[e.canApprove&&!0!==e.obj.is_approved?n("button",{class:["ui",{loading:e.isLoading},"success","basic","button"],on:{click:function(t){return e.approve(!0)}}},[n("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[e._v("Approve")])],1):e._e(),e.canApprove&&null===e.obj.is_approved?n("button",{class:["ui",{loading:e.isLoading},"warning","basic","button"],on:{click:function(t){return e.approve(!1)}}},[n("translate",{attrs:{"translate-context":"Content/Library/Button.Label"}},[e._v("Reject")])],1):e._e(),e.canDelete?n("dangerous-button",{class:["ui",{loading:e.isLoading},"basic danger button"],attrs:{action:e.remove}},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[e._v("Delete")]),n("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[n("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[e._v("Delete this suggestion?")])],1),n("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[n("p",[n("translate",{attrs:{"translate-context":"Popup/Library/Paragraph"}},[e._v("The suggestion will be completely removed, this action is irreversible.")])],1)]),n("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[e._v("Delete")])],1)],1):e._e()],1):e._e()])},i=[],a=(n("d81d"),n("b64b"),n("bc3a")),o=n.n(a),s=n("bf68"),l=n("3fb2");function u(e){return null===e||void 0===e?"":String(e)}var d={props:{obj:{required:!0},currentState:{required:!1}},data:function(){return{isLoading:!1}},computed:{configs:l["a"].getConfigs,canApprove:l["a"].getCanApprove,canDelete:l["a"].getCanDelete,previousState:function(){return this.obj.is_applied?this.obj.previous_state:this.currentState},detailUrl:function(){if(!this.obj.target)return"";var e,t=this.obj.target.id;return"track"===this.obj.target.type&&(e="library.tracks.edit.detail"),"album"===this.obj.target.type&&(e="library.albums.edit.detail"),"artist"===this.obj.target.type&&(e="library.artists.edit.detail"),this.$router.resolve({name:e,params:{id:t,editId:this.obj.uuid}}).href},updatedFields:function(){var e=this;if(!this.obj.target)return[];var t=this.obj.payload,n=this.previousState,r=Object.keys(t),i=this;return r.map((function(r){var a=l["a"].getFieldConfig(i.configs,e.obj.target.type,r),o=function(e){return e},d=a.getValueRepr||o,c={id:r,config:a};return n&&n[r]&&(c.old=n[r],c.oldRepr=u(d(c.old.value))),c.new=t[r],c.newRepr=u(d(c.new)),c.old&&(c.diff=Object(s["diffWordsWithSpace"])(c.oldRepr,c.newRepr)),c}))}},methods:{remove:function(){var e=this;this.isLoading=!0,o.a.delete("mutations/".concat(this.obj.uuid,"/")).then((function(t){e.$emit("deleted"),e.isLoading=!1}),(function(t){e.isLoading=!1}))},approve:function(e){var t;t="mutations/".concat(this.obj.uuid,e?"/approve/":"/reject/");var n=this;this.isLoading=!0,o.a.post(t).then((function(t){n.$emit("approved",e),n.isLoading=!1,n.$store.commit("ui/incrementNotifications",{count:-1,type:"pendingReviewEdits"})}),(function(e){n.isLoading=!1}))}}},c=d,f=n("2877"),p=Object(f["a"])(c,r,i,!1,null,null,null);t["a"]=p.exports},bf68:function(e,t,n){
/*!

 diff v4.0.1

Software License Agreement (BSD License)

Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>

All rights reserved.

Redistribution and use of this software in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above
  copyright notice, this list of conditions and the
  following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the
  following disclaimer in the documentation and/or other
  materials provided with the distribution.

* Neither the name of Kevin Decker nor the names of its
  contributors may be used to endorse or promote products
  derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
@license
*/
(function(e,n){n(t)})(0,(function(e){"use strict";function t(){}function n(e,t,n,r,i){for(var a=0,o=t.length,s=0,l=0;a<o;a++){var u=t[a];if(u.removed){if(u.value=e.join(r.slice(l,l+u.count)),l+=u.count,a&&t[a-1].added){var d=t[a-1];t[a-1]=t[a],t[a]=d}}else{if(!u.added&&i){var c=n.slice(s,s+u.count);c=c.map((function(e,t){var n=r[l+t];return n.length>e.length?n:e})),u.value=e.join(c)}else u.value=e.join(n.slice(s,s+u.count));s+=u.count,u.added||(l+=u.count)}}var f=t[o-1];return o>1&&"string"===typeof f.value&&(f.added||f.removed)&&e.equals("",f.value)&&(t[o-2].value+=f.value,t.pop()),t}function r(e){return{newPos:e.newPos,components:e.components.slice(0)}}t.prototype={diff:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.callback;"function"===typeof i&&(a=i,i={}),this.options=i;var o=this;function s(e){return a?(setTimeout((function(){a(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,u=e.length,d=1,c=l+u,f=[{newPos:-1,components:[]}],p=this.extractCommon(f[0],t,e,0);if(f[0].newPos+1>=l&&p+1>=u)return s([{value:this.join(t),count:t.length}]);function h(){for(var i=-1*d;i<=d;i+=2){var a=void 0,c=f[i-1],p=f[i+1],h=(p?p.newPos:0)-i;c&&(f[i-1]=void 0);var v=c&&c.newPos+1<l,g=p&&0<=h&&h<u;if(v||g){if(!v||g&&c.newPos<p.newPos?(a=r(p),o.pushComponent(a.components,void 0,!0)):(a=c,a.newPos++,o.pushComponent(a.components,!0,void 0)),h=o.extractCommon(a,t,e,i),a.newPos+1>=l&&h+1>=u)return s(n(o,a.components,t,e,o.useLongestToken));f[i]=a}else f[i]=void 0}d++}if(a)(function e(){setTimeout((function(){if(d>c)return a();h()||e()}),0)})();else while(d<=c){var v=h();if(v)return v}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){var i=t.length,a=n.length,o=e.newPos,s=o-r,l=0;while(o+1<i&&s+1<a&&this.equals(t[o+1],n[s+1]))o++,s++,l++;return l&&e.components.push({count:l}),e.newPos=o,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var i=new t;function a(e,t,n){return i.diff(e,t,n)}function o(e,t){if("function"===typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var s=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,l=/\S/,u=new t;function d(e,t,n){return n=o(n,{ignoreWhitespace:!0}),u.diff(e,t,n)}function c(e,t,n){return u.diff(e,t,n)}u.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!l.test(e)&&!l.test(t)},u.tokenize=function(e){for(var t=e.split(/(\s+|[()[\]{}'"]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&s.test(t[n])&&s.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var f=new t;function p(e,t,n){return f.diff(e,t,n)}function h(e,t,n){var r=o(n,{ignoreWhitespace:!0});return f.diff(e,t,r)}f.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};var v=new t;function g(e,t,n){return v.diff(e,t,n)}v.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var m=new t;function b(e,t,n){return m.diff(e,t,n)}function w(e){return w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function y(e){return x(e)||L(e)||_()}function x(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function L(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}m.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var C=Object.prototype.toString,j=new t;function k(e,t,n){return j.diff(e,t,n)}function S(e,t,n,r,i){var a,o;for(t=t||[],n=n||[],r&&(e=r(i,e)),a=0;a<t.length;a+=1)if(t[a]===e)return n[a];if("[object Array]"===C.call(e)){for(t.push(e),o=new Array(e.length),n.push(o),a=0;a<e.length;a+=1)o[a]=S(e[a],t,n,r,i);return t.pop(),n.pop(),o}if(e&&e.toJSON&&(e=e.toJSON()),"object"===w(e)&&null!==e){t.push(e),o={},n.push(o);var s,l=[];for(s in e)e.hasOwnProperty(s)&&l.push(s);for(l.sort(),a=0;a<l.length;a+=1)s=l[a],o[s]=S(e[s],t,n,r,s);t.pop(),n.pop()}else o=e;return o}j.useLongestToken=!0,j.tokenize=f.tokenize,j.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=void 0===r?function(e,t){return"undefined"===typeof t?n:t}:r;return"string"===typeof e?e:JSON.stringify(S(e,null,null,i),i,"  ")},j.equals=function(e,n){return t.prototype.equals.call(j,e.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"))};var N=new t;function F(e,t,n){return N.diff(e,t,n)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function o(){var e={};i.push(e);while(a<n.length){var r=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(r))break;var o=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(r);o&&(e.index=o[1]),a++}s(e),s(e),e.hunks=[];while(a<n.length){var u=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(u))break;if(/^@@/.test(u))e.hunks.push(l());else{if(u&&t.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(u));a++}}}function s(e){var t=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(t){var r="---"===t[1]?"old":"new",i=t[2].split("\t",2),o=i[0].replace(/\\\\/g,"\\");/^".*"$/.test(o)&&(o=o.substr(1,o.length-2)),e[r+"FileName"]=o,e[r+"Header"]=(i[1]||"").trim(),a++}}function l(){for(var e=a,i=n[a++],o=i.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),s={oldStart:+o[1],oldLines:+o[2]||1,newStart:+o[3],newLines:+o[4]||1,lines:[],linedelimiters:[]},l=0,u=0;a<n.length;a++){if(0===n[a].indexOf("--- ")&&a+2<n.length&&0===n[a+1].indexOf("+++ ")&&0===n[a+2].indexOf("@@"))break;var d=0==n[a].length&&a!=n.length-1?" ":n[a][0];if("+"!==d&&"-"!==d&&" "!==d&&"\\"!==d)break;s.lines.push(n[a]),s.linedelimiters.push(r[a]||"\n"),"+"===d?l++:"-"===d?u++:" "===d&&(l++,u++)}if(l||1!==s.newLines||(s.newLines=0),u||1!==s.oldLines||(s.oldLines=0),t.strict){if(l!==s.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(u!==s.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return s}while(a<n.length)o();return i}function P(e,t,n){var r=!0,i=!1,a=!1,o=1;return function s(){if(r&&!a){if(i?o++:r=!1,e+o<=n)return o;a=!0}if(!i)return a||(r=!0),t<=e-o?-o++:(i=!0,s())}}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof t&&(t=$(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var r,i,a=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],s=t.hunks,l=n.compareLine||function(e,t,n,r){return t===r},u=0,d=n.fuzzFactor||0,c=0,f=0;function p(e,t){for(var n=0;n<e.lines.length;n++){var r=e.lines[n],i=r.length>0?r[0]:" ",o=r.length>0?r.substr(1):r;if(" "===i||"-"===i){if(!l(t+1,a[t],i,o)&&(u++,u>d))return!1;t++}}return!0}for(var h=0;h<s.length;h++){for(var v=s[h],g=a.length-v.oldLines,m=0,b=f+v.oldStart-1,w=P(b,c,g);void 0!==m;m=w())if(p(v,b+m)){v.offset=f+=m;break}if(void 0===m)return!1;c=v.offset+v.oldStart+v.oldLines}for(var y=0,x=0;x<s.length;x++){var L=s[x],_=L.oldStart+L.offset+y-1;y+=L.newLines-L.oldLines,_<0&&(_=0);for(var C=0;C<L.lines.length;C++){var j=L.lines[C],k=j.length>0?j[0]:" ",S=j.length>0?j.substr(1):j,N=L.linedelimiters[C];if(" "===k)_++;else if("-"===k)a.splice(_,1),o.splice(_,1);else if("+"===k)a.splice(_,0,S),o.splice(_,0,N),_++;else if("\\"===k){var F=L.lines[C-1]?L.lines[C-1][0]:null;"+"===F?r=!0:"-"===F&&(i=!0)}}}if(r)while(!a[a.length-1])a.pop(),o.pop();else i&&(a.push(""),o.push("\n"));for(var H=0;H<a.length-1;H++)a[H]=a[H]+o[H];return a.join("")}function R(e,t){"string"===typeof e&&(e=$(e));var n=0;function r(){var i=e[n++];if(!i)return t.complete();t.loadFile(i,(function(e,n){if(e)return t.complete(e);var a=H(n,i,t);t.patched(i,a,(function(e){if(e)return t.complete(e);r()}))}))}r()}function q(e,t,n,r,i,a,o){o||(o={}),"undefined"===typeof o.context&&(o.context=4);var s=p(n,r,o);function l(e){return e.map((function(e){return" "+e}))}s.push({value:"",lines:[]});for(var u=[],d=0,c=0,f=[],h=1,v=1,g=function(e){var t=s[e],i=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=i,t.added||t.removed){var a;if(!d){var p=s[e-1];d=h,c=v,p&&(f=o.context>0?l(p.lines.slice(-o.context)):[],d-=f.length,c-=f.length)}(a=f).push.apply(a,y(i.map((function(e){return(t.added?"+":"-")+e})))),t.added?v+=i.length:h+=i.length}else{if(d)if(i.length<=2*o.context&&e<s.length-2){var g;(g=f).push.apply(g,y(l(i)))}else{var m,b=Math.min(i.length,o.context);(m=f).push.apply(m,y(l(i.slice(0,b))));var w={oldStart:d,oldLines:h-d+b,newStart:c,newLines:v-c+b,lines:f};if(e>=s.length-2&&i.length<=o.context){var x=/\n$/.test(n),L=/\n$/.test(r),_=0==i.length&&f.length>w.oldLines;!x&&_&&f.splice(w.oldLines,0,"\\ No newline at end of file"),(x||_)&&L||f.push("\\ No newline at end of file")}u.push(w),d=0,c=0,f=[]}h+=i.length,v+=i.length}},m=0;m<s.length;m++)g(m);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:a,hunks:u}}function A(e,t,n,r,i,a,o){var s=q(e,t,n,r,i,a,o),l=[];e==t&&l.push("Index: "+e),l.push("==================================================================="),l.push("--- "+s.oldFileName+("undefined"===typeof s.oldHeader?"":"\t"+s.oldHeader)),l.push("+++ "+s.newFileName+("undefined"===typeof s.newHeader?"":"\t"+s.newHeader));for(var u=0;u<s.hunks.length;u++){var d=s.hunks[u];l.push("@@ -"+d.oldStart+","+d.oldLines+" +"+d.newStart+","+d.newLines+" @@"),l.push.apply(l,d.lines)}return l.join("\n")+"\n"}function T(e,t,n,r,i,a){return A(e,e,t,n,r,i,a)}function V(e,t){return e.length===t.length&&E(e,t)}function E(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function O(e){var t=ne(e.lines),n=t.oldLines,r=t.newLines;void 0!==n?e.oldLines=n:delete e.oldLines,void 0!==r?e.newLines=r:delete e.newLines}function z(e,t,n){e=D(e,n),t=D(t,n);var r={};(e.index||t.index)&&(r.index=e.index||t.index),(e.newFileName||t.newFileName)&&(I(e)?I(t)?(r.oldFileName=W(r,e.oldFileName,t.oldFileName),r.newFileName=W(r,e.newFileName,t.newFileName),r.oldHeader=W(r,e.oldHeader,t.oldHeader),r.newHeader=W(r,e.newHeader,t.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=t.oldFileName||e.oldFileName,r.newFileName=t.newFileName||e.newFileName,r.oldHeader=t.oldHeader||e.oldHeader,r.newHeader=t.newHeader||e.newHeader)),r.hunks=[];var i=0,a=0,o=0,s=0;while(i<e.hunks.length||a<t.hunks.length){var l=e.hunks[i]||{oldStart:1/0},u=t.hunks[a]||{oldStart:1/0};if(M(l,u))r.hunks.push(U(l,o)),i++,s+=l.newLines-l.oldLines;else if(M(u,l))r.hunks.push(U(u,s)),a++,o+=u.newLines-u.oldLines;else{var d={oldStart:Math.min(l.oldStart,u.oldStart),oldLines:0,newStart:Math.min(l.newStart+o,u.oldStart+s),newLines:0,lines:[]};J(d,l.oldStart,l.lines,u.oldStart,u.lines),a++,i++,r.hunks.push(d)}}return r}function D(e,t){if("string"===typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return $(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return q(void 0,void 0,t,e)}return e}function I(e){return e.newFileName&&e.newFileName!==e.oldFileName}function W(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function M(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function U(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function J(e,t,n,r,i){var a={offset:t,lines:n,index:0},o={offset:r,lines:i,index:0};G(e,a,o),G(e,o,a);while(a.index<a.lines.length&&o.index<o.lines.length){var s=a.lines[a.index],l=o.lines[o.index];if("-"!==s[0]&&"+"!==s[0]||"-"!==l[0]&&"+"!==l[0])if("+"===s[0]&&" "===l[0]){var u;(u=e.lines).push.apply(u,y(Q(a)))}else if("+"===l[0]&&" "===s[0]){var d;(d=e.lines).push.apply(d,y(Q(o)))}else"-"===s[0]&&" "===l[0]?X(e,a,o):"-"===l[0]&&" "===s[0]?X(e,o,a,!0):s===l?(e.lines.push(s),a.index++,o.index++):Z(e,Q(a),Q(o));else B(e,a,o)}K(e,a),K(e,o),O(e)}function B(e,t,n){var r=Q(t),i=Q(n);if(ee(r)&&ee(i)){var a,o;if(E(r,i)&&te(n,r,r.length-i.length))return void(a=e.lines).push.apply(a,y(r));if(E(i,r)&&te(t,i,i.length-r.length))return void(o=e.lines).push.apply(o,y(i))}else if(V(r,i)){var s;return void(s=e.lines).push.apply(s,y(r))}Z(e,r,i)}function X(e,t,n,r){var i,a=Q(t),o=Y(n,a);o.merged?(i=e.lines).push.apply(i,y(o.merged)):Z(e,r?o:a,r?a:o)}function Z(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function G(e,t,n){while(t.offset<n.offset&&t.index<t.lines.length){var r=t.lines[t.index++];e.lines.push(r),t.offset++}}function K(e,t){while(t.index<t.lines.length){var n=t.lines[t.index++];e.lines.push(n)}}function Q(e){var t=[],n=e.lines[e.index][0];while(e.index<e.lines.length){var r=e.lines[e.index];if("-"===n&&"+"===r[0]&&(n="+"),n!==r[0])break;t.push(r),e.index++}return t}function Y(e,t){var n=[],r=[],i=0,a=!1,o=!1;while(i<t.length&&e.index<e.lines.length){var s=e.lines[e.index],l=t[i];if("+"===l[0])break;if(a=a||" "!==s[0],r.push(l),i++,"+"===s[0]){o=!0;while("+"===s[0])n.push(s),s=e.lines[++e.index]}l.substr(1)===s.substr(1)?(n.push(s),e.index++):o=!0}if("+"===(t[i]||"")[0]&&a&&(o=!0),o)return n;while(i<t.length)r.push(t[i++]);return{merged:r,changes:n}}function ee(e){return e.reduce((function(e,t){return e&&"-"===t[0]}),!0)}function te(e,t,n){for(var r=0;r<n;r++){var i=t[t.length-n+r].substr(1);if(e.lines[e.index+r]!==" "+i)return!1}return e.index+=n,!0}function ne(e){var t=0,n=0;return e.forEach((function(e){if("string"!==typeof e){var r=ne(e.mine),i=ne(e.theirs);void 0!==t&&(r.oldLines===i.oldLines?t+=r.oldLines:t=void 0),void 0!==n&&(r.newLines===i.newLines?n+=r.newLines:n=void 0)}else void 0===n||"+"!==e[0]&&" "!==e[0]||n++,void 0===t||"-"!==e[0]&&" "!==e[0]||t++})),{oldLines:t,newLines:n}}function re(e){for(var t,n,r=[],i=0;i<e.length;i++)t=e[i],n=t.added?1:t.removed?-1:0,r.push([n,t.value]);return r}function ie(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.added?t.push("<ins>"):r.removed&&t.push("<del>"),t.push(ae(r.value)),r.added?t.push("</ins>"):r.removed&&t.push("</del>")}return t.join("")}function ae(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}N.tokenize=function(e){return e.slice()},N.join=N.removeEmpty=function(e){return e},e.Diff=t,e.diffChars=a,e.diffWords=d,e.diffWordsWithSpace=c,e.diffLines=p,e.diffTrimmedLines=h,e.diffSentences=g,e.diffCss=b,e.diffJson=k,e.diffArrays=F,e.structuredPatch=q,e.createTwoFilesPatch=A,e.createPatch=T,e.applyPatch=H,e.applyPatches=R,e.parsePatch=$,e.merge=z,e.convertChangesToDMP=re,e.convertChangesToXML=ie,e.canonicalize=S,Object.defineProperty(e,"__esModule",{value:!0})}))}}]);