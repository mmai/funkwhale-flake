(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0207":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.domains,expression:"labels.domains"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui left floated header"},[a("translate",{attrs:{"translate-context":"*/Moderation/*/Noun"}},[t._v("Domains")])],1),a("form",{staticClass:"ui right floated form",on:{submit:function(e){return e.preventDefault(),t.createDomain(e)}}},[t.errors&&t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Message.Title"}},[t._v("Error while creating domain")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"inline fields"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"add-domain"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Form.Label/Verb"}},[t._v("Add a domain")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.domainName,expression:"domainName"}],attrs:{type:"text",name:"domain",id:"add-domain"},domProps:{value:t.domainName},on:{input:function(e){e.target.composing||(t.domainName=e.target.value)}}})]),t.allowListEnabled?a("div",{staticClass:"field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.domainAllowed,expression:"domainAllowed"}],attrs:{type:"checkbox",name:"allowed",id:"allowed"},domProps:{checked:Array.isArray(t.domainAllowed)?t._i(t.domainAllowed,null)>-1:t.domainAllowed},on:{change:function(e){var a=t.domainAllowed,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);n.checked?i<0&&(t.domainAllowed=a.concat([r])):i>-1&&(t.domainAllowed=a.slice(0,i).concat(a.slice(i+1)))}else t.domainAllowed=s}}}),a("label",{attrs:{for:"allowed"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Action/Verb"}},[t._v("Add to allow-list")])],1)]):t._e(),a("div",{staticClass:"field"},[a("button",{class:["ui",{loading:t.isCreating},"success","button"],attrs:{type:"submit",disabled:t.isCreating}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Button/Verb"}},[t._v("Add")])],1)])])]),a("div",{staticClass:"ui clearing hidden divider"}),a("domains-table",{attrs:{"allow-list-enabled":t.allowListEnabled}})],1)])},s=[],r=(a("b0c0"),a("bc3a")),i=a.n(r),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"domains-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{id:"domains-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t.allowListEnabled?a("div",{staticClass:"field"},[a("label",{attrs:{for:"domains-allow-list"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Adjective"}},[t._v("Is present on allow-list")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.allowed,expression:"allowed"}],staticClass:"ui dropdown",attrs:{id:"domains-allow-list"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.allowed=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:null}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{domProps:{value:!0}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Yes")])],1),a("option",{domProps:{value:!1}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("No")])],1)])]):t._e(),a("div",{staticClass:"field"},[a("label",{attrs:{for:"domains-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"domains-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"domains-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"domains-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result&&t.result.results.length>0?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/federation/domains/action/",idField:"name",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.name}}}},[t._v(" "+t._s(e.obj.name)+" "),t.allowListEnabled&&e.obj.allowed?a("i",{staticClass:"success check icon",attrs:{title:t.labels.allowListTitle}}):t._e()])],1),a("td",[t._v(" "+t._s(e.obj.actors_count)+" ")]),a("td",[t._v(" "+t._s(e.obj.outbox_activities_count)+" ")]),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1),a("td",[e.obj.instance_policy?a("span",[a("i",{staticClass:"shield icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Yes")])],1):t._e()])]}}],null,!1,2505588921)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Users")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Received messages")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short"}},[t._v("Under moderation rule")])],1)])],2):a("div",{staticClass:"ui placeholder segment"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"server icon"}),a("translate",{attrs:{"translate-context":"Content/Home/Placeholder"}},[t._v("No other pods found")])],1)])],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},l=[],c=(a("ac1f"),a("841c"),a("ceb5")),d=a("cadb"),u=a("1799"),v=a("414c"),p=a("20be"),m=a("64c4"),h={mixins:[p["a"],m["a"]],props:{filters:{type:Object,required:!1},allowListEnabled:{type:Boolean,default:!1}},components:{Pagination:u["a"],ActionTable:v["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:"",allowed:null,orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["name","name"],["creation_date","first_seen"],["actors_count","users"],["outbox_activities_count","received_messages"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t={page:this.page,page_size:this.paginateBy,q:this.search,ordering:this.getOrderingAsString()};null!==this.allowed&&(t.allowed=this.allowed);var e=c["a"].merge(t,this.filters),a=this;a.isLoading=!0,a.checked=[],i.a.get("/manage/federation/domains/",{params:e}).then((function(t){a.result=t.data,a.isLoading=!1}),(function(t){a.isLoading=!1,a.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by name…"),allowListTitle:this.$pgettext("Content/Moderation/Popup","This domain is present in your allow-list")}},actionFilters:function(){var t={q:this.search};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){return[{name:"purge",label:this.$pgettext("*/*/*/Verb","Purge"),isDangerous:!0},{name:"allow_list_add",label:this.$pgettext("Content/Moderation/Action/Verb","Add to allow-list"),filterCheckable:function(t){return!t.allowed}},{name:"allow_list_remove",label:this.$pgettext("Content/Moderation/Action/Verb","Remove from allow-list"),filterCheckable:function(t){return t.allowed}}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},allowed:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},b=h,g=a("2877"),f=Object(g["a"])(b,o,l,!1,null,null,null),_=f.exports,C={props:["allowListEnabled"],components:{DomainsTable:_},data:function(){return{domainName:"",domainAllowed:!!this.allowListEnabled||null,isCreating:!1,errors:[]}},computed:{labels:function(){return{domains:this.$pgettext("*/Moderation/*/Noun","Domains")}}},methods:{createDomain:function(){var t=this,e=this;this.isCreating=!0,this.errors=[],i.a.post("manage/federation/domains/",{name:this.domainName,allowed:this.domainAllowed}).then((function(e){t.isCreating=!1,t.$router.push({name:"manage.moderation.domains.detail",params:{id:e.data.name}})}),(function(t){e.isCreating=!1,e.errors=t.backendErrors}))}}},y=C,x=Object(g["a"])(y,n,s,!1,null,null,null);e["default"]=x.exports},"0580":function(t,e){var a=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],n=a.join(","),s="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function r(t,e){e=e||{};var a,r,o,l=[],c=[],d=t.querySelectorAll(n);for(e.includeContainer&&s.call(t,n)&&(d=Array.prototype.slice.apply(d),d.unshift(t)),a=0;a<d.length;a++)r=d[a],i(r)&&(o=u(r),0===o?l.push(r):c.push({documentOrder:a,tabIndex:o,node:r}));var p=c.sort(v).map((function(t){return t.node})).concat(l);return p}function i(t){return!(!l(t)||g(t)||u(t)<0)}function o(t){if(!t)throw new Error("No node provided");return!1!==s.call(t,n)&&i(t)}function l(t){return!(t.disabled||h(t)||C(t))}r.isTabbable=o,r.isFocusable=d;var c=a.concat("iframe").join(",");function d(t){if(!t)throw new Error("No node provided");return!1!==s.call(t,c)&&l(t)}function u(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?p(t)?0:t.tabIndex:e}function v(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex}function p(t){return"true"===t.contentEditable}function m(t){return"INPUT"===t.tagName}function h(t){return m(t)&&"hidden"===t.type}function b(t){return m(t)&&"radio"===t.type}function g(t){return b(t)&&!_(t)}function f(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e]}function _(t){if(!t.name)return!0;var e=t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'),a=f(e);return!a||a===t}function C(t){return null===t.offsetParent||"hidden"===getComputedStyle(t).visibility}t.exports=r},"0e23":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher page-admin-library"},[a("nav",{staticClass:"ui secondary pointing menu",attrs:{role:"navigation","aria-label":t.labels.secondaryMenu}},[a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.edits"}}},[a("translate",{attrs:{"translate-context":"*/Admin/*/Noun"}},[t._v("Edits")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.channels"}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Channels")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.artists"}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artists")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.albums"}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.tracks"}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.libraries"}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Libraries")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.uploads"}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.tags"}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Tags")])],1)],1),a("router-view",{key:t.$route.fullPath})],1)},s=[],r={computed:{labels:function(){var t=this.$pgettext("Head/Admin/Title","Manage library"),e=this.$pgettext("Menu/*/Hidden text","Secondary menu");return{title:t,secondaryMenu:e}}}},i=r,o=a("2877"),l=Object(o["a"])(i,n,s,!1,null,null,null);e["default"]=l.exports},1268:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[a("import-status-modal",{attrs:{upload:t.object,show:t.showUploadDetailModal},on:{"update:show":function(e){t.showUploadDetailModal=e}}}),a("section",{directives:[{name:"title",rawName:"v-title",value:t.displayName(t.object),expression:"displayName(object)"}],class:["ui","head","vertical","stripe","segment"]},[a("div",{staticClass:"ui stackable one column grid"},[a("div",{staticClass:"ui column"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui header"},[a("i",{staticClass:"circular inverted file icon"}),a("div",{staticClass:"content"},[t._v(" "+t._s(t._f("truncate")(t.displayName(t.object),100))+" "),a("div",{staticClass:"sub header"},[t.object.is_local?[a("span",{staticClass:"ui tiny accent label"},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1)]:t._e()],2)])]),a("div",{staticClass:"header-buttons"},[a("div",{staticClass:"ui icon buttons"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"ui labeled icon button",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/upload/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"menu"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/upload/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),a("a",{staticClass:"basic item",attrs:{href:t.object.url||t.object.fid,target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open remote profile")])],1)])])]),a("div",{staticClass:"ui buttons"},[t.object.audio_file?a("a",{staticClass:"ui labeled icon button",attrs:{href:t.$store.getters["instance/absoluteUrl"](t.object.audio_file),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"download icon"}),a("translate",{attrs:{"translate-context":"Content/Track/Link/Verb"}},[t._v("Download")])],1):t._e()]),a("div",{staticClass:"ui buttons"},[a("dangerous-button",{class:["ui",{loading:t.isLoading},"basic danger button"],attrs:{action:t.remove}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Delete this upload?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The upload will be removed. This action is irreversible.")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])])])])]),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui stackable three column grid"},[a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"info icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Upload data")])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("td",[t._v(" "+t._s(t.displayName(t.object))+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("privacy_level",t.object.library.privacy_level)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Visibility")])],1)],1),a("td",[t._v(" "+t._s(t.sharedLabels.fields.privacy_level.shortChoices[t.object.library.privacy_level])+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:t.object.library.actor.full_username}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Account")])],1)],1),a("td",[t._v(" "+t._s(t.object.library.actor.preferred_username)+" ")])]),t.object.is_local?t._e():a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.object.domain}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),a("td",[t._v(" "+t._s(t.object.domain)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("status",t.object.import_status)}}}},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Import status")])],1)],1),a("td",[t._v(" "+t._s(t.sharedLabels.fields.import_status.choices[t.object.import_status].label)+" "),a("button",{staticClass:"ui tiny basic icon button",attrs:{title:t.sharedLabels.fields.import_status.detailTitle},on:{click:function(e){t.detailedUpload=t.object,t.showUploadDetailModal=!0}}},[a("i",{staticClass:"question circle outline icon"})])])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.libraries.detail",params:{id:t.object.library.uuid}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Library")])],1)],1),a("td",[t._v(" "+t._s(t.object.library.name)+" ")])])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"feed icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),a("td",[a("human-date",{attrs:{date:t.object.creation_date}})],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Accessed date")])],1),a("td",[t.object.accessed_date?a("human-date",{attrs:{date:t.object.accessed_date}}):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"music icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[t.object.track?a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.tracks.detail",params:{id:t.object.track.id}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Track")])],1)],1),a("td",[t._v(" "+t._s(t.object.track.title)+" ")])]):t._e(),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),a("td",[t.object.audio_file?[t._v(" "+t._s(t._f("humanSize")(t.object.size))+" ")]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Size")])],1),a("td",[t._v(" "+t._s(t._f("humanSize")(t.object.size))+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Track/*/Noun"}},[t._v("Bitrate")])],1),a("td",[t.object.bitrate?[t._v(" "+t._s(t._f("humanSize")(t.object.bitrate))+"/s ")]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Duration")])],1),a("td",[t.object.duration?[t._v(" "+t._s(t._f("duration")(t.object.duration))+" ")]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("type",t.object.mimetype)}}}},[a("translate",{attrs:{"translate-context":"Content/Track/Table.Label/Noun"}},[t._v("Type")])],1)],1),a("td",[t.object.mimetype?[t._v(" "+t._s(t.object.mimetype)+" ")]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)])])])])])])])]:t._e()],2)},s=[],r=(a("99af"),a("bc3a")),i=a.n(r),o=(a("3677"),a("64c4")),l=a("fe5e"),c=a("cadb"),d={props:["id"],mixins:[o["a"]],components:{ImportStatusModal:l["a"]},data:function(){return{time:c["a"],detailedUpload:null,showUploadDetailModal:!1,isLoading:!0,object:null,stats:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/library/uploads/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))},remove:function(){var t=this;this.isLoading=!0;var e="manage/library/uploads/".concat(this.id,"/");i.a.delete(e).then((function(e){t.$router.push({name:"manage.library.uploads"})}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')},displayName:function(t){return t.filename?t.filename:t.source?t.source:t.uuid}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this object")}}}},u=d,v=a("2877"),p=Object(v["a"])(u,n,s,!1,null,null,null);e["default"]=p.exports},1347:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.invitations,expression:"labels.invitations"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.invitations))]),a("invitation-form"),a("div",{staticClass:"ui hidden divider"}),a("invitations-table")],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Admin/Error message.Title"}},[t._v("Error while creating invitation")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"inline fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"invitation-code"}},[a("translate",{attrs:{"translate-context":"Content/*/Input.Label"}},[t._v("Invitation code")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{for:"invitation-code",name:"code",type:"text",placeholder:t.labels.placeholder},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),a("div",{staticClass:"ui field"},[a("button",{class:["ui",{loading:t.isLoading},"button"],attrs:{disabled:t.isLoading,type:"submit"}},[a("translate",{attrs:{"translate-context":"Content/Admin/Button.Label/Verb"}},[t._v("Get a new invitation")])],1)])])]),t.invitations.length>0?a("div",[a("div",{staticClass:"ui hidden divider"}),a("table",{staticClass:"ui ui basic table"},[a("thead",[a("tr",[a("th",[a("translate",{attrs:{"translate-context":"Content/Admin/Table.Label/Noun"}},[t._v("Code")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Admin/Table.Label/Noun"}},[t._v("Share link")])],1)])]),a("tbody",t._l(t.invitations,(function(e){return a("tr",{key:e.code},[a("td",[t._v(t._s(e.code.toUpperCase()))]),a("td",[a("a",{attrs:{href:t.getUrl(e.code),target:"_blank"}},[t._v(t._s(t.getUrl(e.code)))])])])})),0)]),a("button",{staticClass:"ui basic button",on:{click:function(e){t.invitations=[]}}},[a("translate",{attrs:{"translate-context":"Content/Library/Button.Label"}},[t._v("Clear")])],1)]):t._e()])},i=[],o=a("bc3a"),l=a.n(o),c={data:function(){return{isLoading:!1,code:null,invitations:[],errors:[]}},computed:{labels:function(){return{placeholder:this.$pgettext("Content/Admin/Input.Placeholder","Leave empty for a random code")}}},methods:{submit:function(){var t=this;this.isLoading=!0,this.errors=[];var e="manage/users/invitations/",a={code:this.code};l.a.post(e,a).then((function(e){t.isLoading=!1,t.invitations.unshift(e.data)}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))},getUrl:function(t){return this.$store.getters["instance/absoluteUrl"](this.$router.resolve({name:"signup",query:{invitation:t.toUpperCase()}}).href)}}},d=c,u=a("2877"),v=Object(u["a"])(d,r,i,!1,null,null,null),p=v.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"invitations-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{id:"invitations-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"invitations-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"invitations-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"invitations-status"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.isOpen,expression:"isOpen"}],staticClass:"ui dropdown",attrs:{id:"invitations-status"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.isOpen=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:null}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{domProps:{value:!0}},[a("translate",{attrs:{"translate-context":"Content/Admin/Dropdown/Adjective"}},[t._v("Open")])],1),a("option",{domProps:{value:!1}},[a("translate",{attrs:{"translate-context":"Content/Admin/Dropdown/Adjective"}},[t._v("Expired/used")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/users/invitations/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.users.users.detail",params:{id:e.obj.id}}}},[t._v(t._s(e.obj.owner.username))])],1),a("td",[e.obj.users.length>0?a("span",{staticClass:"ui success basic label"},[a("translate",{attrs:{"translate-context":"Content/Admin/Table"}},[t._v("Used")])],1):t.moment().isAfter(e.obj.expiration_date)?a("span",{staticClass:"ui danger basic label"},[a("translate",{attrs:{"translate-context":"Content/Admin/Table"}},[t._v("Expired")])],1):a("span",{staticClass:"ui basic label"},[a("translate",{attrs:{"translate-context":"Content/Admin/Table"}},[t._v("Not used")])],1)]),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1),a("td",[a("human-date",{attrs:{date:e.obj.expiration_date}})],1),a("td",[t._v(" "+t._s(e.obj.code.toUpperCase())+" ")])]}}],null,!1,3745685002)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Owner")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Admin/Table.Label/Noun"}},[t._v("Expiration date")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Admin/Table.Label/Noun"}},[t._v("Code")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},h=[],b=(a("ac1f"),a("841c"),a("c1df")),g=a.n(b),f=a("ceb5"),_=a("1799"),C=a("414c"),y=a("20be"),x=a("64c4"),j={mixins:[y["a"],x["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:_["a"],ActionTable:C["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{moment:g.a,isLoading:!1,result:null,page:1,paginateBy:50,search:"",isOpen:null,orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["expiration_date","expiration_date"],["creation_date","creation_date"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=f["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search,is_open:this.isOpen,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/users/invitations/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Admin/Input.Placeholder/Verb","Search by username, e-mail address, code…")}},actionFilters:function(){var t={q:this.search};return this.filters?f["a"].merge(t,this.filters):t},actions:function(){var t=this.$pgettext("*/*/*/Verb","Delete");return[{name:"delete",label:t,filterCheckable:function(t){return 0===t.users.length&&g()().isBefore(t.expiration_date)}}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.page=1,this.fetchData()},isOpen:function(){this.page=1,this.fetchData()},orderingDirection:function(){this.page=1,this.fetchData()}}},w=j,k=Object(u["a"])(w,m,h,!1,null,null,null),L=k.exports,D={components:{InvitationForm:p,InvitationsTable:L},computed:{labels:function(){return{invitations:this.$pgettext("*/Admin/*/Noun","Invitations")}}}},N=D,S=Object(u["a"])(N,n,s,!1,null,null,null);e["default"]=S.exports},"1a78":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.title))]),a("div",{staticClass:"ui hidden divider"}),a("tracks-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"tracks-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"tracks-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"tracks-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"tracks-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"tracks-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"tracks-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/tracks/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.library.tracks.detail",params:{id:e.obj.id}}}},[t._v(t._s(e.obj.title))])],1),a("td",[e.obj.album?[a("router-link",{attrs:{to:{name:"manage.library.albums.detail",params:{id:e.obj.album.id}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.album.title},on:{click:function(a){return a.preventDefault(),t.addSearchToken("album_id",e.obj.album.id)}}},[t._v(t._s(e.obj.album.title))])]:t._e()],2),a("td",[a("router-link",{attrs:{to:{name:"manage.library.artists.detail",params:{id:e.obj.artist.id}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.artist.name},on:{click:function(a){return a.preventDefault(),t.addSearchToken("artist_id",e.obj.artist.id)}}},[t._v(t._s(e.obj.artist.name))])],1),a("td",[e.obj.is_local?a("a",{staticClass:"ui tiny accent icon link label",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1):[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.domain}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.domain},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[t._v(t._s(e.obj.domain))])]],2),a("td",[e.obj.license?a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.license},on:{click:function(a){return a.preventDefault(),t.addSearchToken("license",e.obj.license)}}},[t._v(t._s(e.obj.license))]):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1)]}}],null,!1,2991418194)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Title")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Album")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artist")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("License")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/library/tracks/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by domain, title, artist, album, MusicBrainz ID…")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){var t=this.$pgettext("*/*/*/Verb","Delete"),e=this.$pgettext("Popup/*/Paragraph","The selected tracks will be removed, as well as associated uploads, favorites and listening history. This action is irreversible.");return[{name:"delete",label:t,confirmationMessage:e,isDangerous:!0,allowAll:!1,confirmColor:"danger"}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},f=g,_=a("2877"),C=Object(_["a"])(f,r,i,!1,null,null,null),y=C.exports,x={components:{TracksTable:y},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{title:this.$pgettext("*/*/*","Tracks")}}}},j=x,w=Object(_["a"])(j,n,s,!1,null,null,null);e["default"]=w.exports},"1a9a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.title))]),a("div",{staticClass:"ui hidden divider"}),a("libraries-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"libraries-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"libraries-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"libraries-visibility"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Visibility")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"libraries-visibility"},domProps:{value:t.getTokenValue("privacy_level","")},on:{change:function(e){return t.addSearchToken("privacy_level",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"me"}},[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices.me))]),a("option",{attrs:{value:"instance"}},[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices.instance))]),a("option",{attrs:{value:"everyone"}},[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices.everyone))])])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"libraries-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"libraries-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"libraries-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"libraries-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/libraries/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.library.libraries.detail",params:{id:e.obj.uuid}}}},[t._v(t._s(e.obj.name))])],1),a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:e.obj.actor.full_username}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.actor.full_username},on:{click:function(a){return a.preventDefault(),t.addSearchToken("account",e.obj.actor.full_username)}}},[t._v(t._s(e.obj.actor.preferred_username))])],1),a("td",[e.obj.is_local?a("a",{staticClass:"ui tiny accent icon link label",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1):[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.domain}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.domain},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[t._v(t._s(e.obj.domain))])]],2),a("td",[a("a",{staticClass:"discrete link",attrs:{href:"",title:t.sharedLabels.fields.privacy_level.shortChoices[e.obj.privacy_level]},on:{click:function(a){return a.preventDefault(),t.addSearchToken("privacy_level",e.obj.privacy_level)}}},[t._v(" "+t._s(t.sharedLabels.fields.privacy_level.shortChoices[e.obj.privacy_level])+" ")])]),a("td",[t._v(" "+t._s(e.obj.uploads_count)+" ")]),a("td",[t._v(" "+t._s(e.obj.followers_count)+" ")]),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1)]}}],null,!1,1120162031)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Account")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Visibility")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Federation/*/Noun"}},[t._v("Followers")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["followers_count","followers"],["uploads_count","uploads"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/library/libraries/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by domain, actor, name, description…")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){var t=this.$pgettext("*/*/*/Verb","Delete"),e=this.$pgettext("Popup/*/Paragraph","The selected library will be removed, as well as associated uploads and follows. This action is irreversible.");return[{name:"delete",label:t,confirmationMessage:e,isDangerous:!0,allowAll:!1,confirmColor:"danger"}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},f=g,_=a("2877"),C=Object(_["a"])(f,r,i,!1,null,null,null),y=C.exports,x={components:{LibrariesTable:y},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{title:this.$pgettext("*/*/*/Noun","Libraries")}}}},j=x,w=Object(_["a"])(j,n,s,!1,null,null,null);e["default"]=w.exports},"271e":function(t,e,a){t.exports=a.p+"img/default-cover.89d13c2f.png"},"32df":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.title))]),a("div",{staticClass:"ui hidden divider"}),a("artists-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"artists-serarch"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"artists-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"artists-category"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"artists-category"},domProps:{value:t.getTokenValue("category","")},on:{change:function(e){return t.addSearchToken("category",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"podcast"}},[t._v(t._s(t.sharedLabels.fields.content_category.choices.podcast))]),a("option",{attrs:{value:"music"}},[t._v(t._s(t.sharedLabels.fields.content_category.choices.music))]),a("option",{attrs:{value:"other"}},[t._v(t._s(t.sharedLabels.fields.content_category.choices.other))])])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"artists-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"artists-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"artists-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"artists-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/artists/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:t.getUrl(e.obj)}},[t._v(" "+t._s(e.obj.name)+" ")])],1),a("td",[e.obj.is_local?a("a",{staticClass:"ui tiny accent icon link label",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1):[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.domain}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.domain},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[t._v(t._s(e.obj.domain))])]],2),a("td",[t._v(" "+t._s(e.obj.albums_count)+" ")]),a("td",[t._v(" "+t._s(e.obj.tracks_count)+" ")]),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1)]}}],null,!1,2625092164)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["name","name"]]}},created:function(){this.fetchData()},methods:{getUrl:function(t){return t.channel?{name:"manage.channels.detail",params:{id:t.channel}}:{name:"manage.library.artists.detail",params:{id:t.id}}},fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/library/artists/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by domain, name, MusicBrainz ID…")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){var t=this.$pgettext("*/*/*/Verb","Delete"),e=this.$pgettext("Popup/*/Paragraph","The selected artist will be removed, as well as associated uploads, tracks, albums, favorites and listening history. This action is irreversible.");return[{name:"delete",label:t,confirmationMessage:e,isDangerous:!0,allowAll:!1,confirmColor:"danger"}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},f=g,_=a("2877"),C=Object(_["a"])(f,r,i,!1,null,null,null),y=C.exports,x={components:{ArtistsTable:y},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{title:this.$pgettext("*/*/*/Noun","Artists")}}}},j=x,w=Object(_["a"])(j,n,s,!1,null,null,null);e["default"]=w.exports},"3b1b8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.label?a("label",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1):t._e(),a("select",{staticClass:"ui dropdown",attrs:{required:t.required},domProps:{value:t.value},on:{change:function(e){return t.$emit("input",e.target.value)}}},[t.empty?a("option",{attrs:{disabled:"",value:""}}):t._e(),t._l(t.allCategories,(function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2),t._t("default")],2)},s=[],r=(a("99af"),a("d81d"),a("4e82"),a("d3b7"),a("ddb0"),a("64c4")),i=a("ceb5"),o={mixins:[r["a"]],props:{value:{},all:{},label:{},empty:{},required:{},restrictTo:{default:function(){return[]}}},computed:{allCategories:function(){var t,e=this,a=[];return this.all&&a.push({value:"",label:this.$pgettext("Content/*/Dropdown","All")}),t=this.restrictTo.length>0?this.restrictTo:i["a"].keys(this.sharedLabels.fields.report_type.choices),a.concat(t.sort().map((function(t){return{value:t,label:e.sharedLabels.fields.report_type.choices[t]||t}})))}}},l=o,c=a("2877"),d=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=d.exports},"3dc7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui feed"},t._l(t.notes,(function(e){return a("div",{key:e.uuid,staticClass:"event"},[t._m(0,!0),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[a("actor-link",{attrs:{admin:!0,actor:e.author}}),a("div",{staticClass:"date"},[a("human-date",{attrs:{date:e.creation_date}})],1)],1),a("div",{staticClass:"extra text"},[a("expandable-div",{attrs:{content:e.summary}},[a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(e.summary))}})])],1),a("div",{staticClass:"meta"},[a("dangerous-button",{class:["ui",{loading:t.isLoading},"basic borderless mini button"],on:{confirm:function(a){return t.remove(e)}}},[a("i",{staticClass:"trash icon"}),a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Moderation/Title"}},[t._v("Delete this note?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The note will be removed. This action is irreversible.")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])])})),0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("i",{staticClass:"comment outline icon"})])}],r=a("bc3a"),i=a.n(r),o=a("339e"),l=a.n(o),c={props:{notes:{required:!0}},data:function(){return{markdown:new l.a.Converter,isLoading:!1}},methods:{remove:function(t){var e=this;this.isLoading=!0,i.a.delete("manage/moderation/notes/".concat(t.uuid,"/")).then((function(a){e.$emit("deleted",t.uuid),e.isLoading=!1}),(function(t){e.isLoading=!1}))}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["a"]=v.exports},"404d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui",{active:t.show},{"overlay fullscreen":t.fullscreen&&["phone","tablet"].indexOf(t.$store.getters["ui/windowSize"])>-1},"modal"]},[a("i",{staticClass:"close inside icon"}),t.show?t._t("default"):t._e()],2)},s=[],r=a("1157"),i=a.n(r),o=a("6c92"),l=a.n(o),c={props:{show:{type:Boolean,required:!0},fullscreen:{type:Boolean,default:!0}},data:function(){return{control:null,focusTrap:null}},mounted:function(){this.focusTrap=l()(this.$el)},beforeDestroy:function(){this.control&&i()(this.$el).modal("hide"),i()(this.$el).remove()},methods:{initModal:function(){this.control=i()(this.$el).modal({duration:100,onApprove:function(){this.$emit("approved")}.bind(this),onDeny:function(){this.$emit("deny")}.bind(this),onHidden:function(){this.$emit("update:show",!1)}.bind(this),onVisible:function(){this.focusTrap.activate(),this.focusTrap.unpause()}.bind(this)})}},watch:{show:{handler:function(t){t?(this.initModal(),this.$emit("show"),this.control.modal("show"),this.focusTrap.activate(),this.focusTrap.unpause()):this.control&&(this.$emit("hide"),this.control.modal("hide"),this.control.remove(),this.focusTrap.deactivate(),this.focusTrap.pause())}}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["default"]=v.exports},4073:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[t.isLoading?n("div",{staticClass:"ui vertical segment"},[n("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[n("section",{directives:[{name:"title",rawName:"v-title",value:t.object.name,expression:"object.name"}],class:["ui","head","vertical","stripe","segment"]},[n("div",{staticClass:"ui stackable one column grid"},[n("div",{staticClass:"ui column"},[n("div",{staticClass:"segment-content"},[n("h2",{staticClass:"ui header"},[t.object.cover&&t.object.cover.urls.medium_square_crop?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.object.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](object.cover.urls.medium_square_crop)"}],attrs:{alt:""}}):n("img",{attrs:{alt:"",src:a("271e")}}),n("div",{staticClass:"content"},[t._v(" "+t._s(t._f("truncate")(t.object.name,100))+" "),n("div",{staticClass:"sub header"},[t.object.is_local?[n("span",{staticClass:"ui tiny accent label"},[n("i",{staticClass:"home icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1)]:t._e()],2)])]),t.object.tags&&t.object.tags.length>0?[n("tags-list",{attrs:{limit:5,"detail-route":"manage.library.tags.detail",tags:t.object.tags}}),n("div",{staticClass:"ui hidden divider"})]:t._e(),n("div",{staticClass:"header-buttons"},[n("div",{staticClass:"ui icon buttons"},[n("router-link",{staticClass:"ui labeled icon button",attrs:{to:{name:"library.artists.detail",params:{id:t.object.id}}}},[n("i",{staticClass:"info icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open local profile")])],1),n("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[n("i",{staticClass:"dropdown icon"}),n("div",{staticClass:"menu"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?n("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/artist/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"wrench icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),t.object.mbid?n("a",{staticClass:"basic item",attrs:{href:"https://musicbrainz.org/artist/"+t.object.mbid,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"external icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open on MusicBrainz")])],1):t._e(),t.object.is_local?t._e():n("fetch-button",{staticClass:"basic item",attrs:{url:"artists/"+t.object.id+"/fetches/"},on:{refresh:t.fetchData}},[n("i",{staticClass:"refresh icon"}),t._v(" "),n("translate",{attrs:{"translate-context":"Content/Moderation/Button/Verb"}},[t._v("Refresh from remote server")])],1),n("a",{staticClass:"basic item",attrs:{href:t.object.url||t.object.fid,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"external icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open remote profile")])],1)],1)])],1),n("div",{staticClass:"ui buttons"},[t.object.is_local?n("router-link",{staticClass:"ui labeled icon button",attrs:{to:{name:"library.artists.edit",params:{id:t.object.id}}}},[n("i",{staticClass:"edit icon"}),n("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1):t._e()],1),n("div",{staticClass:"ui buttons"},[n("dangerous-button",{class:["ui",{loading:t.isLoading},"basic danger button"],attrs:{action:t.remove}},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),n("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[n("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Delete this artist?")])],1),n("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[n("p",[n("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The artist will be removed, as well as associated uploads, tracks, albums, favorites and listening history. This action is irreversible.")])],1)]),n("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])],2)])])]),n("div",{staticClass:"ui vertical stripe segment"},[n("div",{staticClass:"ui stackable three column grid"},[n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"info icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Artist data")])],1)]),n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),n("td",[t._v(" "+t._s(t.object.name)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.artists",query:{q:t.getQuery("category",t.object.content_category)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1)],1),n("td",[t._v(" "+t._s(t.object.content_category)+" ")])]),t.object.is_local?t._e():n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.object.domain}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),n("td",[t._v(" "+t._s(t.object.domain)+" ")])]),t.object.description?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"'*/*/*/Noun"}},[t._v("Description")])],1),n("td",{domProps:{innerHTML:t._s(t.object.description.html)}})]):t._e()])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"feed icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),n("td",[n("human-date",{attrs:{date:t.object.creation_date}})],1)]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Listenings")])],1),n("td",[t._v(" "+t._s(t.stats.listenings)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Favorited tracks")])],1),n("td",[t._v(" "+t._s(t.stats.track_favorites)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Playlists")])],1),n("td",[t._v(" "+t._s(t.stats.playlists)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.reports.list",query:{q:t.getQuery("target","artist:"+t.object.id)}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Linked reports")])],1)],1),n("td",[t._v(" "+t._s(t.stats.reports)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.edits",query:{q:t.getQuery("target","artist "+t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/Admin/*/Noun"}},[t._v("Edits")])],1)],1),n("td",[t._v(" "+t._s(t.stats.mutations)+" ")])])])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"music icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_downloaded_size))+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Total size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_total_size))+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.libraries",query:{q:t.getQuery("artist_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Libraries")])],1)],1),n("td",[t._v(" "+t._s(t.stats.libraries)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("artist_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1)],1),n("td",[t._v(" "+t._s(t.stats.uploads)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.albums",query:{q:t.getQuery("artist_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1)],1),n("td",[t._v(" "+t._s(t.object.albums_count)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.tracks",query:{q:t.getQuery("artist_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1)],1),n("td",[t._v(" "+t._s(t.object.tracks_count)+" ")])])])])])])])])]:t._e()],2)},s=[],r=(a("99af"),a("bc3a")),i=a.n(r),o=(a("3677"),a("6b08")),l=a("9dcd"),c={props:["id"],components:{FetchButton:l["a"],TagsList:o["a"]},data:function(){return{isLoading:!0,isLoadingStats:!1,object:null,stats:null}},created:function(){this.fetchData(),this.fetchStats()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/library/artists/".concat(this.id,"/");i.a.get(e).then((function(e){e.data.channel?t.$router.push({name:"manage.channels.detail",params:{id:e.data.channel}}):(t.object=e.data,t.isLoading=!1)}))},fetchStats:function(){var t=this;this.isLoadingStats=!0;var e="manage/library/artists/".concat(this.id,"/stats/");i.a.get(e).then((function(e){t.stats=e.data,t.isLoadingStats=!1}))},remove:function(){var t=this;this.isLoading=!0;var e="manage/library/artists/".concat(this.id,"/");i.a.delete(e).then((function(e){t.$router.push({name:"manage.library.artists"})}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this object")}}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["default"]=v.exports},"471e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[t.isLoading?n("div",{staticClass:"ui vertical segment"},[n("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[n("section",{directives:[{name:"title",rawName:"v-title",value:t.object.title,expression:"object.title"}],class:["ui","head","vertical","stripe","segment"]},[n("div",{staticClass:"ui stackable one column grid"},[n("div",{staticClass:"ui column"},[n("div",{staticClass:"segment-content"},[n("h2",{staticClass:"ui header"},[t.object.cover.urls.original?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.object.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](object.cover.urls.medium_square_crop)"}],attrs:{alt:""}}):n("img",{attrs:{alt:"",src:a("271e")}}),n("div",{staticClass:"content"},[t._v(" "+t._s(t._f("truncate")(t.object.title,100))+" "),n("div",{staticClass:"sub header"},[t.object.is_local?[n("span",{staticClass:"ui tiny accent label"},[n("i",{staticClass:"home icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1)]:t._e()],2)])]),t.object.tags&&t.object.tags.length>0?[n("tags-list",{attrs:{limit:5,"detail-route":"manage.library.tags.detail",tags:t.object.tags}}),n("div",{staticClass:"ui hidden divider"})]:t._e(),n("div",{staticClass:"header-buttons"},[n("div",{staticClass:"ui icon buttons"},[n("router-link",{staticClass:"ui labeled icon button",attrs:{to:{name:"library.albums.detail",params:{id:t.object.id}}}},[n("i",{staticClass:"info icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open local profile")])],1),n("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[n("i",{staticClass:"dropdown icon"}),n("div",{staticClass:"menu"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?n("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/album/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"wrench icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),t.object.mbid?n("a",{staticClass:"basic item",attrs:{href:"https://musicbrainz.org/release/"+t.object.mbid,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"external icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open on MusicBrainz")])],1):t._e(),t.object.is_local?t._e():n("fetch-button",{staticClass:"basic item",attrs:{url:"albums/"+t.object.id+"/fetches/"},on:{refresh:t.fetchData}},[n("i",{staticClass:"refresh icon"}),t._v(" "),n("translate",{attrs:{"translate-context":"Content/Moderation/Button/Verb"}},[t._v("Refresh from remote server")])],1),n("a",{staticClass:"basic item",attrs:{href:t.object.url||t.object.fid,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"external icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open remote profile")])],1)],1)])],1),n("div",{staticClass:"ui buttons"},[t.object.is_local?n("router-link",{staticClass:"ui labeled icon button",attrs:{to:{name:"library.albums.edit",params:{id:t.object.id}}}},[n("i",{staticClass:"edit icon"}),n("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1):t._e()],1),n("div",{staticClass:"ui buttons"},[n("dangerous-button",{class:["ui",{loading:t.isLoading},"basic danger button"],attrs:{action:t.remove}},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),n("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[n("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Delete this album?")])],1),n("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[n("p",[n("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The album will be removed, as well as associated uploads, tracks, favorites and listening history. This action is irreversible.")])],1)]),n("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])],2)])])]),n("div",{staticClass:"ui vertical stripe segment"},[n("div",{staticClass:"ui stackable three column grid"},[n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"info icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Album data")])],1)]),n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Title")])],1),n("td",[t._v(" "+t._s(t.object.title)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.artists.detail",params:{id:t.object.artist.id}}}},[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artist")])],1)],1),n("td",[t._v(" "+t._s(t.object.artist.name)+" ")])]),t.object.is_local?t._e():n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.object.domain}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),n("td",[t._v(" "+t._s(t.object.domain)+" ")])]),t.object.description?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"'*/*/*/Noun"}},[t._v("Description")])],1),n("td",{domProps:{innerHTML:t._s(t.object.description.html)}})]):t._e()])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"feed icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),n("td",[n("human-date",{attrs:{date:t.object.creation_date}})],1)]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Listenings")])],1),n("td",[t._v(" "+t._s(t.stats.listenings)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Favorited tracks")])],1),n("td",[t._v(" "+t._s(t.stats.track_favorites)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Playlists")])],1),n("td",[t._v(" "+t._s(t.stats.playlists)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.reports.list",query:{q:t.getQuery("target","album:"+t.object.id)}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Linked reports")])],1)],1),n("td",[t._v(" "+t._s(t.stats.reports)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.edits",query:{q:t.getQuery("target","album "+t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/Admin/*/Noun"}},[t._v("Edits")])],1)],1),n("td",[t._v(" "+t._s(t.stats.mutations)+" ")])])])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"music icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_downloaded_size))+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Total size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_total_size))+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.libraries",query:{q:t.getQuery("album_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Libraries")])],1)],1),n("td",[t._v(" "+t._s(t.stats.libraries)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("album_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1)],1),n("td",[t._v(" "+t._s(t.stats.uploads)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.tracks",query:{q:t.getQuery("album_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1)],1),n("td",[t._v(" "+t._s(t.object.tracks_count)+" ")])])])])])])])])]:t._e()],2)},s=[],r=(a("99af"),a("bc3a")),i=a.n(r),o=(a("3677"),a("9dcd")),l=a("6b08"),c={props:["id"],components:{FetchButton:o["a"],TagsList:l["a"]},data:function(){return{isLoading:!0,isLoadingStats:!1,object:null,stats:null}},created:function(){this.fetchData(),this.fetchStats()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/library/albums/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))},fetchStats:function(){var t=this;this.isLoadingStats=!0;var e="manage/library/albums/".concat(this.id,"/stats/");i.a.get(e).then((function(e){t.stats=e.data,t.isLoadingStats=!1}))},remove:function(){var t=this;this.isLoading=!0;var e="manage/library/albums/".concat(this.id,"/");i.a.delete(e).then((function(e){t.$router.push({name:"manage.library.albums"})}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this object")}}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["default"]=v.exports},"4a11":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid report card"},[a("div",{staticClass:"content"},[a("h4",{staticClass:"header"},[a("router-link",{attrs:{to:{name:"manage.moderation.reports.detail",params:{id:t.obj.uuid}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Card/Short","translate-params":{id:t.obj.uuid.substring(0,8)}}},[t._v("Report %{ id }")])],1),a("collapse-link",{staticClass:"right floated",model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}})],1),a("div",{staticClass:"content"},[a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"column"},[a("table",{staticClass:"ui very basic unstackable table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/*"}},[t._v("Submitted by")])],1),a("td",[t.obj.submitter?a("div",[a("actor-link",{attrs:{admin:!0,actor:t.obj.submitter}})],1):a("div",[t._v(" "+t._s(t.obj.submitter_email)+" ")])])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1),a("td",[a("report-category-dropdown",{attrs:{value:t.obj.type},on:{input:function(e){return t.update({type:e})}}},[t._v(" "),a("action-feedback",{attrs:{"is-loading":t.updating.type}})],1)],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1),a("td",[a("human-date",{attrs:{date:t.obj.creation_date,icon:!0}})],1)])])])]),a("div",{staticClass:"column"},[a("table",{staticClass:"ui very basic unstackable table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),t.obj.is_handled?a("td",[t.obj.is_handled?a("span",[a("i",{staticClass:"success check icon"}),a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Resolved")])],1):t._e()]):a("td",[a("i",{staticClass:"danger x icon"}),a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Unresolved")])],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/*"}},[t._v("Assigned to")])],1),a("td",[t.obj.assigned_to?a("div",[a("actor-link",{attrs:{admin:!0,actor:t.obj.assigned_to}})],1):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Resolution date")])],1),a("td",[t.obj.handled_date?a("human-date",{attrs:{date:t.obj.handled_date,icon:!0}}):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Internal notes")])],1),a("td",[a("i",{staticClass:"comment icon"}),t._v(" "+t._s(t.obj.notes.length)+" ")])])])])])])])]),t.isCollapsed?t._e():a("div",{staticClass:"main content"},[a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"column"},[a("h3",[a("translate",{attrs:{"translate-context":"*/*/Field.Label/Noun"}},[t._v("Message")])],1),t.obj.summary?a("expandable-div",{staticClass:"summary",attrs:{content:t.obj.summary}},[a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(t.obj.summary))}})]):t._e()],1),a("aside",{staticClass:"column"},[a("h3",[a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Reported object")])],1),t.obj.target?t._e():a("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Message"}},[t._v("The object associated with this report was deleted.")])],1),t.target&&t.configs[t.target.type].urls.getDetail?a("router-link",{staticClass:"ui basic button",attrs:{to:t.configs[t.target.type].urls.getDetail(t.obj.target_state)}},[a("i",{staticClass:"eye icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link"}},[t._v("View public page")])],1):t._e(),t.target&&t.configs[t.target.type].urls.getAdminDetail?a("router-link",{staticClass:"ui basic button",attrs:{to:t.configs[t.target.type].urls.getAdminDetail(t.obj.target_state)}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link"}},[t._v("Open in moderation interface")])],1):t._e(),a("table",{staticClass:"ui very basic unstackable table"},[a("tbody",[t.target?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Track/Table.Label/Noun"}},[t._v("Type")])],1),a("td",{attrs:{colspan:"2"}},[a("i",{class:[t.configs[t.target.type].icon,"icon"]}),t._v(" "+t._s(t.configs[t.target.type].label)+" ")])]):t._e(),!t.obj.target_owner||t.target&&"account"===t.target.type?t._e():a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Owner")])],1),a("td",[a("actor-link",{attrs:{admin:!0,actor:t.obj.target_owner}})],1),a("td",[t.obj.target_owner.is_local?t._e():a("instance-policy-modal",{staticClass:"right floated mini basic",attrs:{type:"actor",target:t.obj.target_owner.full_username}})],1)]),t.target&&"account"===t.target.type?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Account")])],1),a("td",[a("actor-link",{attrs:{admin:!0,actor:t.obj.target_owner}})],1),a("td",[t.obj.target_owner.is_local?t._e():a("instance-policy-modal",{staticClass:"right floated mini basic",attrs:{type:"actor",target:t.obj.target_owner.full_username}})],1)]):t._e(),t.obj.target_state.is_local?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("td",{attrs:{colspan:"2"}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1)]):t.obj.target_state.domain?a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.obj.target_state.domain}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),a("td",[t._v(" "+t._s(t.obj.target_state.domain)+" ")]),a("td",[a("instance-policy-modal",{staticClass:"right floated mini basic",attrs:{type:"domain",target:t.obj.target_state.domain}})],1)]):t._e(),t._l(t.targetFields,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.label))]),e.repr?a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.repr))]):a("td",{attrs:{colspan:"2"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)])}))],2)])],1)]),a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"column"},[a("h3",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Internal notes")])],1),a("notes-thread",{attrs:{notes:t.obj.notes},on:{deleted:function(e){return t.handleRemovedNote(e)}}}),a("note-form",{attrs:{target:{type:"report",uuid:t.obj.uuid}},on:{created:function(e){return t.obj.notes.push(e)}}})],1),a("div",{staticClass:"column"},[a("h3",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Actions")])],1),a("div",{staticClass:"ui labelled icon basic buttons"},[!1===t.obj.is_handled?a("button",{class:["ui",{loading:t.isLoading},"button"],on:{click:function(e){return t.resolve(!0)}}},[a("i",{staticClass:"success check icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Resolve")])],1):t._e(),!0===t.obj.is_handled?a("button",{class:["ui",{loading:t.isLoading},"button"],on:{click:function(e){return t.resolve(!1)}}},[a("i",{staticClass:"warning redo icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"Content/*/Button.Label"}},[t._v("Unresolve")])],1):t._e(),t._l(t.actions,(function(e){return[e.dangerous&&e.show(t.obj)?a("dangerous-button",{class:["ui",{loading:t.isLoading},"button"],attrs:{action:e.handler}},[a("i",{class:[e.iconColor,e.icon,"icon"]}),t._v(" "+t._s(e.label)+" "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(e.modalHeader))]),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[t._v(t._s(e.modalContent))])]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v(t._s(e.modalConfirmLabel))])]):t._e()]}))],2)])])])])},s=[],r=(a("4de4"),a("d81d"),a("bc3a")),i=a.n(r),o=(a("bf68"),a("d453")),l=a("3dc7"),c=a("3b1b8"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"ui button",on:{click:function(e){e.preventDefault(),t.show=!t.show}}},[a("i",{staticClass:"shield icon"}),t._v(" "),t._t("default",[a("translate",{attrs:{"translate-context":"Content/Moderation/Button.Label"}},[t._v("Moderation rules…")])]),a("modal",{attrs:{show:t.show},on:{"update:show":function(e){t.show=e},show:t.fetchData}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-params":{obj:t.target},"translate-context":"Popup/Moderation/Title/Verb"}},[t._v("Manage moderation rules for %{ obj }")])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[t.isLoading?a("div",{staticClass:"ui active loader"}):t.obj&&!t.showForm?a("instance-policy-card",{attrs:{object:t.obj},on:{update:function(e){t.showForm=!0}}},[a("header",{staticClass:"ui header"},[a("h3",[a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Title"}},[t._v("This entity is subject to specific moderation rules")])],1)])]):a("instance-policy-form",{attrs:{object:t.obj,type:t.type,target:t.target},on:{cancel:function(e){t.showForm=!1},save:function(e){t.showForm=!1,t.result={count:1,results:[e]}},delete:function(e){t.result={count:0,results:[]},t.showForm=!1}}})],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui hidden divider"})]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Close")])],1)])])],2)},u=[],v=(a("ac1f"),a("1276"),a("807a")),p=a("67c7"),m=a("404d"),h={props:{target:{required:!0},type:{required:!0}},components:{InstancePolicyForm:v["a"],InstancePolicyCard:p["a"],Modal:m["default"]},data:function(){return{show:!1,isLoading:!1,errors:[],showForm:!1,result:null}},computed:{obj:function(){return this.result?this.result.results[0]:null}},methods:{fetchData:function(){var t={};if("domain"===this.type&&(t.target_domain=this.target),"actor"===this.type){var e=this.target.split("@");t.target_account_username=e[0],t.target_account_domain=e[1]}var a=this;a.isLoading=!0,i.a.get("/manage/moderation/instance-policies/",{params:t}).then((function(t){a.result=t.data,a.isLoading=!1}),(function(t){a.isLoading=!1,a.errors=t.backendErrors}))}}},b=h,g=a("2877"),f=Object(g["a"])(b,d,u,!1,null,null,null),_=f.exports;a("99af"),a("4160"),a("a15b"),a("fb6a"),a("4e82"),a("b0c0"),a("159b");function C(t){return t?t.slice().sort().join("\n"):""}var y={getConfigs:function(){return{artist:{label:this.$pgettext("*/*/*/Noun","Artist"),icon:"users",getDeleteUrl:function(t){return"manage/library/artists/".concat(t.id,"/")},urls:{getDetail:function(t){return{name:"library.artists.detail",params:{id:t.id}}},getAdminDetail:function(t){return{name:"manage.library.artists.detail",params:{id:t.id}}}},moderatedFields:[{id:"name",label:this.$pgettext("*/*/*/Noun","Name"),getValue:function(t){return t.name}},{id:"creation_date",label:this.$pgettext("Content/*/*/Noun","Creation date"),getValue:function(t){return t.creation_date}},{id:"tags",type:"tags",label:this.$pgettext("*/*/*/Noun","Tags"),getValue:function(t){return t.tags},getValueRepr:C},{id:"mbid",label:this.$pgettext("*/*/*/Noun","MusicBrainz ID"),getValue:function(t){return t.mbid}}]},album:{label:this.$pgettext("*/*/*","Album"),icon:"play",getDeleteUrl:function(t){return"manage/library/albums/".concat(t.id,"/")},urls:{getDetail:function(t){return{name:"library.albums.detail",params:{id:t.id}}},getAdminDetail:function(t){return{name:"manage.library.albums.detail",params:{id:t.id}}}},moderatedFields:[{id:"title",label:this.$pgettext("*/*/*/Noun","Title"),getValue:function(t){return t.title}},{id:"creation_date",label:this.$pgettext("Content/*/*/Noun","Creation date"),getValue:function(t){return t.creation_date}},{id:"release_date",label:this.$pgettext("Content/*/*/Noun","Release date"),getValue:function(t){return t.release_date}},{id:"tags",type:"tags",required:!0,label:this.$pgettext("*/*/*/Noun","Tags"),getValue:function(t){return t.tags},getValueRepr:C},{id:"mbid",label:this.$pgettext("*/*/*/Noun","MusicBrainz ID"),getValue:function(t){return t.mbid}}]},track:{label:this.$pgettext("*/*/*/Noun","Track"),icon:"music",getDeleteUrl:function(t){return"manage/library/tracks/".concat(t.id,"/")},urls:{getDetail:function(t){return{name:"library.tracks.detail",params:{id:t.id}}},getAdminDetail:function(t){return{name:"manage.library.tracks.detail",params:{id:t.id}}}},moderatedFields:[{id:"title",label:this.$pgettext("*/*/*/Noun","Title"),getValue:function(t){return t.title}},{id:"position",label:this.$pgettext("*/*/*/Short, Noun","Position"),getValue:function(t){return t.position}},{id:"copyright",label:this.$pgettext("Content/Track/*/Noun","Copyright"),getValue:function(t){return t.copyright}},{id:"license",label:this.$pgettext("Content/*/*/Noun","License"),getValue:function(t){return t.license}},{id:"tags",label:this.$pgettext("*/*/*/Noun","Tags"),getValue:function(t){return t.tags},getValueRepr:C},{id:"mbid",label:this.$pgettext("*/*/*/Noun","MusicBrainz ID"),getValue:function(t){return t.mbid}}]},library:{label:this.$pgettext("*/*/*/Noun","Library"),icon:"book",getDeleteUrl:function(t){return"manage/library/libraries/".concat(t.uuid,"/")},urls:{getAdminDetail:function(t){return{name:"manage.library.libraries.detail",params:{id:t.uuid}}}},moderatedFields:[{id:"name",label:this.$pgettext("*/*/*/Noun","Name"),getValue:function(t){return t.name}},{id:"description",label:this.$pgettext("*/*/*/Noun","Description"),getValue:function(t){return t.position}},{id:"privacy_level",label:this.$pgettext("*/*/*","Visibility"),getValue:function(t){return t.privacy_level}}]},playlist:{label:this.$pgettext("*/*/*","Playlist"),icon:"list",urls:{getDetail:function(t){return{name:"library.playlists.detail",params:{id:t.id}}}},moderatedFields:[{id:"name",label:this.$pgettext("*/*/*/Noun","Name"),getValue:function(t){return t.name}},{id:"privacy_level",label:this.$pgettext("*/*/*","Visibility"),getValue:function(t){return t.privacy_level}}]},account:{label:this.$pgettext("*/*/*/Noun","Account"),icon:"user",urls:{getDetail:function(t){return{name:"profile.full.overview",params:{username:t.preferred_username,domain:t.domain}}},getAdminDetail:function(t){return{name:"manage.moderation.accounts.detail",params:{id:"".concat(t.preferred_username,"@").concat(t.domain)}}}},moderatedFields:[{id:"name",label:this.$pgettext("*/*/*/Noun","Name"),getValue:function(t){return t.name}},{id:"summary",label:this.$pgettext("*/*/*/Noun","Bio"),getValue:function(t){return t.summary}}]},channel:{label:this.$pgettext("*/*/*","Channel"),icon:"stream",urls:{getDetail:function(t){return{name:"channels.detail",params:{id:t.uuid}}},getAdminDetail:function(t){return{name:"manage.channels.detail",params:{id:t.uuid}}}},moderatedFields:[{id:"name",label:this.$pgettext("*/*/*/Noun","Name"),getValue:function(t){return t.name}},{id:"creation_date",label:this.$pgettext("Content/*/*/Noun","Creation date"),getValue:function(t){return t.creation_date}},{id:"tags",type:"tags",label:this.$pgettext("*/*/*/Noun","Tags"),getValue:function(t){return t.tags},getValueRepr:C}]}}},getConfig:function(){return this.configs[this.objectType]},getFieldConfig:function(t,e,a){var n=t[e];return n.fields.filter((function(t){return t.id==a}))[0]},getCurrentStateForObj:function(t,e){var a={};return e.fields.forEach((function(e){a[e.id]={value:e.getValue(t)}})),a}},x=a("025e"),j=a("339e"),w=a.n(j);function k(t){return null===t||void 0===t?"":String(t)}var L={props:{obj:{required:!0},currentState:{required:!1}},components:{NoteForm:o["a"],NotesThread:l["a"],ReportCategoryDropdown:c["default"],InstancePolicyModal:_},data:function(){return{markdown:new w.a.Converter,isLoading:!1,isCollapsed:!1,updating:{type:!1}}},computed:{configs:y.getConfigs,previousState:function(){return this.obj.is_applied?this.obj.previous_state:this.currentState},detailUrl:function(){if(!this.target)return"";var t,e=this.target.id;return"track"===this.target.type&&(t="library.tracks.edit.detail"),"album"===this.target.type&&(t="library.albums.edit.detail"),"artist"===this.target.type&&(t="library.artists.edit.detail"),this.$router.resolve({name:t,params:{id:e,editId:this.obj.uuid}}).href},targetFields:function(){if(!this.target)return[];var t=this.obj.target_state,e=this.configs[this.target.type].moderatedFields;return e.map((function(e){var a=function(t){return t},n=e.getValueRepr||a,s={id:e.id,label:e.label,value:t[e.id],repr:k(n(t[e.id]))};return s}))},target:function(){return this.obj.target?this.obj.target:this.obj.target_state._target},actions:function(){if(!this.target)return[];var t=this,e=[],a=this.configs[this.target.type];if(a.getDeleteUrl){var n=a.getDeleteUrl(this.target);e.push({label:this.$pgettext("Content/Moderation/Button/Verb","Delete reported object"),modalHeader:this.$pgettext("Content/Moderation/Popup/Header","Delete reported object?"),modalContent:this.$pgettext("Content/Moderation/Popup,Paragraph","This will delete the object associated with this report and mark the report as resolved. The deletion is irreversible."),modalConfirmLabel:this.$pgettext("*/*/*/Verb","Delete"),icon:"x",iconColor:"danger",show:function(t){return!!t.target},dangerous:!0,handler:function(){i.a.delete(n).then((function(e){console.log("Target deleted"),t.obj.target=null,t.resolve(!0)}),(function(t){console.log("Error while deleting target")}))}})}return e}},methods:{update:function(t){var e="manage/moderation/reports/".concat(this.obj.uuid,"/"),a=this;this.isLoading=!0,Object(x["e"])(t,this.updating,!0),i.a.patch(e,t).then((function(e){a.$emit("updated",t),Object.assign(a.obj,t),a.isLoading=!1,Object(x["e"])(t,a.updating,!1)}),(function(e){a.isLoading=!1,Object(x["e"])(t,a.updating,!1)}))},resolve:function(t){var e="manage/moderation/reports/".concat(this.obj.uuid,"/"),a=this;this.isLoading=!0,i.a.patch(e,{is_handled:t}).then((function(e){var n;a.$emit("handled",t),a.isLoading=!1,a.obj.is_handled=t,t?(a.isCollapsed=!0,n=-1):n=1,a.$store.commit("ui/incrementNotifications",{count:n,type:"pendingReviewReports"})}),(function(t){a.isLoading=!1}))},handleRemovedNote:function(t){this.obj.notes=this.obj.notes.filter((function(e){return e.uuid!=t}))}}},D=L,N=Object(g["a"])(D,n,s,!1,null,null,null);e["a"]=N.exports},"53a8":function(t,e){t.exports=n;var a=Object.prototype.hasOwnProperty;function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var s in n)a.call(n,s)&&(t[s]=n[s])}return t}},"5b8f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[t.isLoading?n("div",{staticClass:"ui vertical segment"},[n("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[n("section",{directives:[{name:"title",rawName:"v-title",value:t.object.artist.name,expression:"object.artist.name"}],class:["ui","head","vertical","stripe","segment"]},[n("div",{staticClass:"ui stackable one column grid"},[n("div",{staticClass:"ui column"},[n("div",{staticClass:"segment-content"},[n("h2",{staticClass:"ui header"},[t.object.artist.cover&&t.object.artist.cover.urls.medium_square_crop?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.object.artist.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](object.artist.cover.urls.medium_square_crop)"}],attrs:{alt:""}}):n("img",{attrs:{alt:"",src:a("271e")}}),n("div",{staticClass:"content"},[t._v(" "+t._s(t._f("truncate")(t.object.artist.name,100))+" "),n("div",{staticClass:"sub header"},[t.object.artist.is_local?[n("span",{staticClass:"ui tiny accent label"},[n("i",{staticClass:"home icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1)]:t._e()],2)])]),t.object.artist.tags&&t.object.artist.tags.length>0?[n("tags-list",{attrs:{limit:5,"detail-route":"manage.library.tags.detail",tags:t.object.artist.tags}}),n("div",{staticClass:"ui hidden divider"})]:t._e(),n("div",{staticClass:"header-buttons"},[n("div",{staticClass:"ui icon buttons"},[n("router-link",{staticClass:"ui labeled icon button",attrs:{to:{name:"channels.detail",params:{id:t.object.uuid}}}},[n("i",{staticClass:"info icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open local profile")])],1),n("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[n("i",{staticClass:"dropdown icon"}),n("div",{staticClass:"menu"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?n("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/audio/channel/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"wrench icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),t.object.actor.is_local?t._e():n("fetch-button",{staticClass:"basic item",attrs:{url:"channels/"+t.object.uuid+"/fetches/"},on:{refresh:t.fetchData}},[n("i",{staticClass:"refresh icon"}),t._v(" "),n("translate",{attrs:{"translate-context":"Content/Moderation/Button/Verb"}},[t._v("Refresh from remote server")])],1),n("a",{staticClass:"basic item",attrs:{href:t.object.actor.url||t.object.actor.fid,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"external icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open remote profile")])],1)],1)])],1),n("div",{staticClass:"ui buttons"},[n("dangerous-button",{class:["ui",{loading:t.isLoading},"basic danger button"],attrs:{action:t.remove}},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),n("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[n("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Delete this channel?")])],1),n("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[n("p",[n("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The channel will be removed, as well as associated uploads, tracks, and albums. This action is irreversible.")])],1)]),n("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])],2)])])]),n("div",{staticClass:"ui vertical stripe segment"},[n("div",{staticClass:"ui stackable three column grid"},[n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"info icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Channel data")])],1)]),n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),n("td",[t._v(" "+t._s(t.object.artist.name)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.channels",query:{q:t.getQuery("category",t.object.artist.content_category)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1)],1),n("td",[t._v(" "+t._s(t.object.artist.content_category)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:t.object.attributed_to.full_username}}}},[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Account")])],1)],1),n("td",[t._v(" "+t._s(t.object.attributed_to.preferred_username)+" ")])]),t.object.actor.is_local?t._e():n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.object.actor.domain}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),n("td",[t._v(" "+t._s(t.object.actor.domain)+" ")])]),t.object.artist.description?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"'*/*/*/Noun"}},[t._v("Description")])],1),n("td",{domProps:{innerHTML:t._s(t.object.artist.description.html)}})]):t._e(),t.object.actor.url?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"'Content/*/*/Noun"}},[t._v("URL")])],1),n("td",[n("a",{attrs:{href:t.object.actor.url,rel:"noreferrer noopener",target:"_blank"}},[t._v(t._s(t.object.actor.url))])])]):t._e(),t.object.rss_url?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"'*/*/*"}},[t._v("RSS Feed")])],1),n("td",[n("a",{attrs:{href:t.object.rss_url,rel:"noreferrer noopener",target:"_blank"}},[t._v(t._s(t.object.rss_url))])])]):t._e()])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"feed icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),n("td",[n("human-date",{attrs:{date:t.object.creation_date}})],1)]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Listenings")])],1),n("td",[t._v(" "+t._s(t.stats.listenings)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Favorited tracks")])],1),n("td",[t._v(" "+t._s(t.stats.track_favorites)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Playlists")])],1),n("td",[t._v(" "+t._s(t.stats.playlists)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.reports.list",query:{q:t.getQuery("target","channel:"+t.object.uuid)}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Linked reports")])],1)],1),n("td",[t._v(" "+t._s(t.stats.reports)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.edits",query:{q:t.getQuery("target","artist "+t.object.artist.id)}}}},[n("translate",{attrs:{"translate-context":"*/Admin/*/Noun"}},[t._v("Edits")])],1)],1),n("td",[t._v(" "+t._s(t.stats.mutations)+" ")])])])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"music icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_downloaded_size))+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Total size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_total_size))+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("channel_id",t.object.uuid)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1)],1),n("td",[t._v(" "+t._s(t.stats.uploads)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.albums",query:{q:t.getQuery("channel_id",t.object.uuid)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1)],1),n("td",[t._v(" "+t._s(t.object.artist.albums_count)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.tracks",query:{q:t.getQuery("channel_id",t.object.uuid)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1)],1),n("td",[t._v(" "+t._s(t.object.artist.tracks_count)+" ")])])])])])])])])]:t._e()],2)},s=[],r=(a("99af"),a("bc3a")),i=a.n(r),o=(a("3677"),a("6b08")),l=a("9dcd"),c={props:["id"],components:{FetchButton:l["a"],TagsList:o["a"]},data:function(){return{isLoading:!0,isLoadingStats:!1,object:null,stats:null}},created:function(){this.fetchData(),this.fetchStats()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/channels/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))},fetchStats:function(){var t=this;this.isLoadingStats=!0;var e="manage/channels/".concat(this.id,"/stats/");i.a.get(e).then((function(e){t.stats=e.data,t.isLoadingStats=!1}))},remove:function(){var t=this;this.isLoading=!0;var e="manage/channels/".concat(this.id,"/");i.a.delete(e).then((function(e){t.$router.push({name:"manage.channels"})}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this object")}}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["default"]=v.exports},"5ec6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.accounts,expression:"labels.accounts"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"*/Moderation/Title"}},[t._v("Accounts")])],1),a("div",{staticClass:"ui hidden divider"}),a("accounts-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"accounts-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"accounts-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"accounts-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"accounts-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"accounts-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"accounts-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/accounts/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:e.obj.full_username}}}},[t._v(t._s(e.obj.preferred_username))])],1),a("td",[e.obj.user?a("a",{staticClass:"ui tiny accent icon link label",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local account")])],1):[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.domain}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.domain},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[t._v(t._s(e.obj.domain))])]],2),a("td",[t._v(" "+t._s(e.obj.uploads_count)+" ")]),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1),a("td",[e.obj.last_fetch_date?a("human-date",{attrs:{date:e.obj.last_fetch_date}}):t._e()],1),a("td",[e.obj.instance_policy?a("span",[a("i",{staticClass:"shield icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Yes")])],1):t._e()])]}}],null,!1,90297185)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Last seen")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short"}},[t._v("Under moderation rule")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","first_seen"],["last_fetch_date","last_seen"],["preferred_username","username"],["domain","domain"],["uploads_count","uploads"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/accounts/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by domain, username, bio…")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){return[{name:"purge",label:this.$pgettext("*/*/*/Verb","Purge"),isDangerous:!0}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},f=g,_=a("2877"),C=Object(_["a"])(f,r,i,!1,null,null,null),y=C.exports,x={components:{AccountsTable:y},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{accounts:this.$pgettext("*/Moderation/Title","Accounts")}}}},j=x,w=Object(_["a"])(j,n,s,!1,null,null,null);e["default"]=w.exports},"636a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid user-request card"},[a("div",{staticClass:"content"},[a("h4",{staticClass:"header"},[a("router-link",{attrs:{to:{name:"manage.moderation.requests.detail",params:{id:t.obj.uuid}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Card/Short","translate-params":{id:t.obj.uuid.substring(0,8)}}},[t._v("Request %{ id }")])],1),a("collapse-link",{staticClass:"right floated",model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}})],1),a("div",{staticClass:"content"},[a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"column"},[a("table",{staticClass:"ui very basic unstackable table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/*"}},[t._v("Submitted by")])],1),a("td",[a("actor-link",{attrs:{admin:!0,actor:t.obj.submitter}})],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1),a("td",[a("human-date",{attrs:{date:t.obj.creation_date,icon:!0}})],1)])])])]),a("div",{staticClass:"column"},[a("table",{staticClass:"ui very basic unstackable table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),a("td",["pending"===t.obj.status?[a("i",{staticClass:"warning hourglass icon"}),a("translate",{attrs:{"translate-context":"Content/Library/*/Short"}},[t._v("Pending")])]:"refused"===t.obj.status?[a("i",{staticClass:"danger x icon"}),a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Refused")])]:"approved"===t.obj.status?[a("i",{staticClass:"success check icon"}),a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Approved")])]:t._e()],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/*"}},[t._v("Assigned to")])],1),a("td",[t.obj.assigned_to?a("div",[a("actor-link",{attrs:{admin:!0,actor:t.obj.assigned_to}})],1):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Resolution date")])],1),a("td",[t.obj.handled_date?a("human-date",{attrs:{date:t.obj.handled_date,icon:!0}}):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Internal notes")])],1),a("td",[a("i",{staticClass:"comment icon"}),t._v(" "+t._s(t.obj.notes.length)+" ")])])])])])])])]),t.isCollapsed?t._e():a("div",{staticClass:"main content"},[a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"column"},[a("h3",[a("translate",{attrs:{"translate-context":"*/*/Field.Label/Noun"}},[t._v("Message")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("This user wants to sign-up on your pod.")])],1),t.obj.metadata?[a("div",{staticClass:"ui hidden divider"}),t._l(Object.keys(t.obj.metadata),(function(e){return a("div",{key:e},[a("h4",[t._v(t._s(e))]),t.obj.metadata[e]&&t.obj.metadata[e].length?a("p",[t._v(t._s(t.obj.metadata[e]))]):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")]),a("div",{staticClass:"ui hidden divider"})],1)}))]:t._e()],2),a("aside",{staticClass:"column"},["approved"!=t.obj.status?a("div",[a("h3",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Actions")])],1),a("div",{staticClass:"ui labelled icon basic buttons"},["pending"===t.obj.status||"refused"===t.obj.status?a("button",{class:["ui",{loading:t.isLoading},"button"],on:{click:function(e){return t.approve(!0)}}},[a("i",{staticClass:"success check icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Approve")])],1):t._e(),"pending"===t.obj.status?a("button",{class:["ui",{loading:t.isLoading},"button"],on:{click:function(e){return t.approve(!1)}}},[a("i",{staticClass:"danger x icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"Content/*/Button.Label"}},[t._v("Refuse")])],1):t._e()])]):t._e(),a("h3",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Internal notes")])],1),a("notes-thread",{attrs:{notes:t.obj.notes},on:{deleted:function(e){return t.handleRemovedNote(e)}}}),a("note-form",{attrs:{target:{type:"request",uuid:t.obj.uuid}},on:{created:function(e){return t.obj.notes.push(e)}}})],1)])])])},s=[],r=(a("4de4"),a("bc3a")),i=a.n(r),o=a("d453"),l=a("3dc7"),c=(a("025e"),a("339e")),d=a.n(c),u={props:{obj:{required:!0}},components:{NoteForm:o["a"],NotesThread:l["a"]},data:function(){return{markdown:new d.a.Converter,isLoading:!1,isCollapsed:!1}},methods:{approve:function(t){var e="manage/moderation/requests/".concat(this.obj.uuid,"/"),a=this,n=t?"approved":"refused";this.isLoading=!0,i.a.patch(e,{status:n}).then((function(e){a.$emit("handled",n),a.isLoading=!1,a.obj.status=n,t&&(a.isCollapsed=!0),a.$store.commit("ui/incrementNotifications",{count:-1,type:"pendingReviewRequests"})}),(function(t){a.isLoading=!1}))},handleRemovedNote:function(t){this.obj.notes=this.obj.notes.filter((function(e){return e.uuid!=t}))}}},v=u,p=a("2877"),m=Object(p["a"])(v,n,s,!1,null,null,null);e["a"]=m.exports},"64c4":function(t,e,a){"use strict";var n,s,r={computed:{sharedLabels:function(){return{fields:{privacy_level:{label:this.$pgettext("Content/Settings/Dropdown.Label/Noun","Activity visibility"),help:this.$pgettext("Content/Settings/Dropdown.Help text","Determine the visibility level of your activity"),choices:{me:this.$pgettext("Content/Settings/Dropdown","Nobody except me"),instance:this.$pgettext("Content/Settings/Dropdown","Everyone on this instance"),everyone:this.$pgettext("Content/Settings/Dropdown","Everyone, across all instances")},shortChoices:{me:this.$pgettext("Content/Settings/Dropdown/Short","Private"),instance:this.$pgettext("Content/Settings/Dropdown/Short","Instance"),everyone:this.$pgettext("Content/Settings/Dropdown/Short","Everyone")}},import_status:{detailTitle:this.$pgettext("Content/Library/Link.Title","Click to display more information about the import process for this upload"),choices:{skipped:{label:this.$pgettext("Content/Library/*","Skipped"),help:this.$pgettext("Content/Library/Help text","This track is already present in one of your libraries")},draft:{label:this.$pgettext("Content/Library/*/Short","Draft"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been scheduled for processing yet")},pending:{label:this.$pgettext("Content/Library/*/Short","Pending"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been processed by the server yet")},errored:{label:this.$pgettext("Content/Library/Table/Short","Errored"),help:this.$pgettext("Content/Library/Help text","This track could not be processed, please make sure it is tagged correctly")},finished:{label:this.$pgettext("Content/Library/*","Finished"),help:this.$pgettext("Content/Library/Help text","Imported")}}},report_type:{label:this.$pgettext("*/*/*","Category"),choices:{takedown_request:this.$pgettext("Content/Moderation/Dropdown","Takedown request"),invalid_metadata:this.$pgettext("Popup/Import/Error.Label","Invalid metadata"),illegal_content:this.$pgettext("Content/Moderation/Dropdown","Illegal content"),offensive_content:this.$pgettext("Content/Moderation/Dropdown","Offensive content"),other:this.$pgettext("Content/Moderation/Dropdown","Other")}},summary:{label:this.$pgettext("Content/Account/*","Bio")},content_category:{label:this.$pgettext("Content/*/Dropdown.Label/Noun","Content category"),choices:{podcast:this.$pgettext("Content/*/Dropdown","Podcast"),music:this.$pgettext("*/*/*","Music"),other:this.$pgettext("*/*/*","Other")}}},filters:{creation_date:this.$pgettext("Content/*/*/Noun","Creation date"),release_date:this.$pgettext("Content/*/*/Noun","Release date"),accessed_date:this.$pgettext("Content/*/*/Noun","Accessed date"),first_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","First seen date"),last_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","Last seen date"),modification_date:this.$pgettext("Content/Playlist/Dropdown/Noun","Modification date"),expiration_date:this.$pgettext("Content/Admin/Table.Label/Noun","Expiration date"),track_title:this.$pgettext("Content/*/Dropdown/Noun","Track name"),album_title:this.$pgettext("Content/*/Dropdown/Noun","Album name"),artist_name:this.$pgettext("Content/*/Dropdown/Noun","Artist name"),name:this.$pgettext("*/*/*/Noun","Name"),length:this.$pgettext("*/*/*/Noun","Length"),items_count:this.$pgettext("*/*/*/Noun","Items"),size:this.$pgettext("Content/*/*/Noun","Size"),bitrate:this.$pgettext("Content/Track/*/Noun","Bitrate"),duration:this.$pgettext("Content/*/*","Duration"),date_joined:this.$pgettext("Content/Admin/Table.Label/Noun","Sign-up date"),last_activity:this.$pgettext("Content/Profile/Table.Label/Short, Noun (Value is a date)","Last activity"),username:this.$pgettext("Content/*/*","Username"),domain:this.$pgettext("Content/Moderation/*/Noun","Domain"),users:this.$pgettext("*/*/*/Noun","Users"),received_messages:this.$pgettext("Content/Moderation/*/Noun","Received messages"),uploads:this.$pgettext("*/*/*","Uploads"),followers:this.$pgettext("Content/Federation/*/Noun","Followers")},scopes:{profile:{label:this.$pgettext("Content/OAuth Scopes/Label","Profile"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to email, username, and profile information")},libraries:{label:this.$pgettext("Content/OAuth Scopes/Label","Libraries and uploads"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to audio files, libraries, artists, albums and tracks")},favorites:{label:this.$pgettext("Sidebar/Favorites/List item.Link/Noun","Favorites"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to favorites")},listenings:{label:this.$pgettext("*/*/*/Noun","Listenings"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to listening history")},follows:{label:this.$pgettext("Content/OAuth Scopes/Label","Follows"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to follows")},playlists:{label:this.$pgettext("*/*/*","Playlists"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to playlists")},radios:{label:this.$pgettext("*/*/*","Radios"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to radios")},filters:{label:this.$pgettext("Content/Settings/Title/Noun","Content filters"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to content filters")},notifications:{label:this.$pgettext("*/Notifications/*","Notifications"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to notifications")},edits:{label:this.$pgettext("*/Admin/*/Noun","Edits"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to edits")},security:{label:this.$pgettext("*/Admin/*/Noun","Security"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to security settings such as password and authorization")},reports:{label:this.$pgettext("*/Moderation/*/Noun","Reports"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to moderation reports")}}}}}},i=r,o=a("2877"),l=Object(o["a"])(i,n,s,!1,null,null,null);e["a"]=l.exports},"67a2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.users,expression:"labels.users"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.users))]),a("div",{staticClass:"ui hidden divider"}),a("users-table")],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"users-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{id:"users-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"users-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"users-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"users-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Order")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"users-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/uploads/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[e.obj.actor?a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:e.obj.actor.full_username}}}},[t._v(t._s(e.obj.username))]):a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:e.obj.full_username}}}},[t._v(t._s(e.obj.username))])],1),a("td",[a("span",[t._v(t._s(e.obj.email))])]),a("td",[e.obj.is_active?a("span",{staticClass:"ui basic success label"},[a("translate",{attrs:{"translate-context":"Content/Admin/Table"}},[t._v("Active")])],1):a("span",{staticClass:"ui basic label"},[a("translate",{attrs:{"translate-context":"Content/Admin/Table"}},[t._v("Inactive")])],1)]),a("td",[a("human-date",{attrs:{date:e.obj.date_joined}})],1),a("td",[e.obj.last_activity?a("human-date",{attrs:{date:e.obj.last_activity}}):[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])]],2),a("td",[t._l(t.permissions,(function(n){return[e.obj.permissions[n.code]?a("span",{staticClass:"ui basic tiny label"},[t._v(t._s(n.label))]):t._e()]}))],2),a("td",[e.obj.is_superuser?a("span",{staticClass:"ui pink label"},[a("translate",{attrs:{"translate-context":"Content/Admin/Table.User role"}},[t._v("Admin")])],1):e.obj.is_staff?a("span",{staticClass:"ui purple label"},[a("translate",{attrs:{"translate-context":"Content/Profile/User role"}},[t._v("Staff member")])],1):a("span",{staticClass:"ui basic label"},[a("translate",{attrs:{"translate-context":"Content/Admin/Table, User role"}},[t._v("Regular user")])],1)])]}}],null,!1,997145135)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Username")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Email")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Admin/Table.Label/Short, Noun"}},[t._v("Account status")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Admin/Table.Label/Short, Noun (Value is a date)"}},[t._v("Sign-up")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Profile/Table.Label/Short, Noun (Value is a date)"}},[t._v("Last activity")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Permissions")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("1799"),v=a("414c"),p=a("20be"),m=a("64c4"),h={mixins:[p["a"],m["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:u["a"],ActionTable:v["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-date_joined");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:"",orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["date_joined","date_joined"],["last_activity","last_activity"],["username","username"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/users/users/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by username, e-mail address, name…")}},privacyLevels:function(){return{}},permissions:function(){return[{code:"library",label:this.$pgettext("*/*/*/Noun","Library")},{code:"moderation",label:this.$pgettext("*/Moderation/*","Moderation")},{code:"settings",label:this.$pgettext("*/*/*/Noun","Settings")}]},actionFilters:function(){var t={q:this.search};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){return[]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},b=h,g=a("2877"),f=Object(g["a"])(b,r,i,!1,null,null,null),_=f.exports,C={components:{UsersTable:_},computed:{labels:function(){return{users:this.$pgettext("*/*/*/Noun","Users")}}}},y=C,x=Object(g["a"])(y,n,s,!1,null,null,null);e["default"]=x.exports},"67c7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default"),a("p",[a("i",{staticClass:"clock outline icon"}),a("human-date",{attrs:{date:t.object.creation_date}}),t._v(" "),a("i",{staticClass:"user icon"}),t._v(t._s(t.object.actor)+" "),t.object.is_active?[a("i",{staticClass:"play icon"}),a("translate",{attrs:{"translate-context":"*/*/*/State of feature"}},[t._v("Enabled")])]:t._e(),t.object.is_active?t._e():[a("i",{staticClass:"pause icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Card.List item"}},[t._v("Paused")])]],2),a("div",[a("p",[a("strong",[a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Title/Noun"}},[t._v("Rule")])],1)]),t.object.block_all?a("p",[a("i",{staticClass:"ban icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Verb"}},[t._v("Block everything")])],1):a("div",{staticClass:"ui list"},[t.object.silence_activity?a("div",{staticClass:"ui item"},[a("i",{staticClass:"feed icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Verb"}},[t._v("Mute activity")])],1)]):t._e(),t.object.silence_notifications?a("div",{staticClass:"ui item"},[a("i",{staticClass:"bell icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Verb"}},[t._v("Mute notifications")])],1)]):t._e(),t.object.reject_media?a("div",{staticClass:"ui item"},[a("i",{staticClass:"file icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Verb"}},[t._v("Reject media")])],1)]):t._e()])]),t.markdown&&t.object.summary?a("div",[a("div",{staticClass:"ui hidden divider"}),a("p",[a("strong",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Reason")])],1)]),a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(t.object.summary))}})]):t._e(),a("div",{staticClass:"ui hidden divider"}),a("button",{staticClass:"ui right floated labeled icon button",on:{click:function(e){return t.$emit("update")}}},[a("i",{staticClass:"edit icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1)],2)},s=[],r=(a("d3b7"),{props:{object:{type:Object,default:null}},data:function(){return{markdown:null}},created:function(){var t=this;Promise.resolve().then(a.t.bind(null,"339e",7)).then((function(e){t.markdown=new e.default.Converter({simplifiedAutoLink:!0,openLinksInNewWindow:!0})}))}}),i=r,o=a("2877"),l=Object(o["a"])(i,n,s,!1,null,null,null);e["a"]=l.exports},"6b08":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"component-tags-list"},[t._l(t.toDisplay,(function(e){return a("router-link",{key:e,class:["ui","circular","hashtag","label",t.labelClasses],attrs:{to:{name:t.detailRoute,params:{id:e}}}},[t._v(" #"+t._s(t._f("truncate")(e,t.truncateSize))+" ")])})),t.showMore&&t.toDisplay.length<t.tags.length?a("div",{staticClass:"ui circular inverted accent label",attrs:{role:"button"},on:{click:function(e){e.preventDefault(),t.honorLimit=!1}}},[a("translate",{attrs:{"translate-context":"Content/*/Button/Label/Verb","translate-params":{count:t.tags.length-t.toDisplay.length},"translate-n":t.tags.length-t.toDisplay.length,"translate-plural":"Show %{ count } more tags"}},[t._v("Show 1 more tag")])],1):t._e()],2)},s=[],r=(a("fb6a"),a("a9e3"),{props:{tags:{type:Array,required:!0},showMore:{type:Boolean,default:!0},truncateSize:{type:Number,default:25},limit:{type:Number,default:5},labelClasses:{type:String,default:""},detailRoute:{type:String,default:"library.tags.detail"}},data:function(){return{honorLimit:!0}},computed:{toDisplay:function(){return this.honorLimit?(this.tags||[]).slice(0,this.limit):this.tags}}}),i=r,o=a("2877"),l=Object(o["a"])(i,n,s,!1,null,null,null);e["a"]=l.exports},"6c92":function(t,e,a){var n,s=a("0580"),r=a("53a8"),i=function(){var t=[];return{activateTrap:function(e){if(t.length>0){var a=t[t.length-1];a!==e&&a.pause()}var n=t.indexOf(e);-1===n||t.splice(n,1),t.push(e)},deactivateTrap:function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1),t.length>0&&t[t.length-1].unpause()}}}();function o(t,e){var a=document,o="string"===typeof t?a.querySelector(t):t,v=r({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),p={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},m={activate:h,deactivate:b,pause:g,unpause:f};return m;function h(t){if(!p.active){S(),p.active=!0,p.paused=!1,p.nodeFocusedBeforeActivation=a.activeElement;var e=t&&t.onActivate?t.onActivate:v.onActivate;return e&&e(),_(),m}}function b(t){if(p.active){clearTimeout(n),C(),p.active=!1,p.paused=!1,i.deactivateTrap(m);var e=t&&void 0!==t.onDeactivate?t.onDeactivate:v.onDeactivate;e&&e();var a=t&&void 0!==t.returnFocus?t.returnFocus:v.returnFocusOnDeactivate;return a&&u((function(){$(j(p.nodeFocusedBeforeActivation))})),m}}function g(){!p.paused&&p.active&&(p.paused=!0,C())}function f(){p.paused&&p.active&&(p.paused=!1,S(),_())}function _(){if(p.active)return i.activateTrap(m),n=u((function(){$(x())})),a.addEventListener("focusin",k,!0),a.addEventListener("mousedown",w,{capture:!0,passive:!1}),a.addEventListener("touchstart",w,{capture:!0,passive:!1}),a.addEventListener("click",N,{capture:!0,passive:!1}),a.addEventListener("keydown",L,{capture:!0,passive:!1}),m}function C(){if(p.active)return a.removeEventListener("focusin",k,!0),a.removeEventListener("mousedown",w,!0),a.removeEventListener("touchstart",w,!0),a.removeEventListener("click",N,!0),a.removeEventListener("keydown",L,!0),m}function y(t){var e=v[t],n=e;if(!e)return null;if("string"===typeof e&&(n=a.querySelector(e),!n))throw new Error("`"+t+"` refers to no known node");if("function"===typeof e&&(n=e(),!n))throw new Error("`"+t+"` did not return a node");return n}function x(){var t;if(t=null!==y("initialFocus")?y("initialFocus"):o.contains(a.activeElement)?a.activeElement:p.firstTabbableNode||y("fallbackFocus"),!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t}function j(t){var e=y("setReturnFocus");return e||t}function w(t){o.contains(t.target)||(v.clickOutsideDeactivates?b({returnFocus:!s.isFocusable(t.target)}):v.allowOutsideClick&&v.allowOutsideClick(t)||t.preventDefault())}function k(t){o.contains(t.target)||t.target instanceof Document||(t.stopImmediatePropagation(),$(p.mostRecentlyFocusedNode||x()))}function L(t){if(!1!==v.escapeDeactivates&&c(t))return t.preventDefault(),void b();d(t)&&D(t)}function D(t){return S(),t.shiftKey&&t.target===p.firstTabbableNode?(t.preventDefault(),void $(p.lastTabbableNode)):t.shiftKey||t.target!==p.lastTabbableNode?void 0:(t.preventDefault(),void $(p.firstTabbableNode))}function N(t){v.clickOutsideDeactivates||o.contains(t.target)||v.allowOutsideClick&&v.allowOutsideClick(t)||(t.preventDefault(),t.stopImmediatePropagation())}function S(){var t=s(o);p.firstTabbableNode=t[0]||x(),p.lastTabbableNode=t[t.length-1]||x()}function $(t){t!==a.activeElement&&(t&&t.focus?(t.focus(),p.mostRecentlyFocusedNode=t,l(t)&&t.select()):$(x()))}}function l(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"===typeof t.select}function c(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}function d(t){return"Tab"===t.key||9===t.keyCode}function u(t){return setTimeout(t,0)}t.exports=o},7156:function(t,e,a){var n=a("861d"),s=a("d2bb");t.exports=function(t,e,a){var r,i;return s&&"function"==typeof(r=e.constructor)&&r!==a&&n(i=r.prototype)&&i!==a.prototype&&s(t,i),t}},"723d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.object.name,expression:"object.name"}],class:["ui","head","vertical","stripe","segment"]},[a("div",{staticClass:"ui stackable one column grid"},[a("div",{staticClass:"ui column"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui header"},[a("i",{staticClass:"circular inverted book icon"}),a("div",{staticClass:"content"},[t._v(" "+t._s(t._f("truncate")(t.object.name,100))+" "),a("div",{staticClass:"sub header"},[t.object.is_local?[a("span",{staticClass:"ui tiny accent label"},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1)]:t._e()],2)])]),a("div",{staticClass:"header-buttons"},[a("div",{staticClass:"ui icon buttons"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"ui labeled icon button",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/library/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"menu"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/library/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),a("a",{staticClass:"basic item",attrs:{href:t.object.url||t.object.fid,target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open remote profile")])],1)])])]),a("div",{staticClass:"ui buttons"},[a("dangerous-button",{class:["ui",{loading:t.isLoading},"basic danger button"],attrs:{action:t.remove}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Delete this library?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The library will be removed, as well as associated uploads, and follows. This action is irreversible.")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])])])])]),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui stackable three column grid"},[a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"info icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Library data")])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("td",[t._v(" "+t._s(t.object.name)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.libraries",query:{q:t.getQuery("privacy_level",t.object.privacy_level)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Visibility")])],1)],1),a("td",[t.object.is_local?a("select",{directives:[{name:"dropdown",rawName:"v-dropdown"},{name:"model",rawName:"v-model",value:t.object.privacy_level,expression:"object.privacy_level"}],staticClass:"ui search selection dropdown",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.object,"privacy_level",e.target.multiple?a:a[0])},function(e){return t.updateObj("privacy_level")}]}},t._l(["me","instance","everyone"],(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices[e]))])})),0):[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices[t.object.privacy_level]))]],2)]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:t.object.actor.full_username}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Account")])],1)],1),a("td",[t._v(" "+t._s(t.object.actor.preferred_username)+" ")])]),t.object.is_local?t._e():a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.object.domain}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),a("td",[t._v(" "+t._s(t.object.domain)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Description")])],1),a("td",[t._v(" "+t._s(t.object.description)+" ")])])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"feed icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?a("div",{staticClass:"ui placeholder"},[a("div",{staticClass:"full line"}),a("div",{staticClass:"short line"}),a("div",{staticClass:"medium line"}),a("div",{staticClass:"long line"})]):a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),a("td",[a("human-date",{attrs:{date:t.object.creation_date}})],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Federation/*/Noun"}},[t._v("Followers")])],1),a("td",[t._v(" "+t._s(t.stats.followers)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.reports.list",query:{q:t.getQuery("target","library:"+t.object.uuid)}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Linked reports")])],1)],1),a("td",[t._v(" "+t._s(t.stats.reports)+" ")])])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"music icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?a("div",{staticClass:"ui placeholder"},[a("div",{staticClass:"full line"}),a("div",{staticClass:"short line"}),a("div",{staticClass:"medium line"}),a("div",{staticClass:"long line"})]):a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),a("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_downloaded_size))+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Total size")])],1),a("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_total_size))+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.artists",query:{q:t.getQuery("library_id",t.object.id)}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artists")])],1)],1),a("td",[t._v(" "+t._s(t.stats.artists)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.albums",query:{q:t.getQuery("library_id",t.object.id)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1)],1),a("td",[t._v(" "+t._s(t.stats.albums)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.tracks",query:{q:t.getQuery("library_id",t.object.id)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1)],1),a("td",[t._v(" "+t._s(t.stats.tracks)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("library_id",t.object.id)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1)],1),a("td",[t._v(" "+t._s(t.stats.uploads)+" ")])])])])])])])])]:t._e()],2)},s=[],r=(a("99af"),a("bc3a")),i=a.n(r),o=a("3677"),l=a("64c4"),c={props:["id"],mixins:[l["a"]],data:function(){return{isLoading:!0,isLoadingStats:!1,object:null,stats:null}},created:function(){this.fetchData(),this.fetchStats()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/library/libraries/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))},fetchStats:function(){var t=this;this.isLoadingStats=!0;var e="manage/library/libraries/".concat(this.id,"/stats/");i.a.get(e).then((function(e){t.stats=e.data,t.isLoadingStats=!1}))},remove:function(){var t=this;this.isLoading=!0;var e="manage/library/libraries/".concat(this.id,"/");i.a.delete(e).then((function(e){t.$router.push({name:"manage.library.libraries"})}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')},updateObj:function(t,e){var a=this.object[t];e&&!a&&(a=null);var n={};n[t]=a,i.a.patch("manage/library/libraries/".concat(this.id,"/"),n).then((function(e){o["a"].default.info("".concat(t," was updated succcessfully to ").concat(a))}),(function(e){o["a"].default.error("Error while setting ".concat(t," to ").concat(a),e)}))}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this object")}}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["default"]=v.exports},"7be3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.title))]),a("div",{staticClass:"ui hidden divider"}),a("uploads-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"uploads-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"uploads-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"uploads-visibility"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Visibility")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"uploads-visibility"},domProps:{value:t.getTokenValue("privacy_level","")},on:{change:function(e){return t.addSearchToken("privacy_level",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"me"}},[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices.me))]),a("option",{attrs:{value:"instance"}},[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices.instance))]),a("option",{attrs:{value:"everyone"}},[t._v(t._s(t.sharedLabels.fields.privacy_level.shortChoices.everyone))])])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"uploads-status"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Import status")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"uploads-status"},domProps:{value:t.getTokenValue("status","")},on:{change:function(e){return t.addSearchToken("status",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"pending"}},[a("translate",{attrs:{"translate-context":"Content/Library/*/Short"}},[t._v("Pending")])],1),a("option",{attrs:{value:"skipped"}},[a("translate",{attrs:{"translate-context":"Content/Library/*"}},[t._v("Skipped")])],1),a("option",{attrs:{value:"errored"}},[a("translate",{attrs:{"translate-context":"Content/Library/Dropdown"}},[t._v("Failed")])],1),a("option",{attrs:{value:"finished"}},[a("translate",{attrs:{"translate-context":"Content/Library/*"}},[t._v("Finished")])],1)])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"uploads-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"uploads-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"uploads-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"uploads-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("import-status-modal",{attrs:{upload:t.detailedUpload,show:t.showUploadDetailModal},on:{"update:show":function(e){t.showUploadDetailModal=e}}}),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/uploads/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.library.uploads.detail",params:{id:e.obj.uuid}}}},[t._v(" "+t._s(t._f("truncate")(t.displayName(e.obj),30,"…",!0))+" ")])],1),a("td",[a("router-link",{attrs:{to:{name:"manage.library.libraries.detail",params:{id:e.obj.library.uuid}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.library.name},on:{click:function(a){return a.preventDefault(),t.addSearchToken("library_id",e.obj.library.id)}}},[t._v(" "+t._s(t._f("truncate")(e.obj.library.name,20))+" ")])],1),a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:e.obj.library.actor.full_username}}}}),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.library.actor.full_username},on:{click:function(a){return a.preventDefault(),t.addSearchToken("account",e.obj.library.actor.full_username)}}},[t._v(t._s(e.obj.library.actor.preferred_username))])],1),a("td",[e.obj.is_local?a("a",{staticClass:"ui tiny accent icon link label",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1):[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.domain}}}},[a("i",{staticClass:"wrench icon"})]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.domain},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[t._v(t._s(e.obj.domain))])]],2),a("td",[a("a",{staticClass:"discrete link",attrs:{href:"",title:t.sharedLabels.fields.privacy_level.shortChoices[e.obj.library.privacy_level]},on:{click:function(a){return a.preventDefault(),t.addSearchToken("privacy_level",e.obj.library.privacy_level)}}},[t._v(" "+t._s(t.sharedLabels.fields.privacy_level.shortChoices[e.obj.library.privacy_level])+" ")])]),a("td",[a("a",{staticClass:"discrete link",attrs:{href:"",title:t.sharedLabels.fields.import_status.choices[e.obj.import_status].help},on:{click:function(a){return a.preventDefault(),t.addSearchToken("status",e.obj.import_status)}}},[t._v(" "+t._s(t.sharedLabels.fields.import_status.choices[e.obj.import_status].label)+" ")]),a("button",{staticClass:"ui tiny basic icon button",attrs:{title:t.sharedLabels.fields.import_status.detailTitle},on:{click:function(a){t.detailedUpload=e.obj,t.showUploadDetailModal=!0}}},[a("i",{staticClass:"question circle outline icon"})])]),a("td",[e.obj.size?a("span",[t._v(t._s(t._f("humanSize")(e.obj.size)))]):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1),a("td",[e.obj.accessed_date?a("human-date",{attrs:{date:e.obj.accessed_date}}):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]}}],null,!1,3161212998)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Library")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Account")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Visibility")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Import status")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Size")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Accessed date")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)],1)},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g=a("fe5e"),f={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"],ImportStatusModal:g["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{detailedUpload:null,showUploadDetailModal:!1,time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["modification_date","modification_date"],["accessed_date","accessed_date"],["size","size"],["bitrate","bitrate"],["duration","duration"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/library/uploads/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t},displayName:function(t){return t.filename?t.filename:t.source?t.source:t.uuid}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by domain, actor, name, reference, source…")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){var t=this.$pgettext("*/*/*/Verb","Delete"),e=this.$pgettext("Popup/*/Paragraph","The selected upload will be removed. This action is irreversible.");return[{name:"delete",label:t,confirmationMessage:e,isDangerous:!0,allowAll:!1,confirmColor:"danger"}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},_=f,C=a("2877"),y=Object(C["a"])(_,r,i,!1,null,null,null),x=y.exports,j={components:{UploadsTable:x},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{title:this.$pgettext("*/*/*","Uploads")}}}},w=j,k=Object(C["a"])(w,n,s,!1,null,null,null);e["default"]=k.exports},"807a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.createOrUpdate(e)}}},[a("h3",{staticClass:"ui header"},[t.object?a("translate",{key:"1",attrs:{"translate-context":"Content/Moderation/Card.Title/Verb"}},[t._v("Edit moderation rule")]):a("translate",{key:"2",attrs:{"translate-context":"Content/Moderation/Card.Button.Label/Verb"}},[t._v("Add a new moderation rule")])],1),t.errors&&t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Error message.Title"}},[t._v("Error while creating rule")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t.object?a("div",{staticClass:"field"},[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.isActive,expression:"current.isActive"}],attrs:{id:"policy-is-active",type:"checkbox"},domProps:{checked:Array.isArray(t.current.isActive)?t._i(t.current.isActive,null)>-1:t.current.isActive},on:{change:function(e){var a=t.current.isActive,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);n.checked?i<0&&t.$set(t.current,"isActive",a.concat([r])):i>-1&&t.$set(t.current,"isActive",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.current,"isActive",s)}}}),a("label",{attrs:{for:"policy-is-active"}},[t.current.isActive?a("translate",{key:"1",attrs:{"translate-context":"*/*/*/State of feature"}},[t._v("Enabled")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*/State of feature"}},[t._v("Disabled")]),a("tooltip",{attrs:{content:t.labels.isActiveHelp}})],1)])]):t._e(),a("div",{staticClass:"field"},[a("label",{attrs:{for:"policy-summary"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Reason")]),a("tooltip",{attrs:{content:t.labels.summaryHelp}})],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.summary,expression:"current.summary"}],attrs:{name:"policy-summary",id:"policy-summary",rows:"5"},domProps:{value:t.current.summary},on:{input:function(e){e.target.composing||t.$set(t.current,"summary",e.target.value)}}})]),a("div",{staticClass:"field"},[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.blockAll,expression:"current.blockAll"}],attrs:{id:"policy-is-active",type:"checkbox"},domProps:{checked:Array.isArray(t.current.blockAll)?t._i(t.current.blockAll,null)>-1:t.current.blockAll},on:{change:function(e){var a=t.current.blockAll,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);n.checked?i<0&&t.$set(t.current,"blockAll",a.concat([r])):i>-1&&t.$set(t.current,"blockAll",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.current,"blockAll",s)}}}),a("label",{attrs:{for:"policy-is-active"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Verb"}},[t._v("Block everything")]),a("tooltip",{attrs:{content:t.labels.blockAllHelp}})],1)])]),a("div",{staticClass:"ui horizontal divider"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Title"}},[t._v("Or customize your rule")])],1),t._l(t.fieldConfig,(function(e){return a("div",{class:["field"]},[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current[e.id],expression:"current[config.id]"}],attrs:{id:"policy-"+e.id,type:"checkbox"},domProps:{checked:Array.isArray(t.current[e.id])?t._i(t.current[e.id],null)>-1:t.current[e.id]},on:{change:function(a){var n=t.current[e.id],s=a.target,r=!!s.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);s.checked?o<0&&t.$set(t.current,e.id,n.concat([i])):o>-1&&t.$set(t.current,e.id,n.slice(0,o).concat(n.slice(o+1)))}else t.$set(t.current,e.id,r)}}}),a("label",{attrs:{for:"policy-"+e.id}},[a("i",{class:[e.icon,"icon"]}),t._v(" "+t._s(t.labels[e.id].label)+" "),a("tooltip",{attrs:{content:t.labels[e.id].help}})],1)])])})),a("div",{staticClass:"ui hidden divider"}),a("button",{staticClass:"ui basic left floated button",on:{click:function(e){return e.preventDefault(),t.$emit("cancel")}}},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1),a("button",{class:["ui","right","floated","success",{"disabled loading":t.isLoading},"button"],attrs:{disabled:t.isLoading}},[t.object?a("translate",{key:"1",attrs:{"translate-context":"Content/Moderation/Card.Button.Label/Verb"}},[t._v("Update")]):a("translate",{key:"2",attrs:{"translate-context":"Content/Moderation/Card.Button.Label/Verb"}},[t._v("Create")])],1),t.object?a("dangerous-button",{staticClass:"ui right floated basic danger button",on:{confirm:t.remove}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Moderation/Title"}},[t._v("Delete this moderation rule?")])],1),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("translate",{attrs:{"translate-context":"Popup/Moderation/Paragraph"}},[t._v("This action is irreversible.")])],1),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"Popup/Moderation/Button.Label/Verb"}},[t._v("Delete moderation rule")])],1)],1):t._e()],2)},s=[],r=(a("4160"),a("159b"),a("bc3a")),i=a.n(r),o=a("ceb5"),l={props:{type:{type:String,required:!0},object:{type:Object,default:null},target:{type:String,required:!0}},data:function(){var t=this.object||{};return{isLoading:!1,errors:[],current:{summary:o["a"].get(t,"summary",""),isActive:o["a"].get(t,"is_active",!0),blockAll:o["a"].get(t,"block_all",!0),silenceActivity:o["a"].get(t,"silence_activity",!1),silenceNotifications:o["a"].get(t,"silence_notifications",!1),rejectMedia:o["a"].get(t,"reject_media",!1)},fieldConfig:[{id:"rejectMedia",icon:"file"}]}},computed:{labels:function(){return{summaryHelp:this.$pgettext("Content/Moderation/Help text","Explain why you're applying this policy. Depending on your instance configuration, this will help you remember why you acted on this account or domain, and may be displayed publicly to help users understand what moderation rules are in place."),isActiveHelp:this.$pgettext("Content/Moderation/Help text","Use this setting to temporarily enable/disable the policy without completely removing it."),blockAllHelp:this.$pgettext("Content/Moderation/Help text","Block everything from this account or domain. This will prevent any interaction with the entity, and purge related content (uploads, libraries, follows, etc.)"),silenceActivity:{help:this.$pgettext("Content/Moderation/Help text","Hide account or domain content, except from followers."),label:this.$pgettext("Content/Moderation/*/Verb","Mute activity")},silenceNotifications:{help:this.$pgettext("Content/Moderation/Help text","Prevent account or domain from triggering notifications, except from followers."),label:this.$pgettext("Content/Moderation/*/Verb","Mute notifications")},rejectMedia:{help:this.$pgettext("Content/Moderation/Help text","Do not download any media file (audio, album cover, account avatar…) from this account or domain. This will purge existing content as well."),label:this.$pgettext("Content/Moderation/*/Verb","Reject media")}}}},methods:{createOrUpdate:function(){var t,e,a=this,n=this;this.isLoading=!0,this.errors=[];var s={summary:this.current.summary,is_active:this.current.isActive,block_all:this.current.blockAll,silence_activity:this.current.silenceActivity,silence_notifications:this.current.silenceNotifications,reject_media:this.current.rejectMedia,target:{type:this.type,id:this.target}};this.object?(t="manage/moderation/instance-policies/".concat(this.object.id,"/"),e="patch"):(t="manage/moderation/instance-policies/",e="post"),i.a[e](t,s).then((function(t){a.isLoading=!1,n.$emit("save",t.data)}),(function(t){n.isLoading=!1,n.errors=t.backendErrors}))},remove:function(){var t=this,e=this;this.isLoading=!0,this.errors=[];var a="manage/moderation/instance-policies/".concat(this.object.id,"/");i.a.delete(a).then((function(a){t.isLoading=!1,e.$emit("delete")}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}},watch:{"current.silenceActivity":function(t){t&&(this.current.blockAll=!1)},"current.silenceNotifications":function(t){t&&(this.current.blockAll=!1)},"current.rejectMedia":function(t){t&&(this.current.blockAll=!1)},"current.blockAll":function(t){if(t){var e=this;this.fieldConfig.forEach((function(t){e.current[t.id]=!1}))}}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["a"]=u.exports},"82f6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.title))]),a("div",{staticClass:"ui hidden divider"}),a("channels-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"channel-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"channel-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"channel-category"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"channel-category"},domProps:{value:t.getTokenValue("category","")},on:{change:function(e){return t.addSearchToken("category",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"podcast"}},[t._v(t._s(t.sharedLabels.fields.content_category.choices.podcast))]),a("option",{attrs:{value:"music"}},[t._v(t._s(t.sharedLabels.fields.content_category.choices.music))]),a("option",{attrs:{value:"other"}},[t._v(t._s(t.sharedLabels.fields.content_category.choices.other))])])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"channel-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"channel-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"channel-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"channel-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/artists/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.channels.detail",params:{id:e.obj.actor.full_username}}}},[t._v(t._s(e.obj.artist.name))])],1),a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.accounts.detail",params:{id:e.obj.attributed_to.full_username}}}},[a("i",{staticClass:"wrench icon"}),a("span",{staticClass:"visually-hidden"},[t._v(t._s(t.labels.openModeration))])]),a("a",{staticClass:"discrete link",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("account",e.obj.attributed_to.full_username)}}},[t._v(t._s(e.obj.attributed_to.preferred_username))])],1),a("td",[e.obj.is_local?a("a",{staticClass:"ui tiny accent icon link label",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.attributed_to.domain)}}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1):[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.attributed_to.domain}}}},[a("i",{staticClass:"wrench icon"}),a("span",{staticClass:"visually-hidden"},[t._v(t._s(t.labels.openModeration))])]),a("a",{staticClass:"discrete link",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.attributed_to.domain)}}},[t._v(t._s(e.obj.attributed_to.domain))])]],2),a("td",[t._v(" "+t._s(e.obj.artist.albums_count)+" ")]),a("td",[t._v(" "+t._s(e.obj.artist.tracks_count)+" ")]),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1)]}}],null,!1,2995767704)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Account")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["name","name"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/channels/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by domain, name, account…"),openModeration:this.$pgettext("Content/Moderation/Verb","Open in moderation interface")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){return[]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},f=g,_=a("2877"),C=Object(_["a"])(f,r,i,!1,null,null,null),y=C.exports,x={components:{ChannelsTable:y},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{title:this.$pgettext("*/*/*","Channels")}}}},j=x,w=Object(_["a"])(j,n,s,!1,null,null,null);e["default"]=w.exports},"8ccc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[a("div",{staticClass:"ui vertical stripe segment"},[a("user-request-card",{attrs:{obj:t.object}})],1)]:t._e()],2)},s=[],r=a("bc3a"),i=a.n(r),o=a("636a"),l={props:["id"],components:{UserRequestCard:o["a"]},data:function(){return{isLoading:!0,object:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/moderation/requests/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports},"90dc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.moderation,expression:"labels.moderation"}],staticClass:"main pusher"},[a("nav",{staticClass:"ui secondary pointing menu",attrs:{role:"navigation","aria-label":t.labels.secondaryMenu}},[a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.moderation.reports.list",query:{q:"resolved:no"}}}},[a("translate",{attrs:{"translate-context":"*/Moderation/*/Noun"}},[t._v("Reports")]),t.$store.state.ui.notifications.pendingReviewReports>0?a("div",{class:["ui","circular","mini","right floated","accent","label"]},[t._v(t._s(t.$store.state.ui.notifications.pendingReviewReports))]):t._e()],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.moderation.requests.list",query:{q:"status:pending"}}}},[a("translate",{attrs:{"translate-context":"*/Moderation/*/Noun"}},[t._v("User Requests")]),t.$store.state.ui.notifications.pendingReviewRequests>0?a("div",{class:["ui","circular","mini","right floated","accent","label"]},[t._v(t._s(t.$store.state.ui.notifications.pendingReviewRequests))]):t._e()],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.moderation.domains.list"}}},[a("translate",{attrs:{"translate-context":"*/Moderation/*/Noun"}},[t._v("Domains")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.moderation.accounts.list"}}},[a("translate",{attrs:{"translate-context":"*/Moderation/Title"}},[t._v("Accounts")])],1)],1),a("router-view",{key:t.$route.fullPath,attrs:{"allow-list-enabled":t.allowListEnabled}})],1)},s=[],r=a("ceb5"),i=a("bc3a"),o=a.n(i),l={data:function(){return{allowListEnabled:!1}},created:function(){this.fetchNodeInfo()},methods:{fetchNodeInfo:function(){var t=this;o.a.get("instance/nodeinfo/2.0/").then((function(e){t.allowListEnabled=r["a"].get(e.data,"metadata.allowList.enabled",!1)}))}},computed:{labels:function(){return{moderation:this.$pgettext("*/Moderation/*","Moderation"),secondaryMenu:this.$pgettext("Menu/*/Hidden text","Secondary menu")}}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports},9882:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"page-admin-account-detail"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.object.full_username,expression:"object.full_username"}],class:["ui","head","vertical","stripe","segment"]},[a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"ui column"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui header"},[a("i",{staticClass:"circular inverted user icon"}),a("div",{staticClass:"content"},[t._v(" "+t._s(t.object.full_username)+" "),a("div",{staticClass:"sub header"},[t.object.user?[a("span",{staticClass:"ui tiny accent label"},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local account")])],1)]:t._e(),a("a",{attrs:{href:t.object.url||t.object.fid,target:"_blank",rel:"noopener noreferrer"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open profile")]),t._v(" "),a("i",{staticClass:"external icon"})],1)],2)])]),a("div",{staticClass:"header-buttons"},[a("div",{staticClass:"ui icon buttons"},[t.object.user&&t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"ui labeled icon button",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/users/user/"+t.object.user.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"ui labeled icon button",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/federation/actor/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"menu"},[a("a",{staticClass:"basic item",attrs:{href:t.object.url||t.object.fid,target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open remote profile")])],1)])])])])])]),a("div",{staticClass:"ui column"},[t.object.user?t._e():a("div",{staticClass:"ui compact clearing placeholder segment component-placeholder"},[t.isLoadingPolicy?[t._m(0)]:t.policy||t.showPolicyForm?t.policy&&!t.showPolicyForm?a("instance-policy-card",{attrs:{object:t.policy},on:{update:function(e){t.showPolicyForm=!0}}},[a("header",{staticClass:"ui header"},[a("h3",[a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Title"}},[t._v("This domain is subject to specific moderation rules")])],1)])]):t.showPolicyForm?a("instance-policy-form",{attrs:{object:t.policy,type:"actor",target:t.object.full_username},on:{cancel:function(e){t.showPolicyForm=!1},save:t.updatePolicy,delete:function(e){t.policy=null,t.showPolicyForm=!1}}}):t._e():[a("header",{staticClass:"ui header"},[a("h3",[a("i",{staticClass:"shield icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Title"}},[t._v("You don't have any rule in place for this account.")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Paragraph"}},[t._v("Moderation policies help you control how your instance interact with a given domain or account.")])],1),a("button",{staticClass:"ui primary button",on:{click:function(e){t.showPolicyForm=!0}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Button/Verb"}},[t._v("Add a moderation policy")])],1)]],2)])])]),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui stackable three column grid"},[a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"info icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Account data")])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Username")])],1),a("td",[t._v(" "+t._s(t.object.preferred_username)+" ")])]),t.object.user?t._e():a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.object.domain}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),a("td",[t._v(" "+t._s(t.object.domain)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"'Content/*/*/Noun'"}},[t._v("Display name")])],1),a("td",[t._v(" "+t._s(t.object.name)+" ")])]),t.object.user?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Email address")])],1),a("td",[t._v(" "+t._s(t.object.user.email)+" ")])]):t._e(),t.object.user?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Login status")])],1),a("td",[t.object.user.username!=t.$store.state.auth.profile.username?a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.object.user.is_active,expression:"object.user.is_active"}],attrs:{id:"is-active",type:"checkbox"},domProps:{checked:Array.isArray(t.object.user.is_active)?t._i(t.object.user.is_active,null)>-1:t.object.user.is_active},on:{change:[function(e){var a=t.object.user.is_active,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);n.checked?i<0&&t.$set(t.object.user,"is_active",a.concat([r])):i>-1&&t.$set(t.object.user,"is_active",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.object.user,"is_active",s)},function(e){return t.updateUser("is_active")}]}}),a("label",{attrs:{for:"is-active"}},[t.object.user.is_active?a("translate",{key:"1",attrs:{"translate-context":"*/*/*/State of feature"}},[t._v("Enabled")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*/State of feature"}},[t._v("Disabled")])],1)]):t.object.user.is_active?a("translate",{key:"1",attrs:{"translate-context":"*/*/*/State of feature"}},[t._v("Enabled")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*/State of feature"}},[t._v("Disabled")])],1)]):t._e(),t.object.user?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Permissions")])],1),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.permissions,expression:"permissions"}],staticClass:"ui search selection dropdown",attrs:{multiple:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.permissions=e.target.multiple?a:a[0]},function(e){return t.updateUser("permissions")}]}},t._l(t.allPermissions,(function(e){return a("option",{domProps:{value:e.code}},[t._v(t._s(e.label))])})),0),a("action-feedback",{attrs:{"is-loading":t.updating.permissions}})],1)]):t._e(),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Track/Table.Label/Noun"}},[t._v("Type")])],1),a("td",[t._v(" "+t._s(t.object.type)+" ")])]),t.object.user?t._e():a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/Table.Label"}},[t._v("Last checked")])],1),a("td",[t.object.last_fetch_date?a("human-date",{attrs:{date:t.object.last_fetch_date}}):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]),t.object.user?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Admin/Table.Label/Noun"}},[t._v("Sign-up date")])],1),a("td",[a("human-date",{attrs:{date:t.object.user.date_joined}})],1)]):t._e(),t.object.user?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Profile/Table.Label/Short, Noun (Value is a date)"}},[t._v("Last activity")])],1),a("td",[a("human-date",{attrs:{date:t.object.user.last_activity}})],1)]):t._e()])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"feed icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?a("div",{staticClass:"ui placeholder"},[a("div",{staticClass:"full line"}),a("div",{staticClass:"short line"}),a("div",{staticClass:"medium line"}),a("div",{staticClass:"long line"})]):a("table",{staticClass:"ui very basic table"},[a("tbody",[t.object.user?t._e():a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),a("td",[a("human-date",{attrs:{date:t.object.creation_date}})],1)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Emitted messages")])],1),a("td",[t._v(" "+t._s(t.stats.outbox_activities)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Received library follows")])],1),a("td",[t._v(" "+t._s(t.stats.received_library_follows)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Emitted library follows")])],1),a("td",[t._v(" "+t._s(t.stats.emitted_library_follows)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.reports.list",query:{q:t.getQuery("target","account:"+t.object.full_username)}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Linked reports")])],1)],1),a("td",[t._v(" "+t._s(t.stats.reports)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.requests.list",query:{q:t.getQuery("submitter",""+t.object.full_username)}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Requests")])],1)],1),a("td",[t._v(" "+t._s(t.stats.requests)+" ")])])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"music icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?a("div",{staticClass:"ui placeholder"},[a("div",{staticClass:"full line"}),a("div",{staticClass:"short line"}),a("div",{staticClass:"medium line"}),a("div",{staticClass:"long line"})]):a("table",{staticClass:"ui very basic table"},[a("tbody",[t.object.user?t._e():a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),a("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_downloaded_size))+" ")])]),t.object.user?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Upload quota")]),a("span",{attrs:{"data-tooltip":t.labels.uploadQuota}},[a("i",{staticClass:"question circle icon"})])],1),a("td",[a("div",{staticClass:"ui right labeled input"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.object.user.upload_quota,expression:"object.user.upload_quota",modifiers:{number:!0}}],attrs:{step:"100",name:"quota",type:"number"},domProps:{value:t.object.user.upload_quota},on:{change:function(e){return t.updateUser("upload_quota",!0)},input:function(e){e.target.composing||t.$set(t.object.user,"upload_quota",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"ui basic label"},[a("translate",{attrs:{"translate-context":"Content/*/*/Unit"}},[t._v("MB")])],1),a("action-feedback",{staticClass:"ui basic label",attrs:{size:"tiny","is-loading":t.updating.upload_quota}})],1)])]):t._e(),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Total size")])],1),a("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_total_size))+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.channels",query:{q:t.getQuery("account",t.object.full_username)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Channels")])],1)],1),a("td",[t._v(" "+t._s(t.stats.channels)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.libraries",query:{q:t.getQuery("account",t.object.full_username)}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Libraries")])],1)],1),a("td",[t._v(" "+t._s(t.stats.libraries)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("account",t.object.full_username)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1)],1),a("td",[t._v(" "+t._s(t.stats.uploads)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artists")])],1),a("td",[t._v(" "+t._s(t.stats.artists)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1),a("td",[t._v(" "+t._s(t.stats.albums)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("td",[t._v(" "+t._s(t.stats.tracks)+" ")])])])])])])])])]:t._e()],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paragraph"},[a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"})])}],r=(a("99af"),a("7db0"),a("4160"),a("c975"),a("159b"),a("bc3a")),i=a.n(r),o=a("3677"),l=a("ceb5"),c=a("1157"),d=a.n(c),u=a("807a"),v=a("67c7"),p={props:["id"],components:{InstancePolicyForm:u["a"],InstancePolicyCard:v["a"]},data:function(){return{lodash:l["a"],isLoading:!0,isLoadingStats:!1,isLoadingPolicy:!1,object:null,stats:null,showPolicyForm:!1,permissions:[],updating:{permissions:!1,upload_quota:!1}}},created:function(){this.fetchData(),this.fetchStats()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/accounts/"+this.id+"/";i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1,t.object.instance_policy&&t.fetchPolicy(t.object.instance_policy),e.data.user&&t.allPermissions.forEach((function(e){t.object.user.permissions[e.code]&&t.permissions.push(e.code)}))}))},fetchPolicy:function(t){var e=this;this.isLoadingPolicy=!0;var a="manage/moderation/instance-policies/".concat(t,"/");i.a.get(a).then((function(t){e.policy=t.data,e.isLoadingPolicy=!1}))},fetchStats:function(){var t=this;this.isLoadingStats=!0;var e="manage/accounts/"+this.id+"/stats/";i.a.get(e).then((function(e){t.stats=e.data,t.isLoadingStats=!1}))},refreshNodeInfo:function(t){this.object.nodeinfo=t,this.object.nodeinfo_fetch_date=new Date},updateUser:function(t,e){var a=this,n=this.object.user[t];e&&!n&&(n=null);var s=this;this.updating[t]=!0;var r={};"permissions"===t?(r["permissions"]={},this.allPermissions.forEach((function(t){r["permissions"][t.code]=a.permissions.indexOf(t.code)>-1}))):r[t]=n,i.a.patch("manage/users/users/".concat(this.object.user.id,"/"),r).then((function(e){o["a"].default.info("".concat(t," was updated succcessfully to ").concat(n)),s.updating[t]=!1}),(function(e){o["a"].default.error("Error while setting ".concat(t," to ").concat(n),e),s.updating[t]=!1}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this account"),uploadQuota:this.$pgettext("Content/Moderation/Help text","Determine how much content the user can upload. Leave empty to use the default value of the instance.")}},allPermissions:function(){return[{code:"library",label:this.$pgettext("*/*/*/Noun","Library")},{code:"moderation",label:this.$pgettext("*/Moderation/*","Moderation")},{code:"settings",label:this.$pgettext("*/*/*/Noun","Settings")}]}},watch:{object:function(){var t=this;this.$nextTick((function(){d()(t.$el).find("select.dropdown").dropdown()}))}}},m=p,h=a("2877"),b=Object(h["a"])(m,n,s,!1,null,null,null);e["default"]=b.exports},"9dc9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[a("div",{staticClass:"ui vertical stripe segment"},[a("report-card",{attrs:{obj:t.object}})],1)]:t._e()],2)},s=[],r=a("bc3a"),i=a.n(r),o=a("4a11"),l={props:["id"],components:{ReportCard:o["a"]},data:function(){return{isLoading:!0,object:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/moderation/reports/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports},"9dcd":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{role:"button"},on:{click:t.createFetch}},[a("div",[t._t("default")],2),a("modal",{staticClass:"small",attrs:{show:t.showModal},on:{"update:show":function(e){t.showModal=e}}},[a("h3",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/*/Title"}},[t._v("Refreshing object from remote…")])],1),a("div",{staticClass:"scrolling content"},[t.fetch&&"pending"!=t.fetch.status?["skipped"===t.fetch.status?a("div",{staticClass:"ui message"},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/*/Message.Title"}},[t._v("Refresh was skipped")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/*/Message.Content"}},[t._v("The remote server answered, but returned data was unsupported by Funkwhale.")])],1)]):"finished"===t.fetch.status?a("div",{staticClass:"ui success message"},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/*/Message.Title"}},[t._v("Refresh successful")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/*/Message.Content"}},[t._v("Data was refreshed successfully from remote server.")])],1)]):"errored"===t.fetch.status?a("div",{staticClass:"ui error message"},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/*/Message.Title"}},[t._v("Refresh error")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/*/Message.Content"}},[t._v("An error occurred while trying to refresh data:")])],1),a("table",{staticClass:"ui very basic collapsing celled table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Popup/Import/Table.Label/Noun"}},[t._v("Error type")])],1),a("td",[t._v(" "+t._s(t.fetch.detail.error_code)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Popup/Import/Table.Label/Noun"}},[t._v("Error detail")])],1),a("td",["http"===t.fetch.detail.error_code&&t.fetch.detail.status_code?a("translate",{attrs:{"translate-params":{status:t.fetch.detail.status_code},"translate-context":"*/*/Error"}},[t._v("The remote server answered with HTTP %{ status }")]):["http","request"].indexOf(t.fetch.detail.error_code)>-1?a("translate",{attrs:{"translate-context":"*/*/Error"}},[t._v("An HTTP error occurred while contacting the remote server")]):"timeout"===t.fetch.detail.error_code?a("translate",{attrs:{"translate-context":"*/*/Error"}},[t._v("The remote server didn't respond quickly enough")]):"connection"===t.fetch.detail.error_code?a("translate",{attrs:{"translate-context":"*/*/Error"}},[t._v("Impossible to connect to the remote server")]):["invalid_json","invalid_jsonld","missing_jsonld_type"].indexOf(t.fetch.detail.error_code)>-1?a("translate",{attrs:{"translate-context":"*/*/Error"}},[t._v("The remote server returned invalid JSON or JSON-LD data")]):"validation"===t.fetch.detail.error_code?a("translate",{attrs:{"translate-context":"*/*/Error"}},[t._v("Data returned by the remote server had invalid or missing attributes")]):(t.fetch.detail.error_code,a("translate",{attrs:{"translate-context":"*/*/Error"}},[t._v("Unknown error")]))],1)])])])]):t._e()]:t.isCreatingFetch?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui text loader"},[a("translate",{attrs:{"translate-context":"Popup/*/Loading.Title"}},[t._v("Requesting a fetch…")])],1)]):t.isWaitingFetch?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui text loader"},[a("translate",{attrs:{"translate-context":"Popup/*/Loading.Title"}},[t._v("Waiting for result…")])],1)]):t._e(),t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Error while saving settings")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t.fetch&&"pending"===t.fetch.status&&t.pollsCount>=t.maxPolls?a("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/*/Message.Title"}},[t._v("Refresh pending")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/*/Message.Content"}},[t._v("Refresh request wasn't proceed in time by our server. It will be processed later.")])],1)]):t._e()],2),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic cancel button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Close")])],1),a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Close and reload page")])],1)])],1)},s=[],r=(a("d3b7"),a("bc3a")),i=a.n(r),o=a("404d"),l={props:["url"],components:{Modal:o["default"]},data:function(){return{fetch:null,isCreatingFetch:!1,errors:[],showModal:!1,isWaitingFetch:!1,maxPolls:15,pollsCount:0}},methods:{createFetch:function(){var t=this;this.fetch=null,this.pollsCount=0,this.errors=[],this.isCreatingFetch=!0,this.isWaitingFetch=!1,t.showModal=!0,i.a.post(this.url).then((function(e){t.isCreatingFetch=!1,t.fetch=e.data,t.pollFetch()}),(function(e){t.isCreatingFetch=!1,t.errors=e.backendErrors}))},pollFetch:function(){this.isWaitingFetch=!0,this.pollsCount+=1;var t="federation/fetches/".concat(this.fetch.id,"/"),e=this;e.showModal=!0,i.a.get(t).then((function(t){e.isCreatingFetch=!1,e.fetch=t.data,"pending"===e.fetch.status&&e.pollsCount<e.maxPolls?setTimeout((function(){e.pollFetch()}),1e3):e.isWaitingFetch=!1}),(function(t){e.errors=t.backendErrors,e.isWaitingFetch=!1}))}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["a"]=u.exports},"9dee":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("edits-card-list",{attrs:{"update-url":!0,"default-query":t.defaultQuery}},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Admin/Title/Noun"}},[t._v("Library edits")])],1)])],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui text container"},[t._t("default"),a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"search-edits"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"search-edits",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"edit-status"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"edit-status"},domProps:{value:t.getTokenValue("is_approved","")},on:{change:function(e){return t.addSearchToken("is_approved",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"null"}},[a("translate",{attrs:{"translate-context":"Content/Admin/*/Noun"}},[t._v("Pending review")])],1),a("option",{attrs:{value:"yes"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Approved")])],1),a("option",{attrs:{value:"no"}},[a("translate",{attrs:{"translate-context":"Content/Library/*/Short"}},[t._v("Rejected")])],1)])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"edit-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"edit-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"edit-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Order")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"edit-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t.result&&t.result.count>0?a("div",t._l(t.result.results,(function(e){return a("edit-card",{key:e.uuid,attrs:{obj:e,"current-state":t.getCurrentState(e.target)},on:{deleted:function(a){return t.handle("delete",e.uuid,null)},approved:function(a){return t.handle("approved",e.uuid,a)}}})})),1):a("empty-state",{attrs:{refresh:!0},on:{refresh:function(e){return t.fetchData()}}})],1),a("div",{staticClass:"ui hidden divider"}),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)],2)},i=[],o=(a("4160"),a("b64b"),a("ac1f"),a("841c"),a("159b"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("1799"),v=a("20be"),p=a("64c4"),m=a("5786"),h=a("3255"),b=a("8bad"),g=a("3fb2"),f={mixins:[v["a"],p["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:u["a"],EditCard:m["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:25,search:{query:this.defaultQuery,tokens:Object(h["c"])(Object(h["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["applied_date","applied_date"]],targets:{track:{}}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,this.result=null,l.a.get("mutations/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1,e.fetchTargets()}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},fetchTargets:function(){var t=this,e={track:{url:"tracks/",ids:[]}};this.result.results.forEach((function(t){t.target&&e[t.target.type]&&e[t.target.type]["ids"].push(t.target.id)})),Object.keys(e).forEach((function(a){var n=e[a];0!==n.ids.length&&l.a.get(n.url,{params:{id:c["a"].uniq(n.ids),hidden:"null"}}).then((function(e){e.data.results.forEach((function(e){t.$set(t.targets[a],e.id,{payload:e,currentState:g["a"].getCurrentStateForObj(e,g["a"].getConfigs.bind(t)()[a])})}))}),(function(e){t.errors=e.backendErrors}))}))},selectPage:function(t){this.page=t},handle:function(t,e,a){"delete"===t&&this.exclude.push(e),this.result.results.forEach((function(t){t.uuid===e&&(t.is_approved=a)}))},getCurrentState:function(t){return t&&this.targets[t.type]&&this.targets[t.type][String(t.id)]?this.targets[t.type][String(t.id)].currentState:{}}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by account, summary, domain…")}}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},_=f,C=a("2877"),y=Object(C["a"])(_,r,i,!1,null,null,null),x=y.exports,j={props:{defaultQuery:{type:String,required:!1}},components:{EditsCardList:x},computed:{labels:function(){return{title:this.$pgettext("*/Admin/*/Noun","Edits")}}}},w=j,k=Object(C["a"])(w,n,s,!1,null,null,null);e["default"]=k.exports},ba9b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.object.name,expression:"object.name"}],class:["ui","head","vertical","stripe","segment"]},[a("div",{staticClass:"ui stackable one column grid"},[a("div",{staticClass:"ui column"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui header"},[a("i",{staticClass:"circular inverted hashtag icon"}),a("div",{staticClass:"content"},[t._v(" "+t._s(t._f("truncate")(t.object.name,100))+" ")])]),a("div",{staticClass:"header-buttons"},[a("div",{staticClass:"ui icon buttons"},[a("router-link",{staticClass:"ui labeled icon button",attrs:{to:{name:"library.tags.detail",params:{id:t.object.name}}}},[a("i",{staticClass:"info icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open local profile")])],1),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"menu"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/tags/tag/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e()])])],1),a("div",{staticClass:"ui buttons"},[a("dangerous-button",{class:["ui",{loading:t.isLoading},"basic danger button"],attrs:{action:t.remove}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Delete this tag?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The tag will be removed and unlinked from any existing entity. This action is irreversible.")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])])])])]),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui stackable three column grid"},[a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"info icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Tag data")])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("td",[t._v(" "+t._s(t.object.name)+" ")])])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"feed icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?a("div",{staticClass:"ui placeholder"},[a("div",{staticClass:"full line"}),a("div",{staticClass:"short line"}),a("div",{staticClass:"medium line"}),a("div",{staticClass:"long line"})]):a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),a("td",[a("human-date",{attrs:{date:t.object.creation_date}})],1)])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"music icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.artists",query:{q:t.getQuery("tag",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artists")])],1)],1),a("td",[t._v(" "+t._s(t.object.artists_count)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.albums",query:{q:t.getQuery("tag",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1)],1),a("td",[t._v(" "+t._s(t.object.albums_count)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.tracks",query:{q:t.getQuery("tag",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1)],1),a("td",[t._v(" "+t._s(t.object.tracks_count)+" ")])])])])])])])])]:t._e()],2)},s=[],r=(a("99af"),a("bc3a")),i=a.n(r),o=(a("3677"),a("9dcd")),l={props:["id"],components:{FetchButton:o["a"]},data:function(){return{isLoading:!0,isLoadingStats:!1,object:null,stats:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/tags/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))},remove:function(){var t=this;this.isLoading=!0;var e="manage/tags/".concat(this.id,"/");i.a.delete(e).then((function(e){t.$router.push({name:"manage.library.tags"})}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this object")}}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports},ca9d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.manageUsers,expression:"labels.manageUsers"}],staticClass:"main pusher"},[a("nav",{staticClass:"ui secondary pointing menu",attrs:{role:"navigation","aria-label":t.labels.secondaryMenu}},[a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.users.users.list"}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Users")])],1),a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.users.invitations.list"}}},[a("translate",{attrs:{"translate-context":"*/Admin/*/Noun"}},[t._v("Invitations")])],1)],1),a("router-view",{key:t.$route.fullPath})],1)},s=[],r={computed:{labels:function(){return{manageUsers:this.$pgettext("Head/Admin/Title","Manage users"),secondaryMenu:this.$pgettext("Menu/*/Hidden text","Secondary menu")}}}},i=r,o=a("2877"),l=Object(o["a"])(i,n,s,!1,null,null,null);e["default"]=l.exports},d453:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Error message.Title"}},[t._v("Error while submitting note")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"field"},[a("content-form",{attrs:{"field-id":"change-summary",required:!0,rows:3,placeholder:t.labels.summaryPlaceholder},model:{value:t.summary,callback:function(e){t.summary=e},expression:"summary"}})],1),a("button",{class:["ui",{loading:t.isLoading},"right","floated","button"],attrs:{type:"submit",disabled:t.isLoading}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Button.Label/Verb"}},[t._v("Add note")])],1)])},s=[],r=a("bc3a"),i=a.n(r),o=a("339e"),l=a.n(o),c={props:{target:{required:!0}},data:function(){return{markdown:new l.a.Converter,isLoading:!1,summary:"",errors:[]}},computed:{labels:function(){return{summaryPlaceholder:this.$pgettext("Content/Moderation/Placeholder","Describe what actions have been taken, or any other related updates…")}}},methods:{submit:function(){var t=this;this.isLoading=!0;var e={target:this.target,summary:this.summary};this.errors=[],i.a.post("manage/moderation/notes/",e).then((function(e){t.$emit("created",e.data),t.summary="",t.isLoading=!1}),(function(e){t.errors=e.backendErrors,t.isLoading=!1}))}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["a"]=v.exports},d80e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.reports,expression:"labels.reports"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"*/Moderation/*/Noun"}},[t._v("User Requests")])],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"requests-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"requests-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"requests-status"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"requests-status"},domProps:{value:t.getTokenValue("status","")},on:{change:function(e){return t.addSearchToken("status",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"pending"}},[a("translate",{attrs:{"translate-context":"Content/Library/*/Short"}},[t._v("Pending")])],1),a("option",{attrs:{value:"approved"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Approved")])],1),a("option",{attrs:{value:"refused"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Refused")])],1)])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"requests-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"requests-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"requests-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Order")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"requests-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t.result&&0!==t.result.count?[t._l(t.result.results,(function(e){return a("user-request-card",{key:e.uuid,attrs:{obj:e},on:{handled:t.fetchData}})})),a("div",{staticClass:"ui center aligned basic segment"},[t.result.count>t.paginateBy?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)]:a("div",[a("empty-state",{attrs:{refresh:!0},on:{refresh:function(e){return t.fetchData()}}})],1)],2)])},s=[],r=(a("ac1f"),a("841c"),a("bc3a")),i=a.n(r),o=a("ceb5"),l=a("cadb"),c=a("1799"),d=a("20be"),u=a("64c4"),v=a("636a"),p=a("3255"),m=a("8bad"),h={mixins:[d["a"],u["a"],m["a"]],components:{Pagination:c["a"],UserRequestCard:v["a"]},data:function(){return{time:l["a"],isLoading:!1,result:null,page:1,search:{query:this.defaultQuery,tokens:Object(p["c"])(Object(p["b"])(this.defaultQuery))},orderingOptions:[["creation_date","creation_date"],["handled_date","handled_date"]],targets:{track:{}}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=o["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,this.result=null,i.a.get("manage/moderation/requests/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1,"status:pending"===e.search.query&&e.$store.commit("ui/incrementNotifications",{type:"pendingReviewRequests",value:t.data.count})}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by username…"),reports:this.$pgettext("*/Moderation/*/Noun","User Requests")}}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},b=h,g=a("2877"),f=Object(g["a"])(b,n,s,!1,null,null,null);e["default"]=f.exports},d939:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.reports,expression:"labels.reports"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"*/Moderation/*/Noun"}},[t._v("Reports")])],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"reports-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"reports-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"reports-status"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),a("select",{staticClass:"ui dropdown",attrs:{id:"reports-status"},domProps:{value:t.getTokenValue("resolved","")},on:{change:function(e){return t.addSearchToken("resolved",e.target.value)}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/*/Dropdown"}},[t._v("All")])],1),a("option",{attrs:{value:"yes"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Resolved")])],1),a("option",{attrs:{value:"no"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Short"}},[t._v("Unresolved")])],1)])]),a("report-category-dropdown",{staticClass:"field",attrs:{all:!0,label:!0,value:t.getTokenValue("category","")},on:{input:function(e){return t.addSearchToken("category",e)}}}),a("div",{staticClass:"field"},[a("label",{attrs:{for:"reports-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"reports-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"reports-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Order")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"reports-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])],1)]),t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t.result&&0!==t.result.count?"card"===t.mode?a("div",t._l(t.result.results,(function(e){return a("report-card",{key:e.uuid,attrs:{obj:e},on:{handled:t.fetchData}})})),1):t._e():a("div",[a("empty-state",{attrs:{refresh:!0},on:{refresh:function(e){return t.fetchData()}}})],1),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)])])},s=[],r=(a("4160"),a("b64b"),a("ac1f"),a("841c"),a("159b"),a("bc3a")),i=a.n(r),o=a("ceb5"),l=a("cadb"),c=a("1799"),d=a("20be"),u=a("64c4"),v=a("4a11"),p=a("3b1b8"),m=a("3255"),h=a("8bad"),b={mixins:[d["a"],u["a"],h["a"]],components:{Pagination:c["a"],ReportCard:v["a"],ReportCategoryDropdown:p["default"]},props:{mode:{default:"card"}},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:l["a"],isLoading:!1,result:null,page:1,paginateBy:25,search:{query:this.defaultQuery,tokens:Object(m["c"])(Object(m["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["applied_date","applied_date"]],targets:{track:{}}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=o["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,this.result=null,i.a.get("manage/moderation/reports/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1,"resolved:no"===e.search.query&&(console.log("Refreshing sidebar notifications"),e.$store.commit("ui/incrementNotifications",{type:"pendingReviewReports",value:t.data.count}))}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},fetchTargets:function(){var t=this,e={track:{url:"tracks/",ids:[]}};this.result.results.forEach((function(t){t.target&&e[t.target.type]&&e[t.target.type]["ids"].push(t.target.id)})),Object.keys(e).forEach((function(a){var n=e[a];0!==n.ids.length&&i.a.get(n.url,{params:{id:o["a"].uniq(n.ids),hidden:"null"}}).then((function(e){e.data.results.forEach((function(e){t.$set(t.targets[a],e.id,{payload:e,currentState:edits.getCurrentStateForObj(e,edits.getConfigs.bind(t)()[a])})}))}),(function(e){t.errors=e.backendErrors}))}))},selectPage:function(t){this.page=t},handle:function(t,e,a){"delete"===t&&this.exclude.push(e),this.result.results.forEach((function(t){t.uuid===e&&(t.is_approved=a)}))},getCurrentState:function(t){return t&&this.targets[t.type]&&this.targets[t.type][String(t.id)]?this.targets[t.type][String(t.id)].currentState:{}}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by account, summary, domain…"),reports:this.$pgettext("*/Moderation/*/Noun","Reports")}}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},g=b,f=a("2877"),_=Object(f["a"])(g,n,s,!1,null,null,null);e["default"]=_.exports},dece:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[t.isLoading?n("div",{staticClass:"ui vertical segment"},[n("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[n("section",{directives:[{name:"title",rawName:"v-title",value:t.object.title,expression:"object.title"}],class:["ui","head","vertical","stripe","segment"]},[n("div",{staticClass:"ui stackable one column grid"},[n("div",{staticClass:"ui column"},[n("div",{staticClass:"segment-content"},[n("h2",{staticClass:"ui header"},[t.object.cover&&t.object.cover.urls.medium_square_crop?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.object.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](object.cover.urls.medium_square_crop)"}],attrs:{alt:""}}):n("img",{attrs:{alt:"",src:a("271e")}}),n("div",{staticClass:"content"},[t._v(" "+t._s(t._f("truncate")(t.object.title,100))+" "),n("div",{staticClass:"sub header"},[t.object.is_local?[n("span",{staticClass:"ui tiny accent label"},[n("i",{staticClass:"home icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1)]:t._e()],2)])]),t.object.tags&&t.object.tags.length>0?[n("tags-list",{attrs:{limit:5,"detail-route":"manage.library.tags.detail",tags:t.object.tags}}),n("div",{staticClass:"ui hidden divider"})]:t._e(),n("div",{staticClass:"header-buttons"},[n("div",{staticClass:"ui icon buttons"},[n("router-link",{staticClass:"ui icon labeled button",attrs:{to:{name:"library.tracks.detail",params:{id:t.object.id}}}},[n("i",{staticClass:"info icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open local profile")])],1),n("button",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui floating dropdown icon button"},[n("i",{staticClass:"dropdown icon"}),n("div",{staticClass:"menu"},[t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?n("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/track/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"wrench icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e(),t.object.mbid?n("a",{staticClass:"basic item",attrs:{href:"https://musicbrainz.org/recording/"+t.object.mbid,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"external icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open on MusicBrainz")])],1):t._e(),t.object.is_local?t._e():n("fetch-button",{staticClass:"basic item",attrs:{url:"tracks/"+t.object.id+"/fetches/"},on:{refresh:t.fetchData}},[n("i",{staticClass:"refresh icon"}),t._v(" "),n("translate",{attrs:{"translate-context":"Content/Moderation/Button/Verb"}},[t._v("Refresh from remote server")])],1),n("a",{staticClass:"basic item",attrs:{href:t.object.url||t.object.fid,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"external icon"}),n("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open remote profile")])],1)],1)])],1),n("div",{staticClass:"ui buttons"},[t.object.is_local?n("router-link",{staticClass:"ui labeled icon button",attrs:{to:{name:"library.tracks.edit",params:{id:t.object.id}}}},[n("i",{staticClass:"edit icon"}),n("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1):t._e()],1),n("div",{staticClass:"ui buttons"},[n("dangerous-button",{class:["ui",{loading:t.isLoading},"basic danger button"],attrs:{action:t.remove}},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),n("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[n("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Delete this track?")])],1),n("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[n("p",[n("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The track will be removed, as well as associated uploads, favorites and listening history. This action is irreversible.")])],1)]),n("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[n("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1)],1)])],2)])])]),n("div",{staticClass:"ui vertical stripe segment"},[n("div",{staticClass:"ui stackable three column grid"},[n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"info icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Track data")])],1)]),n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Title")])],1),n("td",[t._v(" "+t._s(t.object.title)+" ")])]),t.object.album?n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.albums.detail",params:{id:t.object.album.id}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Album")])],1)],1),n("td",[t._v(" "+t._s(t.object.album.title)+" ")])]):t._e(),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.artists.detail",params:{id:t.object.artist.id}}}},[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artist")])],1)],1),n("td",[t._v(" "+t._s(t.object.artist.name)+" ")])]),t.object.album?n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.artists.detail",params:{id:t.object.album.artist.id}}}},[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Album artist")])],1)],1),n("td",[t._v(" "+t._s(t.object.album.artist.name)+" ")])]):t._e(),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Short, Noun"}},[t._v("Position")])],1),n("td",[t._v(" "+t._s(t.object.position)+" ")])]),t.object.disc_number?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Disc number")])],1),n("td",[t._v(" "+t._s(t.object.disc_number)+" ")])]):t._e(),t.object.copyright?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Track/*/Noun"}},[t._v("Copyright")])],1),n("td",[t._v(t._s(t.object.copyright))])]):t._e(),t.object.license?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("License")])],1),n("td",[n("router-link",{attrs:{to:{name:"manage.library.tracks",query:{q:t.getQuery("license",t.object.license)}}}},[t._v(" "+t._s(t.object.license)+" ")])],1)]):t._e(),t.object.is_local?t._e():n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:t.object.domain}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1)],1),n("td",[t._v(" "+t._s(t.object.domain)+" ")])]),t.object.description?n("tr",[n("td",[n("translate",{attrs:{"translate-context":"'*/*/*/Noun"}},[t._v("Description")])],1),n("td",{domProps:{innerHTML:t._s(t.object.description.html)}})]):t._e()])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"feed icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),n("td",[n("human-date",{attrs:{date:t.object.creation_date}})],1)]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Listenings")])],1),n("td",[t._v(" "+t._s(t.stats.listenings)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Favorited tracks")])],1),n("td",[t._v(" "+t._s(t.stats.track_favorites)+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Playlists")])],1),n("td",[t._v(" "+t._s(t.stats.playlists)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.moderation.reports.list",query:{q:t.getQuery("target","track:"+t.object.id)}}}},[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Linked reports")])],1)],1),n("td",[t._v(" "+t._s(t.stats.reports)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.edits",query:{q:t.getQuery("target","track "+t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/Admin/*/Noun"}},[t._v("Edits")])],1)],1),n("td",[t._v(" "+t._s(t.stats.mutations)+" ")])])])])])]),n("div",{staticClass:"column"},[n("section",[n("h3",{staticClass:"ui header"},[n("i",{staticClass:"music icon"}),n("div",{staticClass:"content"},[n("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),n("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[n("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?n("div",{staticClass:"ui placeholder"},[n("div",{staticClass:"full line"}),n("div",{staticClass:"short line"}),n("div",{staticClass:"medium line"}),n("div",{staticClass:"long line"})]):n("table",{staticClass:"ui very basic table"},[n("tbody",[n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_downloaded_size))+" ")])]),n("tr",[n("td",[n("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Total size")])],1),n("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_total_size))+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.libraries",query:{q:t.getQuery("track_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Libraries")])],1)],1),n("td",[t._v(" "+t._s(t.stats.libraries)+" ")])]),n("tr",[n("td",[n("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("track_id",t.object.id)}}}},[n("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1)],1),n("td",[t._v(" "+t._s(t.stats.uploads)+" ")])])])])])])])])]:t._e()],2)},s=[],r=(a("99af"),a("bc3a")),i=a.n(r),o=(a("3677"),a("9dcd")),l=a("6b08"),c={props:["id"],components:{FetchButton:o["a"],TagsList:l["a"]},data:function(){return{isLoading:!0,isLoadingStats:!1,object:null,stats:null}},created:function(){this.fetchData(),this.fetchStats()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/library/tracks/".concat(this.id,"/");i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1}))},fetchStats:function(){var t=this;this.isLoadingStats=!0;var e="manage/library/tracks/".concat(this.id,"/stats/");i.a.get(e).then((function(e){t.stats=e.data,t.isLoadingStats=!1}))},remove:function(){var t=this;this.isLoading=!0;var e="manage/library/tracks/".concat(this.id,"/");i.a.delete(e).then((function(e){t.$router.push({name:"manage.library.tracks"})}))},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this object")}}}},d=c,u=a("2877"),v=Object(u["a"])(d,n,s,!1,null,null,null);e["default"]=v.exports},e057:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"page-admin-domain-detail"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.object.name,expression:"object.name"}],class:["ui","head","vertical","stripe","segment"]},[a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"ui column"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui header"},[a("i",{staticClass:"circular inverted cloud icon"}),a("div",{staticClass:"content"},[t._v(" "+t._s(t.object.name)+" "),a("div",{staticClass:"sub header"},[a("a",{staticClass:"logo-wrapper",attrs:{href:t.externalUrl,target:"_blank",rel:"noopener noreferrer"}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("Open website")]),t._v(" "),a("i",{staticClass:"external icon"})],1)])])]),a("div",{staticClass:"header-buttons"},[a("div",{staticClass:"ui icon buttons"},[t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"ui labeled icon button",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/federation/domain/"+t.object.name),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e()]),t.allowListEnabled?a("div",{staticClass:"ui icon buttons"},[t.object.allowed?a("button",{class:["ui","labeled",{loading:t.isLoadingAllowList},"icon","button"],on:{click:function(e){return e.preventDefault(),t.setAllowList(!1)}}},[a("i",{staticClass:"x icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Action/Verb"}},[t._v("Remove from allow-list")])],1):a("button",{class:["ui","labeled",{loading:t.isLoadingAllowList},"icon","button"],on:{click:function(e){return e.preventDefault(),t.setAllowList(!0)}}},[a("i",{staticClass:"check icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Action/Verb"}},[t._v("Add to allow-list")])],1)]):t._e()])])]),a("div",{staticClass:"ui column"},[a("div",{staticClass:"ui compact clearing placeholder segment component-placeholder"},[t.isLoadingPolicy?[t._m(0)]:t.policy||t.showPolicyForm?t.policy&&!t.showPolicyForm?a("instance-policy-card",{attrs:{object:t.policy},on:{update:function(e){t.showPolicyForm=!0}}},[a("header",{staticClass:"ui header"},[a("h3",[a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Title"}},[t._v("This domain is subject to specific moderation rules")])],1)])]):t.showPolicyForm?a("instance-policy-form",{attrs:{object:t.policy,type:"domain",target:t.object.name},on:{cancel:function(e){t.showPolicyForm=!1},save:t.updatePolicy,delete:function(e){t.policy=null,t.showPolicyForm=!1}}}):t._e():[a("header",{staticClass:"ui header"},[a("h3",[a("i",{staticClass:"shield icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Title"}},[t._v("You don't have any rule in place for this domain.")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Card.Paragraph"}},[t._v("Moderation policies help you control how your instance interact with a given domain or account.")])],1),a("button",{staticClass:"ui primary button",on:{click:function(e){t.showPolicyForm=!0}}},[t._v("Add a moderation policy")])]],2)])])]),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui stackable three column grid"},[a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"info icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Instance data")])],1)]),a("table",{staticClass:"ui very basic table"},[a("tbody",[t.allowListEnabled?a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Adjective"}},[t._v("Is present on allow-list")])],1),a("td",[t.object.allowed?a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Yes")]):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("No")])],1)]):t._e(),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/Table.Label"}},[t._v("Last checked")])],1),a("td",[t.object.nodeinfo_fetch_date?a("human-date",{attrs:{date:t.object.nodeinfo_fetch_date}}):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]),t.object.nodeinfo&&"ok"===t.object.nodeinfo.status?[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Software")])],1),a("td",[t._v(" "+t._s(t.lodash.get(t.object,"nodeinfo.payload.software.name",t.$pgettext("*/*/*","N/A")))+" ("+t._s(t.lodash.get(t.object,"nodeinfo.payload.software.version",t.$pgettext("*/*/*","N/A")))+") ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("td",[t._v(" "+t._s(t.lodash.get(t.object,"nodeinfo.payload.metadata.nodeName",t.$pgettext("*/*/*","N/A")))+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Total users")])],1),a("td",[t._v(" "+t._s(t.lodash.get(t.object,"nodeinfo.payload.usage.users.total",t.$pgettext("*/*/*","N/A")))+" ")])])]:t._e(),t.object.nodeinfo&&"error"===t.object.nodeinfo.status?[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Status")])],1),a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table"}},[t._v("Error while fetching node info")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.object.nodeinfo.error}},[a("i",{staticClass:"question circle icon"})])],1)])]:t._e()],2)]),a("ajax-button",{attrs:{method:"get",url:"manage/federation/domains/"+t.object.name+"/nodeinfo/"},on:{"action-done":t.refreshNodeInfo}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Button.Label/Verb"}},[t._v("Refresh node info")])],1)],1)]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"feed icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Activity")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?a("div",{staticClass:"ui placeholder"},[a("div",{staticClass:"full line"}),a("div",{staticClass:"short line"}),a("div",{staticClass:"medium line"}),a("div",{staticClass:"long line"})]):a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Short (Value is a date)"}},[t._v("First seen")])],1),a("td",[a("human-date",{attrs:{date:t.object.creation_date}})],1)]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.moderation.accounts.list",query:{q:"domain:"+t.object.name}}}},[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label.Link"}},[t._v("Known accounts")])],1)],1),a("td",[t._v(" "+t._s(t.stats.actors)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Emitted messages")])],1),a("td",[t._v(" "+t._s(t.stats.outbox_activities)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Received library follows")])],1),a("td",[t._v(" "+t._s(t.stats.received_library_follows)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Emitted library follows")])],1),a("td",[t._v(" "+t._s(t.stats.emitted_library_follows)+" ")])])])])])]),a("div",{staticClass:"column"},[a("section",[a("h3",{staticClass:"ui header"},[a("i",{staticClass:"music icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Moderation/Title"}},[t._v("Audio content")]),t._v(" "),a("span",{attrs:{"data-tooltip":t.labels.statsWarning}},[a("i",{staticClass:"question circle icon"})])],1)]),t.isLoadingStats?a("div",{staticClass:"ui placeholder"},[a("div",{staticClass:"full line"}),a("div",{staticClass:"short line"}),a("div",{staticClass:"medium line"}),a("div",{staticClass:"long line"})]):a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label/Noun"}},[t._v("Cached size")])],1),a("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_downloaded_size))+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Moderation/Table.Label"}},[t._v("Total size")])],1),a("td",[t._v(" "+t._s(t._f("humanSize")(t.stats.media_total_size))+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.channels",query:{q:t.getQuery("domain",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Channels")])],1)],1),a("td",[t._v(" "+t._s(t.stats.channels)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.libraries",query:{q:t.getQuery("domain",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Libraries")])],1)],1),a("td",[t._v(" "+t._s(t.stats.libraries)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.uploads",query:{q:t.getQuery("domain",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Uploads")])],1)],1),a("td",[t._v(" "+t._s(t.stats.uploads)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.artists",query:{q:t.getQuery("domain",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artists")])],1)],1),a("td",[t._v(" "+t._s(t.stats.artists)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.albums",query:{q:t.getQuery("domain",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1)],1),a("td",[t._v(" "+t._s(t.stats.albums)+" ")])]),a("tr",[a("td",[a("router-link",{attrs:{to:{name:"manage.library.tracks",query:{q:t.getQuery("domain",t.object.name)}}}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1)],1),a("td",[t._v(" "+t._s(t.stats.tracks)+" ")])])])])])])])])]:t._e()],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paragraph"},[a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"})])}],r=(a("99af"),a("b0c0"),a("bc3a")),i=a.n(r),o=(a("3677"),a("ceb5")),l=a("807a"),c=a("67c7"),d={props:["id","allowListEnabled"],components:{InstancePolicyForm:l["a"],InstancePolicyCard:c["a"]},data:function(){return{lodash:o["a"],isLoading:!0,isLoadingStats:!1,isLoadingPolicy:!1,isLoadingAllowList:!1,policy:null,object:null,stats:null,showPolicyForm:!1,permissions:[]}},created:function(){this.fetchData(),this.fetchStats()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="manage/federation/domains/"+this.id+"/";i.a.get(e).then((function(e){t.object=e.data,t.isLoading=!1,t.object.instance_policy&&t.fetchPolicy(t.object.instance_policy)}))},fetchStats:function(){var t=this;this.isLoadingStats=!0;var e="manage/federation/domains/"+this.id+"/stats/";i.a.get(e).then((function(e){t.stats=e.data,t.isLoadingStats=!1}))},fetchPolicy:function(t){var e=this;this.isLoadingPolicy=!0;var a="manage/moderation/instance-policies/".concat(t,"/");i.a.get(a).then((function(t){e.policy=t.data,e.isLoadingPolicy=!1}))},setAllowList:function(t){var e=this;this.isLoadingAllowList=!0;var a="manage/federation/domains/".concat(this.id,"/");i.a.patch(a,{allowed:t}).then((function(t){e.object=t.data,e.isLoadingAllowList=!1}))},refreshNodeInfo:function(t){this.object.nodeinfo=t,this.object.nodeinfo_fetch_date=new Date},updatePolicy:function(t){this.policy=t,this.showPolicyForm=!1},getQuery:function(t,e){return"".concat(t,':"').concat(e,'"')}},computed:{labels:function(){return{statsWarning:this.$pgettext("Content/Moderation/Help text","Statistics are computed from known activity and content on your instance, and do not reflect general activity for this domain")}},externalUrl:function(){return"https://".concat(this.object.name)}}},u=d,v=a("2877"),p=Object(v["a"])(u,n,s,!1,null,null,null);e["default"]=p.exports},e0ba:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.settings,expression:"labels.settings"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui text container"},[a("div",{class:["ui",{loading:t.isLoading},"form"]}),t.settingsData?a("div",{staticClass:"ui grid",attrs:{id:"settings-grid"}},[a("div",{staticClass:"twelve wide stretched column"},t._l(t.groups,(function(e){return a("settings-group",{key:e.title,attrs:{"settings-data":t.settingsData,group:e}})})),1),a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui sticky vertical secondary menu"},[a("div",{staticClass:"header item"},[a("translate",{attrs:{"translate-context":"Content/Admin/Menu.Title"}},[t._v("Sections")])],1),t._l(t.groups,(function(e){return a("a",{class:["menu",{active:e.id===t.current},"item"],attrs:{href:"#"+e.id},on:{click:function(a){return a.preventDefault(),t.scrollTo(e.id)}}},[t._v(t._s(e.label))])}))],2)])]):t._e()])])])},s=[],r=(a("7db0"),a("bc3a")),i=a.n(r),o=a("1157"),l=a.n(o),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form component-settings-group",attrs:{id:t.group.id},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("div",{staticClass:"ui divider"}),a("h3",{staticClass:"ui header"},[t._v(t._s(t.group.label))]),t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Error while saving settings")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t.result?a("div",{staticClass:"ui positive message"},[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("Settings updated successfully.")])],1):t._e(),t.group.help?a("p",[t._v(t._s(t.group.help))]):t._e(),t._l(t.settings,(function(e){return a("div",{staticClass:"ui field"},["CheckboxInput"!==e.field.widget.class?[a("label",{attrs:{for:e.identifier}},[t._v(t._s(e.verbose_name))]),e.help_text?a("p",[t._v(t._s(e.help_text))]):t._e()]:t._e(),"markdown"===e.fieldType?a("content-form",t._b({model:{value:t.values[e.identifier],callback:function(a){t.$set(t.values,e.identifier,a)},expression:"values[setting.identifier]"}},"content-form",e.fieldParams,!1)):"formBuilder"===e.fieldType?a("signup-form-builder",{attrs:{value:t.values[e.identifier],"signup-approval-enabled":t.values.moderation__signup_approval_enabled},on:{input:function(a){return t.set(e.identifier,a)}}}):"PasswordInput"===e.field.widget.class?a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui input",attrs:{id:e.identifier,name:e.identifier,type:"password"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,a.target.value)}}}):"TextInput"===e.field.widget.class?a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui input",attrs:{id:e.identifier,name:e.identifier,type:"text"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,a.target.value)}}}):"IntegerField"===e.field.class?a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.values[e.identifier],expression:"values[setting.identifier]",modifiers:{number:!0}}],staticClass:"ui input",attrs:{id:e.identifier,name:e.identifier,type:"number"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}}):"Textarea"===e.field.widget.class?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui input",attrs:{id:e.identifier,name:e.identifier,type:"text"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,a.target.value)}}}):"CheckboxInput"===e.field.widget.class?a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],attrs:{id:e.identifier,name:e.identifier,type:"checkbox"},domProps:{checked:Array.isArray(t.values[e.identifier])?t._i(t.values[e.identifier],null)>-1:t.values[e.identifier]},on:{change:function(a){var n=t.values[e.identifier],s=a.target,r=!!s.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);s.checked?o<0&&t.$set(t.values,e.identifier,n.concat([i])):o>-1&&t.$set(t.values,e.identifier,n.slice(0,o).concat(n.slice(o+1)))}else t.$set(t.values,e.identifier,r)}}}),a("label",{attrs:{for:e.identifier}},[t._v(t._s(e.verbose_name))]),e.help_text?a("p",[t._v(t._s(e.help_text))]):t._e()]):"MultipleChoiceField"===e.field.class?a("select",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui search selection dropdown",attrs:{id:e.identifier,multiple:""},on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.values,e.identifier,a.target.multiple?n:n[0])}}},t._l(e.additional_data.choices,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])})),0):"ImageWidget"===e.field.widget.class?a("div",[a("input",{ref:e.identifier,refInFor:!0,attrs:{id:e.identifier,type:"file"}}),t.values[e.identifier]?a("div",[a("div",{staticClass:"ui hidden divider"}),a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title/Noun"}},[t._v("Current image")])],1),t.values[e.identifier]?a("img",{staticClass:"ui image",attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"](t.values[e.identifier])}}):t._e()]):t._e()]):t._e()],2)})),a("button",{class:["ui",{loading:t.isLoading},"right","floated","success","button"],attrs:{type:"submit"}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Save")])],1)],2)},d=[],u=(a("4de4"),a("4160"),a("c975"),a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("ddb0"),a("5530")),v=a("ceb5"),p={props:{group:{type:Object,required:!0},settingsData:{type:Array,required:!0}},components:{SignupFormBuilder:function(){return a.e("signup-form-builder").then(a.bind(null,"56f3"))}},data:function(){return{values:{},result:null,errors:[],isLoading:!1}},created:function(){var t=this;this.settings.forEach((function(e){t.values[e.identifier]=e.value}))},methods:{save:function(){var t=this;this.isLoading=!0,t.errors=[],t.result=null;var e=t.values,a="application/json",n=this.fileSettings.map((function(t){return t.identifier}));n.length>0&&(a="multipart/form-data",e=new FormData,this.settings.forEach((function(a){if(n.indexOf(a.identifier)>-1){var s=t.$refs[a.identifier][0],r=s.files;console.log("ref",s,r),r&&r.length>0&&e.append(a.identifier,r[0])}else e.append(a.identifier,t.values[a.identifier])}))),i.a.post("instance/admin/settings/bulk/",e,{headers:{"Content-Type":a}}).then((function(e){t.result=!0,e.data.forEach((function(e){t.values[e.identifier]=e.value})),t.isLoading=!1,t.$store.dispatch("instance/fetchSettings")}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))},set:function(t,e){this.values=v["a"].cloneDeep(this.values),this.$set(this.values,t,e)}},computed:{settings:function(){var t={};return this.settingsData.forEach((function(e){t[e.identifier]=e})),this.group.settings.map((function(e){return Object(u["a"])(Object(u["a"])({},t[e.name]),{},{fieldType:e.fieldType,fieldParams:e.fieldParams||{}})}))},fileSettings:function(){return this.settings.filter((function(t){return"ImageWidget"===t.field.widget.class}))}}},m=p,h=a("2877"),b=Object(h["a"])(m,c,d,!1,null,null,null),g=b.exports,f={components:{SettingsGroup:g},data:function(){return{isLoading:!1,settingsData:null,current:null}},created:function(){var t=this;this.fetchSettings().then((function(e){t.$nextTick((function(){t.$store.state.route.hash&&t.scrollTo(t.$store.state.route.hash.substr(1)),l()("select.dropdown").dropdown()}))}))},methods:{scrollTo:function(t){this.current=t,document.getElementById(t).scrollIntoView()},fetchSettings:function(){var t=this;return t.isLoading=!0,i.a.get("instance/admin/settings/").then((function(e){t.settingsData=e.data,t.isLoading=!1}))}},computed:{labels:function(){return{settings:this.$pgettext("Head/Admin/Title","Instance settings")}},groups:function(){var t=this.$pgettext("Content/Admin/Menu","Instance information"),e=this.$pgettext("*/*/*/Noun","Sign-ups"),a=this.$pgettext("*/*/*/Noun","Security"),n=this.$pgettext("*/*/*/Noun","Music"),s=this.$pgettext("*/*/*","Channels"),r=this.$pgettext("*/*/*","Playlists"),i=this.$pgettext("*/*/*","Federation"),o=this.$pgettext("*/Moderation/*","Moderation"),l=this.$pgettext("Content/Admin/Menu","Subsonic"),c=this.$pgettext("Content/Home/Header","Statistics"),d=this.$pgettext("Content/Admin/Menu","User Interface");this.$pgettext("Content/Admin/Menu","Error reporting");return[{label:t,id:"instance",settings:[{name:"instance__name"},{name:"instance__short_description"},{name:"instance__long_description",fieldType:"markdown",fieldParams:{charLimit:null,permissive:!0}},{name:"instance__contact_email"},{name:"instance__rules",fieldType:"markdown",fieldParams:{charLimit:null,permissive:!0}},{name:"instance__terms",fieldType:"markdown",fieldParams:{charLimit:null,permissive:!0}},{name:"instance__banner"},{name:"instance__support_message",fieldType:"markdown",fieldParams:{charLimit:null,permissive:!0}}]},{label:e,id:"signup",settings:[{name:"users__registration_enabled"},{name:"moderation__signup_approval_enabled"},{name:"moderation__signup_form_customization",fieldType:"formBuilder"}]},{label:a,id:"security",settings:[{name:"common__api_authentication_required"},{name:"users__default_permissions"},{name:"users__upload_quota"}]},{label:n,id:"music",settings:[{name:"music__transcoding_enabled"},{name:"music__transcoding_cache_duration"}]},{label:s,id:"channels",settings:[{name:"audio__channels_enabled"},{name:"audio__max_channels"}]},{label:r,id:"playlists",settings:[{name:"playlists__max_tracks"}]},{label:o,id:"moderation",settings:[{name:"moderation__allow_list_enabled"},{name:"moderation__allow_list_public"},{name:"moderation__unauthenticated_report_types"}]},{label:i,id:"federation",settings:[{name:"federation__enabled"},{name:"federation__public_index"},{name:"federation__collection_page_size"},{name:"federation__music_cache_duration"},{name:"federation__actor_fetch_delay"}]},{label:l,id:"subsonic",settings:[{name:"subsonic__enabled"}]},{label:d,id:"ui",settings:[{name:"ui__custom_css"},{name:"instance__funkwhale_support_message_enabled"}]},{label:c,id:"statistics",settings:[{name:"instance__nodeinfo_stats_enabled"},{name:"instance__nodeinfo_private"}]}]}},watch:{settingsData:function(){var t=this;this.$nextTick((function(){l()(t.$el).find(".sticky").sticky({context:"#settings-grid"})}))}}},_=f,C=Object(h["a"])(_,n,s,!1,null,null,null);e["default"]=C.exports},e34a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.title))]),a("div",{staticClass:"ui hidden divider"}),a("albums-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"albums-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"albums-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"albums-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"albums-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"albums-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/albums/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.library.albums.detail",params:{id:e.obj.id}}}},[t._v(t._s(e.obj.title))])],1),a("td",[a("router-link",{attrs:{to:{name:"manage.library.artists.detail",params:{id:e.obj.artist.id}}}},[a("i",{staticClass:"wrench icon"}),a("span",{staticClass:"visually-hidden"},[t._v(t._s(t.labels.openModeration))])]),a("a",{staticClass:"discrete link",attrs:{href:"",title:e.obj.artist.name},on:{click:function(a){return a.preventDefault(),t.addSearchToken("artist",e.obj.artist.name)}}},[t._v(t._s(e.obj.artist.name))])],1),a("td",[e.obj.is_local?a("a",{staticClass:"ui tiny accent icon link label",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[a("i",{staticClass:"home icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/*/Short, Noun"}},[t._v("Local")])],1):[a("router-link",{attrs:{to:{name:"manage.moderation.domains.detail",params:{id:e.obj.domain}}}},[a("i",{staticClass:"wrench icon"}),a("span",{staticClass:"visually-hidden"},[t._v(t._s(t.labels.openModeration))])]),a("a",{staticClass:"discrete link",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.addSearchToken("domain",e.obj.domain)}}},[t._v(t._s(e.obj.domain))])]],2),a("td",[t._v(" "+t._s(e.obj.tracks_count)+" ")]),a("td",[e.obj.release_date?a("human-date",{attrs:{date:e.obj.release_date}}):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1)]}}],null,!1,3638854610)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Title")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artist")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/Moderation/*/Noun"}},[t._v("Domain")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Release date")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)])},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["release_date","release_date"],["name","name"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/library/albums/",{params:t}).then((function(t){e.result=t.data,e.isLoading=!1}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by domain, title, artist, MusicBrainz ID…"),openModeration:this.$pgettext("Content/Moderation/Verb","Open in moderation interface")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){var t=this.$pgettext("*/*/*/Verb","Delete"),e=this.$pgettext("Popup/*/Paragraph","The selected albums will be removed, as well as associated tracks, uploads, favorites and listening history. This action is irreversible.");return[{name:"delete",label:t,confirmationMessage:e,isDangerous:!0,allowAll:!1,confirmColor:"danger"}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},f=g,_=a("2877"),C=Object(_["a"])(f,r,i,!1,null,null,null),y=C.exports,x={components:{AlbumsTable:y},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{title:this.$pgettext("*/*/*","Albums")}}}},j=x,w=Object(_["a"])(j,n,s,!1,null,null,null);e["default"]=w.exports},e469:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.labels.title))]),a("div",{staticClass:"ui hidden divider"}),a("tags-table",{attrs:{"update-url":!0,"default-query":t.defaultQuery}})],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("label",{attrs:{for:"tags-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("form",{on:{submit:function(e){e.preventDefault(),t.search.query=t.$refs.search.value}}},[a("input",{ref:"search",attrs:{id:"tags-search",name:"search",type:"text",placeholder:t.labels.searchPlaceholder},domProps:{value:t.search.query}})])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"tags-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"tags-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"tags-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"tags-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])])])]),a("import-status-modal",{attrs:{upload:t.detailedUpload,show:t.showUploadDetailModal},on:{"update:show":function(e){t.showUploadDetailModal=e}}}),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/tags/action/",idField:"name",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("router-link",{attrs:{to:{name:"manage.library.tags.detail",params:{id:e.obj.name}}}},[t._v(" "+t._s(t._f("truncate")(e.obj.name,30,"…",!0))+" ")])],1),a("td",[t._v(" "+t._s(e.obj.artists_count)+" ")]),a("td",[t._v(" "+t._s(e.obj.albums_count)+" ")]),a("td",[t._v(" "+t._s(e.obj.tracks_count)+" ")]),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1)]}}],null,!1,1033472407)},[a("template",{slot:"header-cells"},[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artists")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Albums")])],1),a("th",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1)])],2):t._e()],1),a("div",[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t.result&&t.result.results.length>0?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-params":{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}}},[t._v(" Showing results %{ start }-%{ end } on %{ total } ")])],1):t._e()],1)],1)},i=[],o=(a("ac1f"),a("841c"),a("bc3a")),l=a.n(o),c=a("ceb5"),d=a("cadb"),u=a("3255"),v=a("1799"),p=a("414c"),m=a("20be"),h=a("64c4"),b=a("8bad"),g=a("fe5e"),f={mixins:[m["a"],h["a"],b["a"]],props:{filters:{type:Object,required:!1}},components:{Pagination:v["a"],ActionTable:p["a"],ImportStatusModal:g["a"]},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{detailedUpload:null,showUploadDetailModal:!1,time:d["a"],isLoading:!1,result:null,page:1,paginateBy:50,search:{query:this.defaultQuery,tokens:Object(u["c"])(Object(u["b"])(this.defaultQuery))},orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","creation_date"],["name","name"],["length","length"],["items_count","items_count"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=c["a"].merge({page:this.page,page_size:this.paginateBy,q:this.search.query,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],l.a.get("/manage/tags/",{params:t}).then((function(t){e.isLoading=!1,e.result=t.data}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},selectPage:function(t){this.page=t}},computed:{labels:function(){return{searchPlaceholder:this.$pgettext("Content/Search/Input.Placeholder","Search by name")}},actionFilters:function(){var t={q:this.search.query};return this.filters?c["a"].merge(t,this.filters):t},actions:function(){var t=this.$pgettext("*/*/*/Verb","Delete"),e=this.$pgettext("Popup/*/Paragraph","The selected tag will be removed and unlinked with existing content, if any. This action is irreversible.");return[{name:"delete",label:t,confirmationMessage:e,isDangerous:!0,allowAll:!1,confirmColor:"danger"}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}},_=f,C=a("2877"),y=Object(C["a"])(_,r,i,!1,null,null,null),x=y.exports,j={components:{TagsTable:x},props:{defaultQuery:{type:String,required:!1}},computed:{labels:function(){return{title:this.$pgettext("*/*/*/Noun","Tags")}}}},w=j,k=Object(C["a"])(w,n,s,!1,null,null,null);e["default"]=k.exports}}]);