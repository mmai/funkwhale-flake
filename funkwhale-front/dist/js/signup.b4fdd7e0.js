(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["signup"],{"25ba":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.error?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Login/Error message.Title"}},[t._v("We cannot log you in")])],1),a("ul",{staticClass:"list"},["invalid_credentials"==t.error&&t.$store.state.instance.settings.moderation.signup_approval_enabled.value?a("li",[a("translate",{attrs:{"translate-context":"Content/Login/Error message.List item/Call to action"}},[t._v("If you signed-up recently, you may need to wait before our moderation team review your account, or verify your email.")])],1):"invalid_credentials"==t.error?a("li",[a("translate",{attrs:{"translate-context":"Content/Login/Error message.List item/Call to action"}},[t._v("Please double-check your username/password couple is correct and ensure you verified your email.")])],1):a("li",[t._v(t._s(t.error))])])]):t._e(),t.$store.getters["instance/appDomain"]===t.$store.getters["instance/domain"]?[a("div",{staticClass:"field"},[a("label",{attrs:{for:"username-field"}},[a("translate",{attrs:{"translate-context":"Content/Login/Input.Label/Noun"}},[t._v("Username or email")]),t.showSignup?[t._v(" | "),a("router-link",{attrs:{to:{path:"/signup"}}},[a("translate",{attrs:{"translate-context":"*/Signup/Link/Verb"}},[t._v("Create an account")])],1)]:t._e()],2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],ref:"username",attrs:{required:"",name:"username",type:"text",id:"username-field",autofocus:"",placeholder:t.labels.usernamePlaceholder},domProps:{value:t.credentials.username},on:{input:function(e){e.target.composing||t.$set(t.credentials,"username",e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"password-field"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Password")]),t._v(" | "),a("router-link",{attrs:{to:{name:"auth.password-reset",query:{email:t.credentials.username}}}},[a("translate",{attrs:{"translate-context":"*/Login/*/Verb"}},[t._v("Reset your password")])],1)],1),a("password-input",{attrs:{"field-id":"password-field",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1)]:[a("p",[a("translate",{attrs:{"translate-context":"Contant/Auth/Paragraph","translate-params":{domain:t.$store.getters["instance/domain"]}}},[t._v("You will be redirected to %{ domain } to authenticate.")])],1)],a("button",{class:["ui",{loading:t.isLoading},"right","floated",t.buttonClasses,"button"],attrs:{type:"submit"}},[a("translate",{attrs:{"translate-context":"*/Login/*/Verb"}},[t._v("Login")])],1)],2)},s=[],r=(a("96cf"),a("1da1")),i=a("663d"),o={props:{next:{type:String,default:"/library"},buttonClasses:{type:String,default:"success"},showSignup:{type:Boolean,default:!0}},components:{PasswordInput:i["a"]},data:function(){return{credentials:{username:"",password:""},error:"",isLoading:!1}},created:function(){this.$store.state.auth.authenticated&&this.$router.push(this.next)},mounted:function(){this.$refs.username&&this.$refs.username.focus()},computed:{labels:function(){var t=this.$pgettext("Content/Login/Input.Placeholder","Enter your username or email");return{usernamePlaceholder:t}}},methods:{submit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.getters["instance/appDomain"]!==t.$store.getters["instance/domain"]){e.next=6;break}return e.next=3,t.submitSession();case 3:return e.abrupt("return",e.sent);case 6:return t.isLoading=!0,e.next=9,t.$store.dispatch("auth/oauthLogin",t.next);case 9:case"end":return e.stop()}}),e)})))()},submitSession:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.isLoading=!0,t.error="",n={username:t.credentials.username,password:t.credentials.password},t.$store.dispatch("auth/login",{credentials:n,next:t.next,onError:function(t){400===t.response.status?a.error="invalid_credentials":a.error=t.backendErrors[0]}}).then((function(t){a.isLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()}}},l=o,u=a("2877"),c=Object(u["a"])(l,n,s,!1,null,null,null);e["a"]=c.exports},6589:function(t,e,a){"use strict";var n,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.submitted?a("div",[a("div",{staticClass:"ui success message"},[t.signupRequiresApproval?a("p",[a("translate",{attrs:{"translate-context":"Content/Signup/Form/Paragraph"}},[t._v("Your account request was successfully submitted. You will be notified by email when our moderation team has reviewed your request.")])],1):a("p",[a("translate",{attrs:{"translate-context":"Content/Signup/Form/Paragraph"}},[t._v("Your account was successfully created. Please verify your email before trying to login.")])],1)]),a("h2",[a("translate",{attrs:{"translate-context":"Content/Login/Title/Verb"}},[t._v("Log in to your Funkwhale account")])],1),a("login-form",{attrs:{"button-classes":"basic success","show-signup":!1}})],1):a("form",{class:["ui",{loading:t.isLoadingInstanceSetting},"form"],on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.$store.state.instance.settings.users.registration_enabled.value?t.signupRequiresApproval?a("p",{staticClass:"ui message"},[a("translate",{attrs:{"translate-context":"Content/Signup/Form/Paragraph"}},[t._v("Registrations on this pod are open, but reviewed by moderators before approval.")])],1):t._e():a("p",{staticClass:"ui message"},[a("translate",{attrs:{"translate-context":"Content/Signup/Form/Paragraph"}},[t._v("Public registrations are not possible on this instance. You will need an invitation code to sign up.")])],1),t.formCustomization&&t.formCustomization.help_text?[a("rendered-description",{attrs:{content:t.formCustomization.help_text,"fetch-html":t.fetchDescriptionHtml,permissive:!0}}),a("div",{staticClass:"ui hidden divider"})]:t._e(),t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Signup/Form/Paragraph"}},[t._v("Your account cannot be created.")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"required field"},[a("label",{attrs:{for:"username-field"}},[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Username")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],ref:"username",attrs:{name:"username",required:"",id:"username-field",type:"text",autofocus:"",placeholder:t.labels.usernamePlaceholder},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"required field"},[a("label",{attrs:{for:"email-field"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Email")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",attrs:{id:"email-field",name:"email",required:"",type:"email",placeholder:t.labels.emailPlaceholder},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"required field"},[a("label",{attrs:{for:"password-field"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Password")])],1),a("password-input",{attrs:{"field-id":"password-field"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.$store.state.instance.settings.users.registration_enabled.value?t._e():a("div",{staticClass:"required field"},[a("label",{attrs:{for:"invitation-code"}},[a("translate",{attrs:{"translate-context":"Content/*/Input.Label"}},[t._v("Invitation code")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.invitation,expression:"invitation"}],attrs:{id:"invitation-code",required:"",type:"text",name:"invitation",placeholder:t.labels.placeholder},domProps:{value:t.invitation},on:{input:function(e){e.target.composing||(t.invitation=e.target.value)}}})]),t.signupRequiresApproval&&t.formCustomization&&t.formCustomization.fields&&t.formCustomization.fields.length>0?t._l(t.formCustomization.fields,(function(e,n){return a("div",{key:n,class:[{required:e.required},"field"]},[a("label",{attrs:{for:"custom-field-"+n}},[t._v(t._s(e.label))]),"long_text"===e.input_type?a("textarea",{attrs:{id:"custom-field-"+n,required:e.required,rows:"5"},domProps:{value:t.customFields[e.label]},on:{input:function(a){return t.$set(t.customFields,e.label,a.target.value)}}}):a("input",{attrs:{id:"custom-field-"+n,type:"text",required:e.required},domProps:{value:t.customFields[e.label]},on:{input:function(a){return t.$set(t.customFields,e.label,a.target.value)}}})])})):t._e(),a("button",{class:["ui",t.buttonClasses,{loading:t.isLoading}," right floated button"],attrs:{type:"submit"}},[a("translate",{attrs:{"translate-context":"Content/Signup/Button.Label"}},[t._v("Create my account")])],1)],2)},r=[],i=a("ade3"),o=a("bc3a"),l=a.n(o),u=a("3677"),c=a("25ba"),d=a("663d"),p={props:(n={defaultInvitation:{type:String,required:!1,default:null},next:{type:String,default:"/"},buttonClasses:{type:String,default:"success"},customization:{type:Object,default:null},fetchDescriptionHtml:{type:Boolean,default:!1}},Object(i["a"])(n,"fetchDescriptionHtml",{type:Boolean,default:!1}),Object(i["a"])(n,"signupApprovalEnabled",{type:Boolean,default:null,required:!1}),n),components:{LoginForm:c["a"],PasswordInput:d["a"]},data:function(){return{username:"",email:"",password:"",isLoadingInstanceSetting:!0,errors:[],isLoading:!1,invitation:this.defaultInvitation,customFields:{},submitted:!1}},created:function(){var t=this;this.$store.dispatch("instance/fetchSettings",{callback:function(){t.isLoadingInstanceSetting=!1}})},computed:{labels:function(){var t=this.$pgettext("Content/Signup/Form/Placeholder","Enter your invitation code (case insensitive)"),e=this.$pgettext("Content/Signup/Form/Placeholder","Enter your username"),a=this.$pgettext("Content/Signup/Form/Placeholder","Enter your email");return{usernamePlaceholder:e,emailPlaceholder:a,placeholder:t}},formCustomization:function(){return this.customization||this.$store.state.instance.settings.moderation.signup_form_customization.value},signupRequiresApproval:function(){return null===this.signupApprovalEnabled?this.$store.state.instance.settings.moderation.signup_approval_enabled.value:this.signupApprovalEnabled}},methods:{submit:function(){var t=this;t.isLoading=!0,this.errors=[];var e={username:this.username,password1:this.password,password2:this.password,email:this.email,invitation:this.invitation,request_fields:this.customFields};return l.a.post("auth/registration/",e).then((function(e){u["a"].default.info("Successfully created account"),t.submitted=!0,t.isLoading=!1}),(function(e){t.errors=e.backendErrors,t.isLoading=!1}))}}},m=p,f=a("2877"),v=Object(f["a"])(m,s,r,!1,null,null,null);e["a"]=v.exports},"663d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid action input"},[a("input",{attrs:{required:"",name:"password",type:t.passwordInputType,id:t.fieldId},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),a("button",{staticClass:"ui icon button",attrs:{type:"button",title:t.labels.title},on:{click:function(e){e.preventDefault(),t.showPassword=!t.showPassword}}},[a("i",{staticClass:"eye icon"})]),t.copyButton?a("button",{staticClass:"ui icon button",attrs:{type:"button",title:t.labels.copy},on:{click:function(e){return e.preventDefault(),t.copy(e)}}},[a("i",{staticClass:"copy icon"})]):t._e()])},s=[];function r(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style={position:"absolute",left:"-9999px"},document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}var i={props:["value","defaultShow","copyButton","fieldId"],data:function(){return{showPassword:this.defaultShow||!1}},computed:{labels:function(){return{title:this.$pgettext("Content/Settings/Button.Tooltip/Verb","Show/hide password"),copy:this.$pgettext("*/*/Button.Label/Short, Verb","Copy")}},passwordInputType:function(){return this.showPassword?"text":"password"}},methods:{copy:function(){r(this.value)}}},o=i,l=a("2877"),u=Object(l["a"])(o,n,s,!1,null,null,null);e["a"]=u.exports},b05b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("section",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[a("translate",{attrs:{"translate-context":"Content/Signup/Title"}},[t._v("Create a funkwhale account")])],1),a("signup-form",{attrs:{"default-invitation":t.defaultInvitation,next:t.next}})],1)])])},s=[],r=a("6589"),i={props:{defaultInvitation:{type:String,required:!1,default:null},next:{type:String,default:"/"}},components:{SignupForm:r["a"]},data:function(){return{username:"",email:"",password:"",isLoadingInstanceSetting:!0,errors:[],isLoading:!1,invitation:this.defaultInvitation}},computed:{labels:function(){var t=this.$pgettext("*/Signup/Title","Sign Up");return{title:t}}}},o=i,l=a("2877"),u=Object(l["a"])(o,n,s,!1,null,null,null);e["default"]=u.exports},f64d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.confirm,expression:"labels.confirm"}],staticClass:"main pusher"},[a("section",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[t._v(t._s(t.labels.confirm))]),t.success?a("div",{staticClass:"ui positive message"},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Signup/Message"}},[t._v("E-mail address confirmed")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Signup/Paragraph"}},[t._v("You can now use the service without limitations.")])],1),a("router-link",{attrs:{to:{name:"login"}}},[a("translate",{attrs:{"translate-context":"Content/Signup/Link/Verb"}},[t._v("Proceed to login")])],1)],1):a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Signup/Paragraph"}},[t._v("Could not confirm your e-mail address")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"field"},[a("label",{attrs:{for:"confirmation-code"}},[a("translate",{attrs:{"translate-context":"Content/Signup/Form.Label"}},[t._v("Confirmation code")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],attrs:{id:"confirmation-code",name:"confirmation-code",type:"text",required:""},domProps:{value:t.key},on:{input:function(e){e.target.composing||(t.key=e.target.value)}}})]),a("router-link",{attrs:{to:{path:"/login"}}},[a("translate",{attrs:{"translate-context":"Content/Signup/Link/Verb"}},[t._v("Return to login")])],1),a("button",{class:["ui",{loading:t.isLoading},"right","floated","success","button"],attrs:{type:"submit"}},[t._v(" "+t._s(t.labels.confirm))])],1)])])])},s=[],r=a("bc3a"),i=a.n(r),o={props:["defaultKey"],data:function(){return{isLoading:!1,errors:[],key:this.defaultKey,success:!1}},computed:{labels:function(){return{confirm:this.$pgettext("Head/Signup/Title","Confirm your e-mail address")}}},mounted:function(){this.key&&this.submit()},methods:{submit:function(){var t=this;t.isLoading=!0,t.errors=[];var e={key:this.key};return i.a.post("auth/registration/verify-email/",e).then((function(e){t.isLoading=!1,t.success=!0}),(function(e){t.errors=e.backendErrors,t.isLoading=!1}))}}},l=o,u=a("2877"),c=Object(u["a"])(l,n,s,!1,null,null,null);e["default"]=c.exports}}]);