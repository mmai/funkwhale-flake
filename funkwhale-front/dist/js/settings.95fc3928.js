(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{"00ee6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("section",{staticClass:"ui text container"},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title"}},[t._v("Account settings")])],1),a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submitSettings()}}},[t.settings.success?a("div",{staticClass:"ui positive message"},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Message"}},[t._v("Settings updated")])],1)]):t._e(),t.settings.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Error message.Title"}},[t._v("Your settings can't be updated")])],1),a("ul",{staticClass:"list"},t._l(t.settings.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t._l(t.orderedSettingsFields,(function(e){return a("div",{staticClass:"field"},[a("label",{attrs:{for:e.id}},[t._v(t._s(t.sharedLabels.fields[e.id].label))]),e.help?a("p",[t._v(t._s(t.sharedLabels.fields[e.id].help))]):t._e(),"dropdown"===e.type?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"f.value"}],staticClass:"ui dropdown",attrs:{id:e.id},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",a.target.multiple?s:s[0])}}},t._l(e.choices,(function(s){return a("option",{domProps:{value:s}},[t._v(t._s(t.sharedLabels.fields[e.id].choices[s]))])})),0):t._e(),"content"===e.type?a("content-form",{attrs:{"field-id":e.id},model:{value:e.value.text,callback:function(a){t.$set(e.value,"text",a)},expression:"f.value.text"}}):t._e()],1)})),a("button",{class:["ui",{loading:t.isLoading},"button"],attrs:{type:"submit"}},[a("translate",{attrs:{"translate-context":"Content/Settings/Button.Label/Verb"}},[t._v("Update settings")])],1)],2)]),a("section",{staticClass:"ui text container"},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title"}},[t._v("Avatar")])],1),a("div",{staticClass:"ui form"},[t.avatarErrors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Error message.Title"}},[t._v("Your avatar cannot be saved")])],1),a("ul",{staticClass:"list"},t._l(t.avatarErrors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t._v(" "+t._s()+" "),a("attachment-input",{attrs:{value:t.avatar.uuid,"initial-value":t.initialAvatar,required:!1},on:{input:function(e){return t.submitAvatar(e)},delete:function(e){t.avatar={uuid:null}}}},[a("translate",{attrs:{slot:"label","translate-context":"Content/Channel/*"},slot:"label"},[t._v("Avatar")])],1)],1)]),a("section",{staticClass:"ui text container"},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title/Verb"}},[t._v("Change my password")])],1),a("div",{staticClass:"ui message"},[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph'"}},[t._v("Changing your password will also change your Subsonic API password if you have requested one.")]),t._v(" "),a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("You will have to update your password on your clients that use this password.")])],1),a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submitPassword()}}},[t.passwordError?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Error message.Title"}},[t._v("Your password cannot be changed")])],1),a("ul",{staticClass:"list"},["invalid_credentials"==t.passwordError?a("li",[a("translate",{attrs:{"translate-context":"Content/Settings/Error message.List item/Call to action"}},[t._v("Please double-check your password is correct")])],1):t._e()])]):t._e(),a("div",{staticClass:"field"},[a("label",{attrs:{for:"old-password-field"}},[a("translate",{attrs:{"translate-context":"Content/Settings/Input.Label"}},[t._v("Old password")])],1),a("password-input",{attrs:{"field-id":"old-password-field",required:""},model:{value:t.old_password,callback:function(e){t.old_password=e},expression:"old_password"}})],1),a("div",{staticClass:"field"},[a("label",{attrs:{for:"new-password-field"}},[a("translate",{attrs:{"translate-context":"Content/Settings/Input.Label"}},[t._v("New password")])],1),a("password-input",{attrs:{"field-id":"new-password-field",required:""},model:{value:t.new_password,callback:function(e){t.new_password=e},expression:"new_password"}})],1),a("dangerous-button",{class:["ui",{loading:t.isLoading},"warning","button"],attrs:{action:t.submitPassword}},[a("translate",{attrs:{"translate-context":"Content/Settings/Button.Label"}},[t._v("Change password")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Title"}},[t._v("Change your password?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Popup/Settings/Paragraph"}},[t._v("Changing your password will have the following consequences:")])],1),a("ul",[a("li",[a("translate",{attrs:{"translate-context":"Popup/Settings/List item"}},[t._v("You will be logged out from this session and have to log in with the new one")])],1),a("li",[a("translate",{attrs:{"translate-context":"Popup/Settings/List item"}},[t._v("Your Subsonic password will be changed to a new, random one, logging you out from devices that used the old Subsonic password")])],1)])]),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Button.Label"}},[t._v("Disable access")])],1)],1)],1),a("div",{staticClass:"ui hidden divider"}),a("subsonic-token-form")],1),a("section",{staticClass:"ui text container",attrs:{id:"content-filters"}},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("i",{staticClass:"eye slash outline icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title/Noun"}},[t._v("Content filters")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("Content filters help you hide content you don't want to see on the service.")])],1),a("button",{staticClass:"ui icon button",on:{click:function(e){return t.$store.dispatch("moderation/fetchContentFilters")}}},[a("i",{staticClass:"refresh icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Short, Verb"}},[t._v("Refresh")])],1),a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title"}},[t._v("Hidden artists")])],1),a("table",{staticClass:"ui compact very basic unstackable table"},[a("thead",[a("tr",[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1),a("th")])]),a("tbody",t._l(t.$store.getters["moderation/artistFilters"](),(function(e){return a("tr",{key:e.uuid},[a("td",[a("router-link",{attrs:{to:{name:"library.artists.detail",params:{id:e.target.id}}}},[t._v(" "+t._s(e.target.name)+" ")])],1),a("td",[a("human-date",{attrs:{date:e.creation_date}})],1),a("td",[a("button",{staticClass:"ui basic tiny button",on:{click:function(a){return t.$store.dispatch("moderation/deleteContentFilter",e.uuid)}}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)])])})),0)])]),a("section",{staticClass:"ui text container",attrs:{id:"grants"}},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("i",{staticClass:"open lock icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title/Noun"}},[t._v("Authorized apps")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("This is the list of applications that have access to your account data.")])],1),a("button",{staticClass:"ui icon button",on:{click:function(e){return t.fetchApps()}}},[a("i",{staticClass:"refresh icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Short, Verb"}},[t._v("Refresh")])],1),t.apps.length>0?a("table",{staticClass:"ui compact very basic unstackable table"},[a("thead",[a("tr",[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Application")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Permissions")])],1),a("th")])]),a("tbody",t._l(t.apps,(function(e){return a("tr",{key:e.client_id},[a("td",[t._v(" "+t._s(e.name)+" ")]),a("td",[t._v(" "+t._s(e.scopes)+" ")]),a("td",[a("dangerous-button",{staticClass:"ui tiny danger button",on:{confirm:function(a){return t.revokeApp(e.client_id)}}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Revoke")]),a("p",{directives:[{name:"translate",rawName:"v-translate",value:{application:e.name},expression:"{application: app.name}"}],attrs:{slot:"modal-header","translate-context":"Popup/Settings/Title"},slot:"modal-header"},[t._v('Revoke access for application "%{ application }"?')]),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Paragraph"}},[t._v("This will prevent this application from accessing the service on your behalf.")])],1),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/Settings/Button.Label/Verb"}},[t._v("Revoke access")])],1)],1)],1)])})),0)]):a("empty-state",[a("translate",{attrs:{slot:"title","translate-context":"Content/Applications/Paragraph"},slot:"title"},[t._v(" You don't have any application connected with your account. ")]),a("translate",{attrs:{"translate-context":"Content/Applications/Paragraph"}},[t._v(" If you authorize third-party applications to access your data, those applications will be listed here. ")])],1)],1),a("section",{staticClass:"ui text container",attrs:{id:"apps"}},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("i",{staticClass:"code icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title/Noun"}},[t._v("Your applications")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("This is the list of applications that you have created.")])],1),a("router-link",{staticClass:"ui success button",attrs:{to:{name:"settings.applications.new"}}},[a("translate",{attrs:{"translate-context":"Content/Settings/Button.Label"}},[t._v("Create a new application")])],1),t.ownedApps.length>0?a("table",{staticClass:"ui compact very basic unstackable table"},[a("thead",[a("tr",[a("th",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Application")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Scopes")])],1),a("th",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Creation date")])],1),a("th")])]),a("tbody",t._l(t.ownedApps,(function(e){return a("tr",{key:e.client_id},[a("td",[a("router-link",{attrs:{to:{name:"settings.applications.edit",params:{id:e.client_id}}}},[t._v(" "+t._s(e.name)+" ")])],1),a("td",[t._v(" "+t._s(e.scopes)+" ")]),a("td",[a("human-date",{attrs:{date:e.created}})],1),a("td",[a("router-link",{staticClass:"ui tiny success button",attrs:{to:{name:"settings.applications.edit",params:{id:e.client_id}}}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1),a("dangerous-button",{staticClass:"ui tiny danger button",on:{confirm:function(a){return t.deleteApp(e.client_id)}}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),a("p",{directives:[{name:"translate",rawName:"v-translate",value:{application:e.name},expression:"{application: app.name}"}],attrs:{slot:"modal-header","translate-context":"Popup/Settings/Title"},slot:"modal-header"},[t._v('Delete application "%{ application }"?')]),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Paragraph"}},[t._v("This will permanently delete the application and all the associated tokens.")])],1),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/Settings/Button.Label/Verb"}},[t._v("Delete application")])],1)],1)],1)])})),0)]):a("empty-state",[a("translate",{attrs:{slot:"title","translate-context":"Content/Applications/Paragraph"},slot:"title"},[t._v(" You don't have any configured application yet. ")]),a("translate",{attrs:{"translate-context":"Content/Applications/Paragraph"}},[t._v(" Create one to integrate Funkwhale with third-party applications. ")])],1)],1),a("section",{staticClass:"ui text container",attrs:{id:"plugins"}},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("i",{staticClass:"code icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"Content/Settings/Title/Noun"}},[t._v("Plugins")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("Use plugins to extend Funkwhale and get additional features.")])],1),a("router-link",{staticClass:"ui success button",attrs:{to:{name:"settings.plugins"}}},[a("translate",{attrs:{"translate-context":"Content/Settings/Button.Label"}},[t._v("Manage plugins")])],1)],1),a("section",{staticClass:"ui text container"},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("i",{staticClass:"comment icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label"}},[t._v("Change my email address")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph'"}},[t._v("Change the email address associated with your account. We will send a confirmation to the new address.")])],1),a("p",[a("translate",{attrs:{"translate-params":{email:t.$store.state.auth.profile.email},"translate-context":"Content/Settings/Paragraph'"}},[t._v("Your current email address is %{ email }.")])],1),a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.changeEmail(e)}}},[t.changeEmailErrors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Error message.Title"}},[t._v("We cannot change your email address")])],1),a("ul",{staticClass:"list"},t._l(t.changeEmailErrors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"field"},[a("label",{attrs:{for:"new-email"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("New email")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newEmail,expression:"newEmail"}],attrs:{id:"new-email",required:"",type:"email"},domProps:{value:t.newEmail},on:{input:function(e){e.target.composing||(t.newEmail=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"current-password-field-email"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Password")])],1),a("password-input",{attrs:{"field-id":"current-password-field-email",required:""},model:{value:t.emailPassword,callback:function(e){t.emailPassword=e},expression:"emailPassword"}})],1),a("button",{staticClass:"ui button",attrs:{type:"submit"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Update")])],1)])]),a("section",{staticClass:"ui text container"},[a("div",{staticClass:"ui hidden divider"}),a("h2",{staticClass:"ui header"},[a("i",{staticClass:"trash icon"}),a("div",{staticClass:"content"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label"}},[t._v("Delete my account")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph'"}},[t._v("You can permanently and irreversibly delete your account and all the associated data using the form below. You will be asked for confirmation.")])],1),a("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph'"}},[t._v("Your account will be deleted from our servers within a few minutes. We will also notify other servers who may have a copy of some of your data so they can proceed to deletion. Please note that some of these servers may be offline or unwilling to comply though.")])],1),a("div",{staticClass:"ui form"},[t.accountDeleteErrors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Error message.Title"}},[t._v("We cannot delete your account")])],1),a("ul",{staticClass:"list"},t._l(t.accountDeleteErrors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"field"},[a("label",{attrs:{for:"current-password-field"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Password")])],1),a("password-input",{attrs:{"field-id":"current-password-field",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("dangerous-button",{class:["ui",{loading:t.isDeletingAccount},{disabled:!t.password},"danger","button"],attrs:{action:t.deleteAccount}},[a("translate",{attrs:{"translate-context":"*/*/Button.Label"}},[t._v("Delete my accountâ€¦")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Title"}},[t._v("Do you want to delete your account?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Popup/Settings/Paragraph"}},[t._v("This is irreversible and will permanently remove your data from our servers. You will we immediatly logged out.")])],1)]),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label"}},[t._v("Delete my account")])],1)],1)],1)])])])},n=[],i=(a("4de4"),a("4160"),a("d81d"),a("159b"),a("5530")),r=a("1157"),o=a.n(r),l=a("bc3a"),c=a.n(l),u=a("3677"),d=a("663d"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.requestNewToken()}}},[a("h2",[a("translate",{attrs:{"translate-context":"Content/Settings/Title"}},[t._v("Subsonic API password")])],1),t.subsonicEnabled?t._e():a("p",{staticClass:"ui message"},[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("The Subsonic API is not available on this Funkwhale instance.")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph'"}},[t._v("Funkwhale is compatible with other music players that support the Subsonic API.")]),t._v(" "),a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("You can use those to enjoy your playlist and music in offline mode, on your smartphone or tablet, for instance.")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Settings/Paragraph"}},[t._v("However, accessing Funkwhale from those clients require a separate password you can set below.")])],1),a("p",[a("a",{attrs:{href:"https://docs.funkwhale.audio/users/apps.html#subsonic-compatible-clients",target:"_blank"}},[a("translate",{attrs:{"translate-context":"Content/Settings/Link"}},[t._v("Discover how to use Funkwhale from other apps")])],1)]),t.success?a("div",{staticClass:"ui positive message"},[a("h4",{staticClass:"header"},[t._v(t._s(t.successMessage))])]):t._e(),t.subsonicEnabled&&t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Error")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t.subsonicEnabled?[t.token?a("div",{staticClass:"field"},[a("label",{staticClass:"visually-hidden",attrs:{for:"subsonic-password"}},[t._v(t._s(t.labels.subsonicField))]),a("password-input",{key:t.token,ref:"passwordInput",attrs:{"field-id":"subsonic-password","copy-button":!0,"default-show":t.showToken},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1):t._e(),t.token?a("dangerous-button",{class:["ui",{loading:t.isLoading},"button"],attrs:{action:t.requestNewToken}},[a("translate",{attrs:{"translate-context":"*/Settings/Button.Label/Verb"}},[t._v("Request a new password")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Title"}},[t._v("Request a new Subsonic API password?")])],1),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Paragraph"}},[t._v("This will log you out from existing devices that use the current password.")])],1),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/Settings/Button.Label/Verb"}},[t._v("Request a new password")])],1)],1):a("button",{class:["ui",{loading:t.isLoading},"button"],attrs:{color:""},on:{click:t.requestNewToken}},[a("translate",{attrs:{"translate-context":"Content/Settings/Button.Label/Verb"}},[t._v("Request a password")])],1),t.token?a("dangerous-button",{class:["ui",{loading:t.isLoading},"warning","button"],attrs:{action:t.disable}},[a("translate",{attrs:{"translate-context":"Content/Settings/Button.Label/Verb"}},[t._v("Disable Subsonic access")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Title"}},[t._v("Disable Subsonic API access?")])],1),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Paragraph"}},[t._v("This will completely disable access to the Subsonic API using from account.")])],1),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"Popup/Settings/Button.Label"}},[t._v("Disable access")])],1)],1):t._e()]:t._e()],2)},h=[],v={components:{PasswordInput:d["a"]},data:function(){return{token:null,errors:[],success:!1,isLoading:!1,successMessage:"",showToken:!1}},created:function(){this.fetchToken()},methods:{fetchToken:function(){this.success=!1,this.errors=[],this.isLoading=!0;var t=this,e="users/".concat(this.$store.state.auth.username,"/subsonic-token/");return c.a.get(e).then((function(e){t.token=e.data["subsonic_api_token"],t.isLoading=!1}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))},requestNewToken:function(){this.successMessage=this.$pgettext("Content/Settings/Message","Password updated"),this.success=!1,this.errors=[],this.isLoading=!0;var t=this,e="users/".concat(this.$store.state.auth.username,"/subsonic-token/");return c.a.post(e,{}).then((function(e){t.showToken=!0,t.token=e.data["subsonic_api_token"],t.isLoading=!1,t.success=!0}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))},disable:function(){this.successMessage=this.$pgettext("Content/Settings/Message","Access disabled"),this.success=!1,this.errors=[],this.isLoading=!0;var t=this,e="users/".concat(this.$store.state.auth.username,"/subsonic-token/");return c.a.delete(e).then((function(e){t.isLoading=!1,t.token=null,t.success=!0}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))}},computed:{subsonicEnabled:function(){return this.$store.state.instance.settings.subsonic.enabled.value},labels:function(){return{subsonicField:this.$pgettext("Content/Password/Input.label","Your subsonic API password")}}}},m=v,g=a("2877"),f=Object(g["a"])(m,p,h,!1,null,null,null),b=f.exports,_=a("64c4"),C=a("c3b4"),x={mixins:[_["a"]],components:{PasswordInput:d["a"],SubsonicTokenForm:b,AttachmentInput:C["a"]},data:function(){var t={old_password:"",new_password:"",avatar:Object(i["a"])({},this.$store.state.auth.profile.avatar||{uuid:null}),passwordError:"",password:"",isLoading:!1,isLoadingAvatar:!1,isDeletingAccount:!1,changeEmailErrors:[],isChangingEmail:!1,newEmail:null,emailPassword:null,accountDeleteErrors:[],avatarErrors:[],apps:[],ownedApps:[],settings:{success:!1,errors:[],order:["summary","privacy_level"],fields:{summary:{type:"content",initial:this.$store.state.auth.profile.summary||{text:"",content_type:"text/markdown"}},privacy_level:{type:"dropdown",initial:this.$store.state.auth.profile.privacy_level,choices:["me","instance"]}}}};return t.initialAvatar=t.avatar.uuid,t.settings.order.forEach((function(e){t.settings.fields[e].value=t.settings.fields[e].initial,t.settings.fields[e].id=e})),t},created:function(){this.fetchApps(),this.fetchOwnedApps()},mounted:function(){o()("select.dropdown").dropdown()},methods:{submitSettings:function(){this.settings.success=!1,this.settings.errors=[];var t=this,e=this.settingsValues,a="users/".concat(this.$store.state.auth.username,"/");return c.a.patch(a,e).then((function(e){return u["a"].default.info("Updated settings successfully"),t.settings.success=!0,c.a.get("users/me/").then((function(e){t.$store.dispatch("auth/updateProfile",e.data)}))}),(function(e){u["a"].default.error("Error while updating settings"),t.isLoading=!1,t.settings.errors=e.backendErrors}))},fetchApps:function(){this.apps=[];var t=this,e="oauth/grants/";return c.a.get(e).then((function(e){t.apps=e.data}),(function(t){}))},fetchOwnedApps:function(){this.ownedApps=[];var t=this,e="oauth/apps/";return c.a.get(e).then((function(e){t.ownedApps=e.data.results}),(function(t){}))},revokeApp:function(t){var e=this,a="oauth/grants/".concat(t,"/");return c.a.delete(a).then((function(a){e.apps=e.apps.filter((function(e){return e.client_id!=t}))}),(function(t){}))},deleteApp:function(t){var e=this,a="oauth/apps/".concat(t,"/");return c.a.delete(a).then((function(a){e.ownedApps=e.ownedApps.filter((function(e){return e.client_id!=t}))}),(function(t){}))},submitAvatar:function(t){var e=this;this.isLoadingAvatar=!0,this.avatarErrors=[];var a=this;c.a.patch("users/".concat(this.$store.state.auth.username,"/"),{avatar:t}).then((function(t){e.isLoadingAvatar=!1,a.avatar=t.data.avatar,a.$store.commit("auth/avatar",t.data.avatar)}),(function(t){a.isLoadingAvatar=!1,a.avatarErrors=t.backendErrors}))},submitPassword:function(){var t=this;t.isLoading=!0,this.error="";var e={old_password:this.old_password,new_password1:this.new_password,new_password2:this.new_password},a="auth/registration/change-password/";return c.a.post(a,e).then((function(e){u["a"].default.info("Password successfully changed"),t.$router.push({name:"profile.overview",params:{username:t.$store.state.auth.username}})}),(function(e){400===e.response.status?t.passwordError="invalid_credentials":t.passwordError="unknown_error",t.isLoading=!1}))},deleteAccount:function(){this.isDeletingAccount=!0,this.accountDeleteErrors=[];var t=this,e={confirm:!0,password:this.password};c.a.delete("users/me/",{data:e}).then((function(e){t.isDeletingAccount=!1;var a=t.$pgettext("*/Auth/Message","Your deletion request was submitted, your account and content will be deleted shortly");t.$store.commit("ui/addMessage",{content:a,date:new Date}),t.$store.dispatch("auth/logout")}),(function(e){t.isDeletingAccount=!1,t.accountDeleteErrors=e.backendErrors}))},changeEmail:function(){this.isChangingEmail=!0,this.changeEmailErrors=[];var t=this,e={password:this.emailPassword,email:this.newEmail};c.a.post("users/users/change-email/",e).then((function(e){t.isChangingEmail=!1,t.newEmail=null,t.emailPassword=null;var a=t.$pgettext("*/Auth/Message","Your email has been changed, please check your inbox for our confirmation message.");t.$store.commit("ui/addMessage",{content:a,date:new Date})}),(function(e){t.isChangingEmail=!1,t.changeEmailErrors=e.backendErrors}))}},computed:{labels:function(){return{title:this.$pgettext("Head/Settings/Title","Account Settings")}},orderedSettingsFields:function(){var t=this;return this.settings.order.map((function(e){return t.settings.fields[e]}))},settingsValues:function(){var t=this,e={};return this.settings.order.forEach((function(a){var s=t.settings.fields[a];e[a]=s.value,"summary"!==a||s.value.text||(e[a]=null)})),e}}},w=x,y=Object(g["a"])(w,s,n,!1,null,null,null);e["default"]=y.exports},"0155":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("section",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[a("i",{staticClass:"lock open icon"}),a("translate",{attrs:{"translate-context":"Content/Auth/Title/Verb"}},[t._v("Authorize third-party app")])],1),t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[t.application?a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Moderation/Error message"}},[t._v("Error while authorizing application")])],1):a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Moderation/Error message"}},[t._v("Error while fetching application data")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t.application&&!t.code?a("form",{class:["ui",{loading:t.isLoading},"form"],on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("h3",[a("translate",{attrs:{"translate-context":"Content/Auth/Title","translate-params":{app:t.application.name}}},[t._v("%{ app } wants to access your Funkwhale account")])],1),t._l(t.topicScopes,(function(e){return a("h4",{staticClass:"ui header vertical-align"},[e.write&&!e.read?a("span",{class:["ui","basic","right floated","tiny","vertically-spaced component-label label"]},[a("i",{staticClass:"pencil icon"}),a("translate",{attrs:{"translate-context":"Content/Auth/Label/Noun"}},[t._v("Write-only")])],1):!e.write&&e.read?a("span",{class:["ui","basic","right floated","tiny","vertically-spaced component-label label"]},[a("translate",{attrs:{"translate-context":"Content/Auth/Label/Noun"}},[t._v("Read-only")])],1):e.write&&e.read?a("span",{class:["ui","basic","right floated","tiny","vertically-spaced component-label label"]},[a("i",{staticClass:"pencil icon"}),a("translate",{attrs:{"translate-context":"Content/Auth/Label/Noun"}},[t._v("Full access")])],1):t._e(),a("i",{class:[e.icon,"icon"]}),a("div",{staticClass:"content"},[t._v(" "+t._s(e.label)+" "),a("div",{staticClass:"sub header"},[t._v(" "+t._s(e.description)+" ")])])])})),t.unknownRequestedScopes.length>0?a("div",[a("p",[a("strong",[a("translate",{attrs:{"translate-context":"Content/Auth/Paragraph"}},[t._v("The application is also requesting the following unknown permissions:")])],1)]),t._l(t.unknownRequestedScopes,(function(e){return a("ul",[a("li",[t._v(t._s(e))])])}))],2):t._e(),a("button",{staticClass:"ui success labeled icon button",attrs:{type:"submit"}},[a("i",{staticClass:"lock open icon"}),a("translate",{attrs:{"translate-context":"Content/Signup/Button.Label/Verb","translate-params":{app:t.application.name}}},[t._v("Authorize %{ app }")])],1),"urn:ietf:wg:oauth:2.0:oob"===t.redirectUri?a("p",{directives:[{name:"translate",rawName:"v-translate"}],key:"1",attrs:{"translate-context":"Content/Auth/Paragraph"}},[t._v(" You will be shown a code to copy-paste in the application.")]):a("p",{directives:[{name:"translate",rawName:"v-translate",value:{url:t.redirectUri},expression:"{url: redirectUri}"}],key:"2",attrs:{"translate-context":"Content/Auth/Paragraph","translate-params":{url:t.redirectUri}}},[t._v("You will be redirected to "),a("strong",[t._v("%{ url }")])])],2):t.code?a("div",[a("p",[a("strong",[a("translate",{attrs:{"translate-context":"Content/Auth/Paragraph"}},[t._v("Copy-paste the following code in the application:")])],1)]),a("copy-input",{attrs:{value:t.code}})],1):t._e()])])])},n=[],i=(a("a4d3"),a("e01a"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("ac1f"),a("1276"),a("159b"),a("64c4")),r=a("bc3a"),o=a.n(r),l=a("025e"),c={mixins:[i["a"]],props:["clientId","redirectUri","scope","responseType","nonce","state"],data:function(){return{application:null,isLoading:!1,errors:[],code:null,knownScopes:[{id:"profile",icon:"user"},{id:"libraries",icon:"book"},{id:"favorites",icon:"heart"},{id:"listenings",icon:"music"},{id:"follows",icon:"users"},{id:"playlists",icon:"list"},{id:"radios",icon:"rss"},{id:"filters",icon:"eye slash"},{id:"notifications",icon:"bell"},{id:"edits",icon:"pencil alternate"},{id:"security",icon:"lock"},{id:"reports",icon:"warning sign"}]}},created:function(){Object(l["a"])(this.$store,this.$router),this.clientId&&this.fetchApplication()},computed:{labels:function(){return{title:this.$pgettext("Head/Authorize/Title","Allow application")}},requestedScopes:function(){return(this.scope||"").split(" ")},supportedScopes:function(){var t=["read","write"];return this.knownScopes.forEach((function(e){t.push("read:".concat(e.id)),t.push("write:".concat(e.id))})),t},unknownRequestedScopes:function(){var t=this;return this.requestedScopes.filter((function(e){return t.supportedScopes.indexOf(e)<0}))},topicScopes:function(){var t=this,e=this.requestedScopes,a=!1,s=!1;return e.indexOf("read")>-1&&(s=!0),e.indexOf("write")>-1&&(a=!0),this.knownScopes.map((function(n){var i=n.id;return{id:i,icon:n.icon,label:t.sharedLabels.scopes[n.id].label,description:t.sharedLabels.scopes[n.id].description,read:s||e.indexOf("read:".concat(i))>-1,write:a||e.indexOf("write:".concat(i))>-1}})).filter((function(t){return t.read||t.write}))}},methods:{fetchApplication:function(){this.isLoading=!0;var t=this;o.a.get("oauth/apps/".concat(this.clientId,"/")).then((function(e){t.isLoading=!1,t.application=e.data}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))},submit:function(){this.isLoading=!0;var t=this,e=new FormData;e.set("redirect_uri",this.redirectUri),e.set("scope",this.scope),e.set("allow",!0),e.set("client_id",this.clientId),e.set("response_type",this.responseType),e.set("state",this.state),e.set("nonce",this.nonce),o.a.post("oauth/authorize/",e,{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}}).then((function(e){"urn:ietf:wg:oauth:2.0:oob"===t.redirectUri?(t.isLoading=!1,t.code=e.data.code):window.location.href=e.data.redirect_uri}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,s,n,!1,null,null,null);e["default"]=p.exports},"64c4":function(t,e,a){"use strict";var s,n,i={computed:{sharedLabels:function(){return{fields:{privacy_level:{label:this.$pgettext("Content/Settings/Dropdown.Label/Noun","Activity visibility"),help:this.$pgettext("Content/Settings/Dropdown.Help text","Determine the visibility level of your activity"),choices:{me:this.$pgettext("Content/Settings/Dropdown","Nobody except me"),instance:this.$pgettext("Content/Settings/Dropdown","Everyone on this instance"),everyone:this.$pgettext("Content/Settings/Dropdown","Everyone, across all instances")},shortChoices:{me:this.$pgettext("Content/Settings/Dropdown/Short","Private"),instance:this.$pgettext("Content/Settings/Dropdown/Short","Instance"),everyone:this.$pgettext("Content/Settings/Dropdown/Short","Everyone")}},import_status:{detailTitle:this.$pgettext("Content/Library/Link.Title","Click to display more information about the import process for this upload"),choices:{skipped:{label:this.$pgettext("Content/Library/*","Skipped"),help:this.$pgettext("Content/Library/Help text","This track is already present in one of your libraries")},draft:{label:this.$pgettext("Content/Library/*/Short","Draft"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been scheduled for processing yet")},pending:{label:this.$pgettext("Content/Library/*/Short","Pending"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been processed by the server yet")},errored:{label:this.$pgettext("Content/Library/Table/Short","Errored"),help:this.$pgettext("Content/Library/Help text","This track could not be processed, please make sure it is tagged correctly")},finished:{label:this.$pgettext("Content/Library/*","Finished"),help:this.$pgettext("Content/Library/Help text","Imported")}}},report_type:{label:this.$pgettext("*/*/*","Category"),choices:{takedown_request:this.$pgettext("Content/Moderation/Dropdown","Takedown request"),invalid_metadata:this.$pgettext("Popup/Import/Error.Label","Invalid metadata"),illegal_content:this.$pgettext("Content/Moderation/Dropdown","Illegal content"),offensive_content:this.$pgettext("Content/Moderation/Dropdown","Offensive content"),other:this.$pgettext("Content/Moderation/Dropdown","Other")}},summary:{label:this.$pgettext("Content/Account/*","Bio")},content_category:{label:this.$pgettext("Content/*/Dropdown.Label/Noun","Content category"),choices:{podcast:this.$pgettext("Content/*/Dropdown","Podcast"),music:this.$pgettext("*/*/*","Music"),other:this.$pgettext("*/*/*","Other")}}},filters:{creation_date:this.$pgettext("Content/*/*/Noun","Creation date"),release_date:this.$pgettext("Content/*/*/Noun","Release date"),accessed_date:this.$pgettext("Content/*/*/Noun","Accessed date"),first_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","First seen date"),last_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","Last seen date"),modification_date:this.$pgettext("Content/Playlist/Dropdown/Noun","Modification date"),expiration_date:this.$pgettext("Content/Admin/Table.Label/Noun","Expiration date"),track_title:this.$pgettext("Content/*/Dropdown/Noun","Track name"),album_title:this.$pgettext("Content/*/Dropdown/Noun","Album name"),artist_name:this.$pgettext("Content/*/Dropdown/Noun","Artist name"),name:this.$pgettext("*/*/*/Noun","Name"),length:this.$pgettext("*/*/*/Noun","Length"),items_count:this.$pgettext("*/*/*/Noun","Items"),size:this.$pgettext("Content/*/*/Noun","Size"),bitrate:this.$pgettext("Content/Track/*/Noun","Bitrate"),duration:this.$pgettext("Content/*/*","Duration"),date_joined:this.$pgettext("Content/Admin/Table.Label/Noun","Sign-up date"),last_activity:this.$pgettext("Content/Profile/Table.Label/Short, Noun (Value is a date)","Last activity"),username:this.$pgettext("Content/*/*","Username"),domain:this.$pgettext("Content/Moderation/*/Noun","Domain"),users:this.$pgettext("*/*/*/Noun","Users"),received_messages:this.$pgettext("Content/Moderation/*/Noun","Received messages"),uploads:this.$pgettext("*/*/*","Uploads"),followers:this.$pgettext("Content/Federation/*/Noun","Followers")},scopes:{profile:{label:this.$pgettext("Content/OAuth Scopes/Label","Profile"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to email, username, and profile information")},libraries:{label:this.$pgettext("Content/OAuth Scopes/Label","Libraries and uploads"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to audio files, libraries, artists, albums and tracks")},favorites:{label:this.$pgettext("Sidebar/Favorites/List item.Link/Noun","Favorites"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to favorites")},listenings:{label:this.$pgettext("*/*/*/Noun","Listenings"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to listening history")},follows:{label:this.$pgettext("Content/OAuth Scopes/Label","Follows"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to follows")},playlists:{label:this.$pgettext("*/*/*","Playlists"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to playlists")},radios:{label:this.$pgettext("*/*/*","Radios"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to radios")},filters:{label:this.$pgettext("Content/Settings/Title/Noun","Content filters"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to content filters")},notifications:{label:this.$pgettext("*/Notifications/*","Notifications"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to notifications")},edits:{label:this.$pgettext("*/Admin/*/Noun","Edits"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to edits")},security:{label:this.$pgettext("*/Admin/*/Noun","Security"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to security settings such as password and authorization")},reports:{label:this.$pgettext("*/Moderation/*/Noun","Reports"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to moderation reports")}}}}}},r=i,o=a("2877"),l=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},"663d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid action input"},[a("input",{attrs:{required:"",name:"password",type:t.passwordInputType,id:t.fieldId},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),a("button",{staticClass:"ui icon button",attrs:{type:"button",title:t.labels.title},on:{click:function(e){e.preventDefault(),t.showPassword=!t.showPassword}}},[a("i",{staticClass:"eye icon"})]),t.copyButton?a("button",{staticClass:"ui icon button",attrs:{type:"button",title:t.labels.copy},on:{click:function(e){return e.preventDefault(),t.copy(e)}}},[a("i",{staticClass:"copy icon"})]):t._e()])},n=[];function i(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style={position:"absolute",left:"-9999px"},document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}var r={props:["value","defaultShow","copyButton","fieldId"],data:function(){return{showPassword:this.defaultShow||!1}},computed:{labels:function(){return{title:this.$pgettext("Content/Settings/Button.Tooltip/Verb","Show/hide password"),copy:this.$pgettext("*/*/Button.Label/Short, Verb","Copy")}},passwordInputType:function(){return this.showPassword?"text":"password"}},methods:{copy:function(){i(this.value)}}},o=r,l=a("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"6b26":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("section",{staticClass:"ui text container"},[a("router-link",{attrs:{to:{name:"settings"}}},[a("translate",{attrs:{"translate-context":"Content/Applications/Link"}},[t._v("Back to settings")])],1),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Settings/Button.Label"}},[t._v("Create a new application")])],1),a("application-form",{attrs:{defaults:t.defaults},on:{created:function(e){return t.$router.push({name:"settings.applications.edit",params:{id:e.client_id}})}}})],1)])])},n=[],i=(a("b0c0"),a("e175")),r={props:["name","redirect_uris","scopes"],components:{ApplicationForm:i["a"]},data:function(){return{application:null,isLoading:!1,defaults:{name:this.name,redirect_uris:this.redirect_uris,scopes:this.scopes}}},computed:{labels:function(){return{title:this.$pgettext("Content/Settings/Button.Label","Create a new application")}}}},o=r,l=a("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=c.exports},"8dfc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("section",{staticClass:"ui text container"},[t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):[a("router-link",{attrs:{to:{name:"settings"}}},[a("translate",{attrs:{"translate-context":"Content/Applications/Link"}},[t._v("Back to settings")])],1),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Applications/Title"}},[t._v("Application details")])],1),a("div",{staticClass:"ui form"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Application/Paragraph/"}},[t._v(" Application ID and secret are really sensitive values and must be treated like passwords. Do not share those with anyone else. ")])],1),a("div",{staticClass:"field"},[a("label",{attrs:{for:"copy-id"}},[a("translate",{attrs:{"translate-context":"Content/Applications/Label"}},[t._v("Application ID")])],1),a("copy-input",{attrs:{id:"copy-id",value:t.application.client_id}})],1),a("div",{staticClass:"field"},[a("label",{attrs:{for:"copy-secret"}},[a("translate",{attrs:{"translate-context":"Content/Applications/Label"}},[t._v("Application secret")])],1),a("copy-input",{attrs:{id:"copy-secret",value:t.application.client_secret}})],1),void 0!=t.application.token?a("div",{staticClass:"field"},[a("label",{attrs:{for:"copy-secret"}},[a("translate",{attrs:{"translate-context":"Content/Applications/Label"}},[t._v("Access token")])],1),a("copy-input",{attrs:{id:"copy-secret",value:t.application.token}}),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.refreshToken(e)}}},[a("i",{staticClass:"refresh icon"}),a("translate",{attrs:{"translate-context":"Content/Applications/Label"}},[t._v("Regenerate token")])],1)],1):t._e()]),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Applications/Title"}},[t._v("Edit application")])],1),a("application-form",{attrs:{app:t.application},on:{updated:function(e){t.application=e}}})]],2)])])},n=[],i=(a("96cf"),a("1da1")),r=a("bc3a"),o=a.n(r),l=a("e175"),c={props:["id"],components:{ApplicationForm:l["a"]},data:function(){return{application:null,isLoading:!1}},created:function(){this.fetchApplication()},methods:{fetchApplication:function(){this.isLoading=!0;var t=this;o.a.get("oauth/apps/".concat(this.id,"/")).then((function(e){t.isLoading=!1,t.application=e.data}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))},refreshToken:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return self.isLoading=!0,e.next=3,o.a.post("oauth/apps/".concat(t.id,"/refresh-token"));case 3:a=e.sent,t.application=a.data,self.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}},computed:{labels:function(){return{title:this.$pgettext("Content/Applications/Title","Edit application")}}}},u=c,d=a("2877"),p=Object(d["a"])(u,s,n,!1,null,null,null);e["default"]=p.exports},b02e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[a("section",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[t._v(t._s(t.labels.title))]),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t._l(t.plugins,(function(e){return t.plugins&&t.plugins.length>0?a("plugin-form",{key:e.name,attrs:{plugin:e,libraries:t.libraries}}):a("empty-state")}))],2)])])},n=[],i=(a("96cf"),a("1da1")),r=a("bc3a"),o=a.n(r),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{class:["ui segment form",{loading:t.isLoading}],on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("h3",[t._v(t._s(t.plugin.label))]),t.plugin.description?a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(t.plugin.description))}}):t._e(),t.plugin.homepage?[a("div",{staticClass:"ui small hidden divider"}),a("a",{attrs:{href:t.plugin.homepage,target:"_blank"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Footer/*/List item.Link/Short, Noun"}},[t._v("Documentation")])],1)]:t._e(),a("div",{staticClass:"ui clearing hidden divider"}),t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Error while saving plugin")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"field"},[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enabled,expression:"enabled"}],attrs:{id:t.plugin.name+"-enabled",type:"checkbox"},domProps:{checked:Array.isArray(t.enabled)?t._i(t.enabled,null)>-1:t.enabled},on:{change:function(e){var a=t.enabled,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.enabled=a.concat([i])):r>-1&&(t.enabled=a.slice(0,r).concat(a.slice(r+1)))}else t.enabled=n}}}),a("label",{attrs:{for:t.plugin.name+"-enabled"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Enabled")])],1)])]),a("div",{staticClass:"ui clearing hidden divider"}),t.plugin.source?a("div",{staticClass:"field"},[a("label",{attrs:{for:"plugin-library"}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Library")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.values["library"],expression:"values['library']"}],attrs:{id:"plugin-library"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.values,"library",e.target.multiple?a:a[0])}}},t._l(t.libraries,(function(e){return a("option",{key:e.uuid,domProps:{value:e.uuid}},[t._v(t._s(e.name))])})),0),a("div",[a("translate",{attrs:{"translate-context":"*/*/Paragraph/Noun"}},[t._v("Library where files should be imported.")])],1)]):t._e(),t._l(t.plugin.conf,(function(e){return t.plugin.conf&&t.plugin.conf.length>0?["text"===e.type?a("div",{staticClass:"field"},[a("label",{attrs:{for:"plugin-"+e.name}},[t._v(t._s(e.label||e.name))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.name],expression:"values[field.name]"}],attrs:{id:"plugin-"+e.name,type:"text"},domProps:{value:t.values[e.name]},on:{input:function(a){a.target.composing||t.$set(t.values,e.name,a.target.value)}}}),e.help?a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(e.help))}}):t._e()]):t._e(),"long_text"===e.type?a("div",{staticClass:"field"},[a("label",{attrs:{for:"plugin-"+e.name}},[t._v(t._s(e.label||e.name))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.values[e.name],expression:"values[field.name]"}],attrs:{id:"plugin-"+e.name,type:"text",rows:"5"},domProps:{value:t.values[e.name]},on:{input:function(a){a.target.composing||t.$set(t.values,e.name,a.target.value)}}}),t._v(" "),e.help?a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(e.help))}}):t._e()]):t._e(),"url"===e.type?a("div",{staticClass:"field"},[a("label",{attrs:{for:"plugin-"+e.name}},[t._v(t._s(e.label||e.name))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.name],expression:"values[field.name]"}],attrs:{id:"plugin-"+e.name,type:"url"},domProps:{value:t.values[e.name]},on:{input:function(a){a.target.composing||t.$set(t.values,e.name,a.target.value)}}}),e.help?a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(e.help))}}):t._e()]):t._e(),"password"===e.type?a("div",{staticClass:"field"},[a("label",{attrs:{for:"plugin-"+e.name}},[t._v(t._s(e.label||e.name))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.name],expression:"values[field.name]"}],attrs:{id:"plugin-"+e.name,type:"password"},domProps:{value:t.values[e.name]},on:{input:function(a){a.target.composing||t.$set(t.values,e.name,a.target.value)}}}),e.help?a("div",{domProps:{innerHTML:t._s(t.markdown.makeHtml(e.help))}}):t._e()]):t._e()]:t._e()})),a("button",{class:["ui",{loading:t.isLoading},"right","floated","button"],attrs:{type:"submit"}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Save")])],1),t.plugin.source?a("button",{class:["ui",{loading:t.isLoading},"right","floated","button"],attrs:{type:"scan"},on:{click:function(e){return e.preventDefault(),t.submitAndScan(e)}}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Scan")])],1):t._e(),a("div",{staticClass:"ui clearing hidden divider"})],2)},c=[],u=(a("b0c0"),a("d3b7"),a("ddb0"),a("ceb5")),d=a("339e"),p=a.n(d),h={props:["plugin","libraries"],data:function(){return{markdown:new p.a.Converter,isLoading:!1,enabled:this.plugin.enabled,values:u["a"].clone(this.plugin.values||{}),errors:[]}},methods:{submit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.errors=[],a="plugins/".concat(t.plugin.name),t.enabled,s="".concat(a,"/enable"),e.next=6,o.a.post(s);case 6:return e.prev=6,e.next=9,o.a.post(a,t.values);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](6),t.errors=e.t0.backendErrors;case 14:t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[6,11]])})))()},scan:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.errors=[],a="plugins/".concat(t.plugin.name,"/scan"),e.prev=3,e.next=6,o.a.post(a,t.values);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),t.errors=e.t0.backendErrors;case 11:t.isLoading=!1;case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))()},submitAndScan:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.submit();case 2:return e.next=4,t.scan();case 4:case"end":return e.stop()}}),e)})))()}}},v=h,m=a("2877"),g=Object(m["a"])(v,l,c,!1,null,null,null),f=g.exports,b={components:{PluginForm:f},data:function(){return{isLoading:!0,plugins:null,libraries:null}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:case"end":return e.stop()}}),e)})))()},computed:{labels:function(){var t=this.$pgettext("Head/Login/Title","Manage plugins");return{title:t}}},methods:{fetchData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,o.a.get("plugins");case 3:return a=e.sent,t.plugins=a.data,e.next=7,o.a.get("libraries",{paramis:{scope:"me",page_size:50}});case 7:a=e.sent,t.libraries=a.data.results,t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})))()}}},_=b,C=Object(m["a"])(_,s,n,!1,null,null,null);e["default"]=C.exports},c3b4:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui form"},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Your attachment cannot be saved")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"ui field"},[a("span",{attrs:{id:"avatarLabel"}},[t._t("label")],2),a("div",{staticClass:"ui stackable grid row"},[a("div",{staticClass:"three wide column"},[t.value&&t.value===t.initialValue?a("img",{class:["ui",t.imageClass,"image"],attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.value+"/proxy?next=medium_square_crop")}}):t.attachment?a("img",{class:["ui",t.imageClass,"image"],attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.attachment.uuid+"/proxy?next=medium_square_crop")}}):a("div",{class:["ui",t.imageClass,"static","large placeholder image"]})]),a("div",{staticClass:"eleven wide column"},[a("div",{staticClass:"file-input"},[a("label",{attrs:{for:t.attachmentId}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Upload New Pictureâ€¦")])],1),a("input",{ref:"attachment",staticClass:"ui input",attrs:{type:"file",id:t.attachmentId,accept:"image/x-png,image/jpeg"},on:{change:t.submit}})]),a("div",{staticClass:"ui very small hidden divider"}),a("p",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph"}},[t._v("PNG or JPG. Dimensions should be between 1400x1400px and 3000x3000px. Maximum file size allowed is 5MB.")])],1),t.value?a("button",{staticClass:"ui basic tiny button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.remove(t.value)}}},[a("translate",{attrs:{"translate-context":"Content/Radio/Button.Label/Verb"}},[t._v("Remove")])],1):t._e(),t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui indeterminate text loader"},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Uploading fileâ€¦")])],1)]):t._e()])])])])},n=[],i=(a("d3b7"),a("25f0"),a("bc3a")),r=a.n(i),o={props:{value:{},imageClass:{default:"",required:!1}},data:function(){return{attachment:null,isLoading:!1,errors:[],initialValue:this.value,attachmentId:Math.random().toString(36).substring(7)}},methods:{submit:function(){var t=this;this.isLoading=!0,this.errors=[];var e=this;this.file=this.$refs.attachment.files[0];var a=new FormData;a.append("file",this.file),r.a.post("attachments/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){t.isLoading=!1,e.attachment=a.data,e.$emit("input",e.attachment.uuid)}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},remove:function(t){var e=this;this.isLoading=!0,this.errors=[];var a=this;r.a.delete("attachments/".concat(t,"/")).then((function(t){e.isLoading=!1,a.attachment=null,a.$emit("delete")}),(function(t){a.isLoading=!1,a.errors=t.backendErrors}))}},watch:{value:function(t){this.attachment&&t===this.initialValue&&this.remove(this.attachment.uuid)}}},l=o,c=a("2877"),u=Object(c["a"])(l,s,n,!1,null,null,null);e["a"]=u.exports},e175:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form component-form",attrs:{role:"alert"},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("We cannot save your changes")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"application-name"}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Name")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.name,expression:"fields.name"}],attrs:{id:"application-name",name:"name",required:"",type:"text"},domProps:{value:t.fields.name},on:{input:function(e){e.target.composing||t.$set(t.fields,"name",e.target.value)}}})]),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"redirect-uris"}},[a("translate",{attrs:{"translate-context":"Content/Applications/Input.Label/Noun"}},[t._v("Redirect URI")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.redirect_uris,expression:"fields.redirect_uris"}],attrs:{id:"redirect-uris",name:"redirect_uris",type:"text"},domProps:{value:t.fields.redirect_uris},on:{input:function(e){e.target.composing||t.$set(t.fields,"redirect_uris",e.target.value)}}}),a("p",{staticClass:"help"},[a("translate",{attrs:{"translate-context":"Content/Applications/Help Text"}},[t._v(' Use "urn:ietf:wg:oauth:2.0:oob" as a redirect URI if your application is not served on the web. ')])],1)]),a("div",{staticClass:"ui field"},[a("label",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Scopes")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Applications/Paragraph/"}},[t._v(' Checking the parent "Read" or "Write" scopes implies access to all the corresponding children scopes. ')])],1),a("div",{staticClass:"ui stackable two column grid"},t._l(t.allScopes,(function(e){return a("div",{staticClass:"column"},[a("div",{staticClass:"ui parent checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopeArray,expression:"scopeArray"}],attrs:{id:e.id,type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.scopeArray)?t._i(t.scopeArray,e.id)>-1:t.scopeArray},on:{change:function(a){var s=t.scopeArray,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.id,o=t._i(s,r);n.checked?o<0&&(t.scopeArray=s.concat([r])):o>-1&&(t.scopeArray=s.slice(0,o).concat(s.slice(o+1)))}else t.scopeArray=i}}}),a("label",{attrs:{for:e.id}},[t._v(" "+t._s(e.label)+" "),a("p",{staticClass:"help"},[t._v(" "+t._s(e.description)+" ")])])]),t._l(e.children,(function(e){return a("div",[a("div",{staticClass:"ui child checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopeArray,expression:"scopeArray"}],attrs:{id:e.id,type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.scopeArray)?t._i(t.scopeArray,e.id)>-1:t.scopeArray},on:{change:function(a){var s=t.scopeArray,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.id,o=t._i(s,r);n.checked?o<0&&(t.scopeArray=s.concat([r])):o>-1&&(t.scopeArray=s.slice(0,o).concat(s.slice(o+1)))}else t.scopeArray=i}}}),a("label",{attrs:{for:e.id}},[t._v(" "+t._s(e.id)+" "),a("p",{staticClass:"help"},[t._v(" "+t._s(e.description)+" ")])])])])}))],2)})),0)]),a("button",{class:["ui",{loading:t.isLoading},"success","button"],attrs:{type:"submit"}},[t.updating?a("translate",{key:"2",attrs:{"translate-context":"Content/Applications/Button.Label/Verb"}},[t._v("Update application")]):a("translate",{key:"2",attrs:{"translate-context":"Content/Applications/Button.Label/Verb"}},[t._v("Create application")])],1)])},n=[],i=(a("99af"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("ceb5")),r=a("bc3a"),o=a.n(r),l=a("64c4"),c={mixins:[l["a"]],props:{app:{type:Object,required:!1},defaults:{type:Object,required:!1}},data:function(){var t=this.app||{},e=this.defaults||{};return{isLoading:!1,errors:[],fields:{name:t.name||e.name||"",redirect_uris:t.redirect_uris||e.redirect_uris||"urn:ietf:wg:oauth:2.0:oob",scopes:t.scopes||e.scopes||"read"},scopes:[{id:"profile",icon:"user"},{id:"libraries",icon:"book"},{id:"favorites",icon:"heart"},{id:"listenings",icon:"music"},{id:"follows",icon:"users"},{id:"playlists",icon:"list"},{id:"radios",icon:"rss"},{id:"filters",icon:"eye slash"},{id:"notifications",icon:"bell"},{id:"edits",icon:"pencil alternate"}]}},methods:{submit:function(){this.errors=[];var t=this;t.isLoading=!0;var e,a,s=this.fields;return this.updating?(e="updated",a=o.a.patch("oauth/apps/".concat(this.app.client_id,"/"),s)):(e="created",a=o.a.post("oauth/apps/",s)),a.then((function(a){t.isLoading=!1,t.$emit(e,a.data)}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))}},computed:{updating:function(){return this.app},scopeArray:{get:function(){return this.fields.scopes.split(" ")},set:function(t){this.fields.scopes=i["a"].uniq(t).join(" ")}},allScopes:function(){var t=this,e=this,a=[{id:"read",label:this.$pgettext("Content/OAuth Scopes/Label/Verb","Read"),description:this.$pgettext("Content/OAuth Scopes/Help Text","Read-only access to user data"),value:this.scopeArray.indexOf("read")>-1},{id:"write",label:this.$pgettext("Content/OAuth Scopes/Label/Verb","Write"),description:this.$pgettext("Content/OAuth Scopes/Help Text","Write-only access to user data"),value:this.scopeArray.indexOf("write")>-1}];return a.forEach((function(a){a.children=e.scopes.map((function(e){var s="".concat(a.id,":").concat(e.id);return{id:s,value:t.scopeArray.indexOf(s)>-1}}))})),a}}},u=c,d=a("2877"),p=Object(d["a"])(u,s,n,!1,null,null,null);e["a"]=p.exports}}]);