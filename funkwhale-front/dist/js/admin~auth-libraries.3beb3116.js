(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin~auth-libraries"],{1799:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.maxPage>1?a("div",{staticClass:"ui pagination menu component-pagination",attrs:{role:"navigation","aria-label":t.labels.pagination}},[a("a",{class:[{disabled:t.current-1<1},"item"],attrs:{href:"",disabled:t.current-1<1,role:"button","aria-label":t.labels.previousPage},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.selectPage(t.current-1)}}},[a("i",{staticClass:"angle left icon"})]),t.compact?t._e():t._l(t.pages,(function(e){return"skip"!==e?a("a",{class:[{active:e===t.current},"item"],attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.selectPage(e)}}},[t._v(" "+t._s(e)+" ")]):a("div",{staticClass:"disabled item"},[t._v(" â€¦ ")])})),a("a",{class:[{disabled:t.current+1>t.maxPage},"item"],attrs:{href:"",disabled:t.current+1>t.maxPage,role:"button","aria-label":t.labels.nextPage},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.selectPage(t.current+1)}}},[a("i",{staticClass:"angle right icon"})])],2):t._e()},r=[],o=(a("99af"),a("4160"),a("fb6a"),a("a9e3"),a("159b"),a("ceb5")),s={props:{current:{type:Number,default:1},paginateBy:{type:Number,default:25},total:{type:Number},compact:{type:Boolean,default:!1}},computed:{labels:function(){return{pagination:this.$pgettext("Content/*/Hidden text/Noun","Pagination"),previousPage:this.$pgettext("Content/*/Link","Previous Page"),nextPage:this.$pgettext("Content/*/Link","Next Page")}},pages:function(){var t=2,e=this.current,a=o["a"].range(1,Math.min(this.maxPage,1+t)),n=o["a"].range(Math.max(1,e-t+1),Math.min(this.maxPage,e+t)),r=o["a"].range(this.maxPage,Math.max(1,this.maxPage-t)),s=a.concat(n,r);s=o["a"].uniq(s),s=o["a"].sortBy(s,[function(t){return t}]);var i=[];return s.forEach((function(t){var e=i.slice(-1)[0],a=!0;a="skip"!==e&&(!e||e+1===t),a?i.push(t):"skip"!==t&&(i.push("skip"),i.push(t))})),i},maxPage:function(){return Math.ceil(this.total/this.paginateBy)}},methods:{selectPage:function(t){t>this.maxPage||t<1||this.current!==t&&this.$emit("page-changed",t)}}},i=s,l=a("2877"),c=Object(l["a"])(i,n,r,!1,null,null,null);e["a"]=c.exports},"20be":function(t,e,a){"use strict";a("a15b"),a("fb6a"),a("b0c0"),a("ac1f"),a("1276");var n,r,o={props:{defaultOrdering:{type:String,required:!1},orderingConfigName:{type:String,required:!1}},computed:{orderingConfig:function(){return this.$store.state.ui.routePreferences[this.orderingConfigName||this.$route.name]},paginateBy:{set:function(t){this.$store.commit("ui/paginateBy",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.paginateBy}},ordering:{set:function(t){this.$store.commit("ui/ordering",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.ordering}},orderingDirection:{set:function(t){this.$store.commit("ui/orderingDirection",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.orderingDirection}}},methods:{getOrderingFromString:function(t){var e=t.split("-");return e.length>1?{direction:"-",field:e.slice(1).join("-")}:{direction:"+",field:t}},getOrderingAsString:function(){var t=this.orderingDirection;return"+"===t&&(t=""),[t,this.ordering].join("")}}},s=o,i=a("2877"),l=Object(i["a"])(s,n,r,!1,null,null,null);e["a"]=l.exports},3255:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o}));a("99af"),a("c975"),a("a15b"),a("d81d"),a("13d5"),a("fb6a"),a("ac1f"),a("466d"),a("5319"),a("1276");function n(t){return t?t.match(/\\?.|^$/g).reduce((function(t,e){return'"'===e?t.quote^=1:t.quote||" "!==e?t.a[t.a.length-1]+=e.replace(/\\(.)/,"$1"):t.a.push(""),t}),{a:[""]}).a:[]}function r(t){return t.map((function(t){var e=t.split(/:(.+)/);if(1===e.length)return{field:null,value:t};var a=e[0],n=e[1];return'"'===n[0]&&(n=n.substring(1)),'"'===n.slice(-1)&&(n=n.substring(0,n.length-1)),{field:a,value:n}}))}function o(t){var e=t.map((function(t){var e=t.value,a=t.field;return e.indexOf(" ")>-1&&(e='"'.concat(e,'"')),a?"".concat(a,":").concat(e):e}));return e.join(" ")}},"414c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-wrapper component-action-table"},[a("table",{staticClass:"ui compact very basic unstackable table"},[a("thead",[a("tr",[a("th",{attrs:{colspan:"1000"}},[t.refreshable?a("div",{staticClass:"right floated"},[t.needsRefresh?a("span",[a("translate",{attrs:{"translate-context":"Content/*/Button.Help text.Paragraph"}},[t._v("Content has been updated, click refresh to see up-to-date content")])],1):t._e(),a("button",{staticClass:"ui basic icon button",attrs:{title:t.labels.refresh,"aria-label":t.labels.refresh},on:{click:function(e){return t.$emit("refresh")}}},[a("i",{staticClass:"refresh icon"})])]):t._e(),t.actionUrl&&t.actions.length>0?a("div",{staticClass:"ui small left floated form"},[a("div",{staticClass:"ui inline fields"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"actions-select"}},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Actions")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentActionName,expression:"currentActionName"}],staticClass:"ui dropdown",attrs:{id:"actions-select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentActionName=e.target.multiple?a:a[0]}}},t._l(t.actions,(function(e){return a("option",{domProps:{value:e.name}},[t._v(" "+t._s(e.label)+" ")])})),0)]),a("div",{staticClass:"field"},[t.selectAll||t.currentAction.isDangerous?a("dangerous-button",{class:["ui",{disabled:0===t.checked.length},{loading:t.actionLoading},"button"],attrs:{"confirm-color":t.currentAction.confirmColor||"success","aria-label":t.labels.performAction},on:{confirm:t.launchAction}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Short, Verb"}},[t._v("Go")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{key:"1",attrs:{"translate-context":"Modal/*/Title","translate-n":t.affectedObjectsCount,"translate-params":{count:t.affectedObjectsCount,action:t.currentActionName},"translate-plural":"Do you want to launch %{ action } on %{ count } elements?"}},[t._v(" Do you want to launch %{ action } on %{ count } element? ")])],1),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[t.currentAction.confirmationMessage?[t._v(t._s(t.currentAction.confirmationMessage))]:a("translate",{attrs:{"translate-context":"Modal/*/Paragraph"}},[t._v("This may affect a lot of elements or have irreversible consequences, please double check this is really what you want.")])],2),a("div",{attrs:{slot:"modal-confirm","aria-label":t.labels.performAction},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"Modal/*/Button.Label/Short, Verb"}},[t._v("Launch")])],1)],1):a("button",{class:["ui",{disabled:0===t.checked.length},{loading:t.actionLoading},"button"],attrs:{disabled:0===t.checked.length,"aria-label":t.labels.performAction},on:{click:t.launchAction}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Short, Verb"}},[t._v("Go")])],1)],1),a("div",{staticClass:"count field"},[t.selectAll?a("translate",{key:"1",attrs:{"translate-context":"Content/*/Paragraph",tag:"span","translate-n":t.objectsData.count,"translate-params":{count:t.objectsData.count,total:t.objectsData.count},"translate-plural":"All %{ count } elements selected"}},[t._v(" All %{ count } element selected ")]):a("translate",{key:"2",attrs:{"translate-context":"Content/*/Paragraph",tag:"span","translate-n":t.checked.length,"translate-params":{count:t.checked.length,total:t.objectsData.count},"translate-plural":"%{ count } on %{ total } selected"}},[t._v(" %{ count } on %{ total } selected ")]),t.currentAction.allowAll&&t.checkable.length>0&&t.checkable.length===t.checked.length?[t.selectAll?a("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.selectAll=!1}}},[a("translate",{key:"4",attrs:{"translate-context":"Content/*/Link/Verb"}},[t._v("Select only current page")])],1):a("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.selectAll=!0}}},[a("translate",{key:"3",attrs:{"translate-context":"Content/*/Link/Verb","translate-n":t.objectsData.count,"translate-params":{total:t.objectsData.count},"translate-plural":"Select all %{ total } elements"}},[t._v(" Select all %{ total } elements ")])],1)]:t._e()],2)]),t.actionErrors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message/Header"}},[t._v("Error while applying action")])],1),a("ul",{staticClass:"list"},t._l(t.actionErrors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t.actionResult?a("div",{staticClass:"ui positive message"},[a("p",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph","translate-n":t.actionResult.updated,"translate-params":{count:t.actionResult.updated,action:t.actionResult.action},"translate-plural":"Action %{ action } was launched successfully on %{ count } elements"}},[t._v(" Action %{ action } was launched successfully on %{ count } element ")])],1),t._t("action-success-footer",null,{result:t.actionResult})],2):t._e()]):t._e()])]),a("tr",[t.actions.length>0?a("th",[a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox","aria-label":t.labels.selectAllItems,disabled:0===t.checkable.length},domProps:{checked:t.checkable.length>0&&t.checked.length===t.checkable.length},on:{change:t.toggleCheckAll}})])]):t._e(),t._t("header-cells")],2)]),t.objectsData.count>0?a("tbody",t._l(t.objects,(function(e,n){return a("tr",[t.actions.length>0?a("td",{staticClass:"collapsing"},[a("input",{attrs:{type:"checkbox","aria-label":t.labels.selectItem,disabled:-1===t.checkable.indexOf(t.getId(e))},domProps:{checked:t.checked.indexOf(t.getId(e))>-1},on:{click:function(a){t.toggleCheck(a,t.getId(e),n)}}})]):t._e(),t._t("row-cells",null,{obj:e})],2)})),0):t._e()])])},r=[],o=(a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("fb6a"),a("4e82"),a("a434"),a("b0c0"),a("159b"),a("bc3a")),s=a.n(o),i={props:{actionUrl:{type:String,required:!1,default:null},idField:{type:String,required:!1,default:"id"},refreshable:{type:Boolean,required:!1,default:!1},needsRefresh:{type:Boolean,required:!1,default:!1},objectsData:{type:Object,required:!0},actions:{type:Array,required:!0,default:function(){return[]}},filters:{type:Object,required:!1,default:function(){return{}}},customObjects:{type:Array,required:!1,default:function(){return[]}}},components:{},data:function(){var t={checked:[],actionLoading:!1,actionResult:null,actionErrors:[],currentActionName:null,selectAll:!1,lastCheckedIndex:-1};return this.actions.length>0&&(t.currentActionName=this.actions[0].name),t},methods:{toggleCheckAll:function(){this.lastCheckedIndex=-1,this.checked.length===this.checkable.length?this.checked=[]:this.checked=this.checkable.map((function(t){return t}))},toggleCheck:function(t,e,a){var n=this,r=[e],o=null;if(this.checked.indexOf(e)>-1?(this.selectAll=!1,o=!1):o=!0,t.shiftKey&&this.lastCheckedIndex>-1){var s=[a,this.lastCheckedIndex];s.sort((function(t,e){return t-e}));var i=this.objectsData.results.slice(s[0],s[1]+1);r=r.concat(i.map((function(t){return t.id})))}r.forEach((function(t){var e=n.checked.indexOf(t)>-1;if(o&&!e&&n.checkable.indexOf(t)>-1)return n.checked.push(t);!o&&e&&n.checked.splice(n.checked.indexOf(t),1)})),this.lastCheckedIndex=a},launchAction:function(){var t=this;t.actionLoading=!0,t.result=null,t.actionErrors=[];var e={action:this.currentActionName,filters:this.filters};this.selectAll?e.objects="all":e.objects=this.checked,s.a.post(this.actionUrl,e).then((function(e){t.actionResult=e.data,t.actionLoading=!1,t.$emit("action-launched",e.data)}),(function(e){t.actionLoading=!1,t.actionErrors=e.backendErrors}))},getId:function(t){return t[this.idField]}},computed:{currentAction:function(){var t=this;return this.actions.filter((function(e){return e.name===t.currentActionName}))[0]},checkable:function(){var t=this;if(!this.currentAction)return[];var e=this.objectsData.results,a=this.currentAction.filterCheckable;return a&&(e=e.filter((function(t){return a(t)}))),e.map((function(e){return t.getId(e)}))},objects:function(){var t=this;return this.objectsData.results.map((function(e){var a=t.customObjects.filter((function(a){return t.getId(a)===t.getId(e)}))[0];return a||e}))},labels:function(){return{refresh:this.$pgettext("Content/*/Button.Tooltip/Verb","Refresh table content"),selectAllItems:this.$pgettext("Content/*/Select/Verb","Select all items"),performAction:this.$pgettext("Content/*/Button.Label","Perform actions"),selectItem:this.$pgettext("Content/*/Select/Verb","Select")}},affectedObjectsCount:function(){return this.selectAll?this.objectsData.count:this.checked.length}},watch:{objectsData:{handler:function(){this.checked=[],this.selectAll=!1},deep:!0},currentActionName:function(){var t=this;this.checked=this.checked.filter((function(e){return t.checkable.indexOf(e)>-1}))}}},l=i,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);e["a"]=u.exports},"8bad":function(t,e,a){"use strict";a("4de4"),a("4160"),a("ac1f"),a("5319"),a("841c"),a("159b");var n,r,o=a("3255"),s={props:{defaultQuery:{type:String,required:!1},updateUrl:{type:Boolean,required:!1,default:!1}},methods:{getTokenValue:function(t,e){var a=this.search.tokens.filter((function(e){return e.field===t}));return a.length>0?a[0].value:e},addSearchToken:function(t,e){if(e=String(e),e){var a=this.search.tokens.filter((function(e){return e.field===t}));a.length>0?a.forEach((function(t){t.value=e})):this.search.tokens.push({field:t,value:e})}else this.search.tokens=this.search.tokens.filter((function(e){return e.field!=t}))}},watch:{"search.query":function(t){this.search.tokens=Object(o["c"])(Object(o["b"])(t))},"search.tokens":{handler:function(t){var e=Object(o["a"])(t);if(this.updateUrl){var a={};e&&(a.q=e),this.$router.replace({query:a})}else this.search.query=e,this.page=1,this.fetchData()},deep:!0}}},i=s,l=a("2877"),c=Object(l["a"])(i,n,r,!1,null,null,null);e["a"]=c.exports},a9e3:function(t,e,a){"use strict";var n=a("83ab"),r=a("da84"),o=a("94ca"),s=a("6eeb"),i=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),h=a("7c73"),p=a("241c").f,f=a("06cf").f,g=a("9bf2").f,b=a("58a8").trim,m="Number",v=r[m],k=v.prototype,_=l(h(k))==m,C=function(t){var e,a,n,r,o,s,i,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=b(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(o=c.slice(2),s=o.length,i=0;i<s;i++)if(l=o.charCodeAt(i),l<48||l>r)return NaN;return parseInt(o,n)}return+c};if(o(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,y=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof y&&(_?d((function(){k.valueOf.call(a)})):l(a)!=m)?c(new v(C(e)),a,y):C(e)},A=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;A.length>w;w++)i(v,x=A[w])&&!i(y,x)&&g(y,x,f(v,x));y.prototype=k,k.constructor=y,s(r,m,y)}},fe5e:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{show:t.showModal},on:{"update:show":function(e){t.showModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Import/Title"}},[t._v("Import detail")])],1),t.upload?a("div",{staticClass:"content"},[a("div",{staticClass:"description"},["pending"===t.upload.import_status?a("div",{staticClass:"ui message"},[a("translate",{attrs:{"translate-context":"Popup/Import/Message"}},[t._v("Upload is still pending and will soon be processed by the server.")])],1):t._e(),"finished"===t.upload.import_status?a("div",{staticClass:"ui success message"},[a("translate",{attrs:{"translate-context":"Popup/Import/Message"}},[t._v("Upload was successfully processed by the server.")])],1):t._e(),"skipped"===t.upload.import_status?a("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[a("translate",{attrs:{"translate-context":"Popup/Import/Message"}},[t._v("Upload was skipped because a similar one is already available in one of your libraries.")])],1):t._e(),"errored"===t.upload.import_status?a("div",{staticClass:"ui error message"},[a("translate",{attrs:{"translate-context":"Popup/Import/Message"}},[t._v("An error occurred during upload processing. You will find more information below.")])],1):t._e(),"errored"===t.upload.import_status?[a("table",{staticClass:"ui very basic collapsing celled table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Popup/Import/Table.Label/Noun"}},[t._v("Error type")])],1),a("td",[t._v(" "+t._s(t.getErrorData(t.upload).label)+" ")])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Popup/Import/Table.Label/Noun"}},[t._v("Error detail")])],1),a("td",[t._v(" "+t._s(t.getErrorData(t.upload).detail)+" "),t.getErrorData(t.upload).errorRows.length>0?a("ul",t._l(t.getErrorData(t.upload).errorRows,(function(e){return a("li",[t._v(" "+t._s(e.key)+": "+t._s(e.value)+" ")])})),0):t._e()])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Footer/*/Link"}},[t._v("Getting help")])],1),a("td",[a("ul",[a("li",[a("a",{attrs:{href:t.getErrorData(t.upload).documentationUrl,target:"_blank"}},[a("translate",{attrs:{"translate-context":"Popup/Import/Table.Label/Value"}},[t._v("Read our documentation for this error")])],1)]),a("li",[a("a",{attrs:{href:t.getErrorData(t.upload).supportUrl,target:"_blank"}},[a("translate",{attrs:{"translate-context":"Popup/Import/Table.Label/Value"}},[t._v("Open a support thread (include the debug information below in your message)")])],1)])])])]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Popup/Import/Table.Label/Noun"}},[t._v("Debug information")])],1),a("td",[a("div",{staticClass:"ui form"},[a("textarea",{staticClass:"ui textarea",attrs:{rows:"10"},domProps:{value:t.getErrorData(t.upload).debugInfo}})])])])])])]:t._e()],2)]):t._e(),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Close")])],1)])])},r=[],o=(a("99af"),a("4160"),a("a15b"),a("159b"),a("5530")),s=a("53ca"),i=a("404d");function l(t){var e=[];for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];Array.isArray(n)?e.push({key:a,value:n.join(", ")}):"object"===Object(s["a"])(n)&&l(n).forEach((function(t){e.push({key:"".concat(a," / ").concat(t.key),value:t.value})}))}return e}var c={props:["upload","show"],components:{Modal:i["default"]},data:function(){return{showModal:this.show}},methods:{getErrorData:function(t){var e=t.import_details||{},a={supportUrl:"https://governance.funkwhale.audio/g/246YOJ1m/funkwhale-support",errorRows:[]};if(e.error_code?a.errorCode=e.error_code:a.errorCode="unknown_error",a.documentationUrl="https://docs.funkwhale.audio/users/upload.html#".concat(a.errorCode),"invalid_metadata"===a.errorCode){a.label=this.$pgettext("Popup/Import/Error.Label","Invalid metadata"),a.detail=this.$pgettext("Popup/Import/Error.Label","The metadata included in the file is invalid or some mandatory fields are missing.");var n=e.detail||{};a.errorRows=l(n)}else a.label=this.$pgettext("*/*/Error","Unknown error"),a.detail=this.$pgettext("Popup/Import/Error.Label","An unknown error occurred");var r=Object(o["a"])({source:t.source},e);return a.debugInfo=JSON.stringify(r,null,4),a}},watch:{showModal:function(t){this.$emit("update:show",t)},show:function(t){this.showModal=t}}},u=c,d=a("2877"),h=Object(d["a"])(u,n,r,!1,null,null,null);e["a"]=h.exports}}]);