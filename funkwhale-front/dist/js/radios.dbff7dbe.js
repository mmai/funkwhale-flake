(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["radios"],{1799:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.maxPage>1?a("div",{staticClass:"ui pagination menu component-pagination",attrs:{role:"navigation","aria-label":t.labels.pagination}},[a("a",{class:[{disabled:t.current-1<1},"item"],attrs:{href:"",disabled:t.current-1<1,role:"button","aria-label":t.labels.previousPage},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.selectPage(t.current-1)}}},[a("i",{staticClass:"angle left icon"})]),t.compact?t._e():t._l(t.pages,(function(e){return"skip"!==e?a("a",{class:[{active:e===t.current},"item"],attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.selectPage(e)}}},[t._v(" "+t._s(e)+" ")]):a("div",{staticClass:"disabled item"},[t._v(" … ")])})),a("a",{class:[{disabled:t.current+1>t.maxPage},"item"],attrs:{href:"",disabled:t.current+1>t.maxPage,role:"button","aria-label":t.labels.nextPage},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.selectPage(t.current+1)}}},[a("i",{staticClass:"angle right icon"})])],2):t._e()},s=[],n=(a("99af"),a("4160"),a("fb6a"),a("a9e3"),a("159b"),a("ceb5")),r={props:{current:{type:Number,default:1},paginateBy:{type:Number,default:25},total:{type:Number},compact:{type:Boolean,default:!1}},computed:{labels:function(){return{pagination:this.$pgettext("Content/*/Hidden text/Noun","Pagination"),previousPage:this.$pgettext("Content/*/Link","Previous Page"),nextPage:this.$pgettext("Content/*/Link","Next Page")}},pages:function(){var t=2,e=this.current,a=n["a"].range(1,Math.min(this.maxPage,1+t)),i=n["a"].range(Math.max(1,e-t+1),Math.min(this.maxPage,e+t)),s=n["a"].range(this.maxPage,Math.max(1,this.maxPage-t)),r=a.concat(i,s);r=n["a"].uniq(r),r=n["a"].sortBy(r,[function(t){return t}]);var o=[];return r.forEach((function(t){var e=o.slice(-1)[0],a=!0;a="skip"!==e&&(!e||e+1===t),a?o.push(t):"skip"!==t&&(o.push("skip"),o.push(t))})),o},maxPage:function(){return Math.ceil(this.total/this.paginateBy)}},methods:{selectPage:function(t){t>this.maxPage||t<1||this.current!==t&&this.$emit("page-changed",t)}}},o=r,l=a("2877"),c=Object(l["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},"20be":function(t,e,a){"use strict";a("a15b"),a("fb6a"),a("b0c0"),a("ac1f"),a("1276");var i,s,n={props:{defaultOrdering:{type:String,required:!1},orderingConfigName:{type:String,required:!1}},computed:{orderingConfig:function(){return this.$store.state.ui.routePreferences[this.orderingConfigName||this.$route.name]},paginateBy:{set:function(t){this.$store.commit("ui/paginateBy",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.paginateBy}},ordering:{set:function(t){this.$store.commit("ui/ordering",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.ordering}},orderingDirection:{set:function(t){this.$store.commit("ui/orderingDirection",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.orderingDirection}}},methods:{getOrderingFromString:function(t){var e=t.split("-");return e.length>1?{direction:"-",field:e.slice(1).join("-")}:{direction:"+",field:t}},getOrderingAsString:function(){var t=this.orderingDirection;return"+"===t&&(t=""),[t,this.ordering].join("")}}},r=n,o=a("2877"),l=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},3306:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Radio/Title"}},[t._v("Browsing radios")])],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui row"},[a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Radio/Title"}},[t._v("Instance radios")])],1),a("div",{staticClass:"ui cards"},[t.isAuthenticated?a("radio-card",{attrs:{type:"actor-content","object-id":t.$store.state.auth.fullUsername}}):t._e(),t.isAuthenticated&&t.hasFavorites?a("radio-card",{attrs:{type:"favorites"}}):t._e(),a("radio-card",{attrs:{type:"random"}}),t.$store.state.auth.authenticated?a("radio-card",{attrs:{type:"less-listened"}}):t._e()],1)]),a("div",{staticClass:"ui hidden divider"}),a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Radio/Title"}},[t._v("User radios")])],1),a("router-link",{staticClass:"ui success button",attrs:{to:"/library/radios/build",exact:""}},[a("translate",{attrs:{"translate-context":"Content/Radio/Button.Label/Verb"}},[t._v("Create your own radio")])],1),a("div",{staticClass:"ui hidden divider"}),a("form",{class:["ui",{loading:t.isLoading},"form"],on:{submit:function(e){e.preventDefault(),t.updateQueryString(),t.fetchData()}}},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"radios-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("div",{staticClass:"ui action input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{id:"radios-search",type:"text",name:"search",placeholder:t.labels.searchPlaceholder},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),a("button",{staticClass:"ui icon button",attrs:{type:"submit","aria-label":t.$pgettext("Content/Search/Input.Label/Noun","Search")}},[a("i",{staticClass:"search icon"})])])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"radios-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"radios-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"radios-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Order")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"radios-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"radios-results"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Results per page")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",attrs:{id:"radios-results"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])])])]),a("div",{staticClass:"ui hidden divider"}),t.result&&!t.result.results.length>0?a("div",{staticClass:"ui placeholder segment"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"feed icon"}),a("translate",{attrs:{"translate-context":"Content/Radios/Placeholder"}},[t._v(" No results matching your query ")])],1),t.$store.state.auth.authenticated?a("router-link",{staticClass:"ui success button labeled icon",attrs:{to:{name:"library.radios.build"}}},[a("i",{staticClass:"rss icon"}),a("translate",{attrs:{"translate-context":"Content/*/Verb"}},[t._v(" Create a radio ")])],1):t._e()],1):t._e(),t.result&&t.result.results.length>0?a("div",{staticClass:"ui cards"},t._l(t.result.results,(function(t){return a("radio-card",{key:t.id,attrs:{type:"custom","custom-radio":t}})})),1):t._e(),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)],1)])},s=[],n=(a("d3b7"),a("e25e"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d"),a("bc3a")),r=a.n(n),o=(a("ceb5"),a("1157")),l=a.n(o),c=a("3677"),d=a("20be"),u=a("38b2"),p=a("64c4"),h=a("b5e5"),g=a("1799"),f="radios/radios/",m={mixins:[d["a"],u["a"],p["a"]],props:{defaultQuery:{type:String,required:!1,default:""},scope:{type:String,required:!1,default:"all"}},components:{RadioCard:h["a"],Pagination:g["a"]},data:function(){return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,orderingOptions:[["creation_date","creation_date"],["name","name"]]}},created:function(){this.fetchData()},mounted:function(){l()(".ui.dropdown").dropdown()},computed:{labels:function(){var t=this.$pgettext("Content/Search/Input.Placeholder","Enter a radio name…"),e=this.$pgettext("*/*/*","Radios");return{searchPlaceholder:t,title:e}},isAuthenticated:function(){return this.$store.state.auth.authenticated},hasFavorites:function(){return this.$store.state.favorites.count>0}},methods:{updateQueryString:function(){history.pushState({},null,this.$route.path+"?"+new URLSearchParams({query:this.query,page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}).toString())},fetchData:function(){var t=this;this.isLoading=!0;var e=f,a={scope:this.scope,page:this.page,page_size:this.paginateBy,name__icontains:this.query,ordering:this.getOrderingAsString()};c["a"].default.debug("Fetching radios"),r.a.get(e,{params:a}).then((function(e){t.result=e.data,t.isLoading=!1}))},selectPage:function(t){this.page=t}},watch:{page:function(){this.updateQueryString(),this.fetchData()}}},v=m,b=a("2877"),C=Object(b["a"])(v,i,s,!1,null,null,null);e["default"]=C.exports},"38b2":function(t,e,a){"use strict";var i,s,n={props:{defaultPage:{required:!1,default:1},defaultPaginateBy:{required:!1}}},r=n,o=a("2877"),l=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},"46ed":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),!t.isLoading&&t.radio?a("section",{directives:[{name:"title",rawName:"v-title",value:t.radio.name,expression:"radio.name"}],staticClass:"ui head vertical center aligned stripe segment"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted feed primary icon"}),a("div",{staticClass:"content"},[t._v(" "+t._s(t.radio.name)+" "),a("div",{staticClass:"sub header"},[t._v(" Radio containing "+t._s(t.totalTracks)+" tracks, by "),a("username",{attrs:{username:t.radio.user.username}})],1)])]),a("div",{staticClass:"ui hidden divider"}),a("radio-button",{attrs:{type:"custom","custom-radio-id":t.radio.id}}),t.$store.state.auth.username===t.radio.user.username?[a("router-link",{staticClass:"ui icon labeled button",attrs:{to:{name:"library.radios.edit",params:{id:t.radio.id}},exact:""}},[a("i",{staticClass:"pencil icon"}),t._v(" Edit… ")]),a("dangerous-button",{staticClass:"ui labeled danger icon button",attrs:{action:t.deleteRadio}},[a("i",{staticClass:"trash icon"}),t._v(" Delete "),a("p",{directives:[{name:"translate",rawName:"v-translate",value:{radio:t.radio.name},expression:"{radio: radio.name}"}],attrs:{slot:"modal-header","translate-context":"Popup/Radio/Title","translate-params":{radio:t.radio.name}},slot:"modal-header"},[t._v('Do you want to delete the radio "%{ radio }"?')]),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("translate",{attrs:{"translate-context":"Popup/Radio/Paragraph"}},[t._v("This will completely delete this radio and cannot be undone.")])],1),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"Popup/Radio/Button.Label/Verb"}},[t._v("Delete radio")])],1)])]:t._e()],2)]):t._e(),t.totalTracks>0?a("section",{staticClass:"ui vertical stripe segment"},[a("h2",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("track-table",{attrs:{tracks:t.tracks}}),a("div",{staticClass:"ui center aligned basic segment"},[t.totalTracks>25?a("pagination",{attrs:{current:t.page,"paginate-by":25,total:t.totalTracks},on:{"page-changed":t.selectPage}}):t._e()],1)],1):!t.isLoading&&!t.totalTracks>0?a("div",{staticClass:"ui placeholder segment"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"rss icon"}),a("translate",{attrs:{"translate-context":"Content/Radios/Placeholder"}},[t._v("No tracks have been added to this radio yet")])],1),t.$store.state.auth.username===t.radio.user.username?a("router-link",{staticClass:"ui success icon labeled button",attrs:{to:{name:"library.radios.edit",params:{id:t.radio.id}},exact:""}},[a("i",{staticClass:"pencil icon"}),t._v(" Edit… ")]):t._e()],1):t._e()])},s=[],n=a("bc3a"),r=a.n(n),o=a("5a65"),l=a("d4fd"),c=a("1799"),d={props:{id:{required:!0}},components:{TrackTable:o["a"],RadioButton:l["a"],Pagination:c["a"]},data:function(){return{isLoading:!1,radio:null,tracks:[],totalTracks:0,page:1}},created:function(){this.fetch()},computed:{labels:function(){return{title:this.$pgettext("Head/Radio/Title","Radio")}}},methods:{selectPage:function(t){this.page=t},fetch:function(){var t=this,e=this;e.isLoading=!0;var a="radios/radios/"+this.id+"/";r.a.get(a).then((function(i){e.radio=i.data,r.a.get(a+"tracks/",{params:{page:t.page}}).then((function(e){t.totalTracks=e.data.count,t.tracks=e.data.results})).then((function(){e.isLoading=!1}))}))},deleteRadio:function(){var t=this,e="radios/radios/"+this.id+"/";r.a.delete(e).then((function(e){t.$router.push({path:"/library"})}))}},watch:{page:function(){this.fetch()}}},u=d,p=a("2877"),h=Object(p["a"])(u,i,s,!1,null,null,null);e["default"]=h.exports},"64c4":function(t,e,a){"use strict";var i,s,n={computed:{sharedLabels:function(){return{fields:{privacy_level:{label:this.$pgettext("Content/Settings/Dropdown.Label/Noun","Activity visibility"),help:this.$pgettext("Content/Settings/Dropdown.Help text","Determine the visibility level of your activity"),choices:{me:this.$pgettext("Content/Settings/Dropdown","Nobody except me"),instance:this.$pgettext("Content/Settings/Dropdown","Everyone on this instance"),everyone:this.$pgettext("Content/Settings/Dropdown","Everyone, across all instances")},shortChoices:{me:this.$pgettext("Content/Settings/Dropdown/Short","Private"),instance:this.$pgettext("Content/Settings/Dropdown/Short","Instance"),everyone:this.$pgettext("Content/Settings/Dropdown/Short","Everyone")}},import_status:{detailTitle:this.$pgettext("Content/Library/Link.Title","Click to display more information about the import process for this upload"),choices:{skipped:{label:this.$pgettext("Content/Library/*","Skipped"),help:this.$pgettext("Content/Library/Help text","This track is already present in one of your libraries")},draft:{label:this.$pgettext("Content/Library/*/Short","Draft"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been scheduled for processing yet")},pending:{label:this.$pgettext("Content/Library/*/Short","Pending"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been processed by the server yet")},errored:{label:this.$pgettext("Content/Library/Table/Short","Errored"),help:this.$pgettext("Content/Library/Help text","This track could not be processed, please make sure it is tagged correctly")},finished:{label:this.$pgettext("Content/Library/*","Finished"),help:this.$pgettext("Content/Library/Help text","Imported")}}},report_type:{label:this.$pgettext("*/*/*","Category"),choices:{takedown_request:this.$pgettext("Content/Moderation/Dropdown","Takedown request"),invalid_metadata:this.$pgettext("Popup/Import/Error.Label","Invalid metadata"),illegal_content:this.$pgettext("Content/Moderation/Dropdown","Illegal content"),offensive_content:this.$pgettext("Content/Moderation/Dropdown","Offensive content"),other:this.$pgettext("Content/Moderation/Dropdown","Other")}},summary:{label:this.$pgettext("Content/Account/*","Bio")},content_category:{label:this.$pgettext("Content/*/Dropdown.Label/Noun","Content category"),choices:{podcast:this.$pgettext("Content/*/Dropdown","Podcast"),music:this.$pgettext("*/*/*","Music"),other:this.$pgettext("*/*/*","Other")}}},filters:{creation_date:this.$pgettext("Content/*/*/Noun","Creation date"),release_date:this.$pgettext("Content/*/*/Noun","Release date"),accessed_date:this.$pgettext("Content/*/*/Noun","Accessed date"),first_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","First seen date"),last_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","Last seen date"),modification_date:this.$pgettext("Content/Playlist/Dropdown/Noun","Modification date"),expiration_date:this.$pgettext("Content/Admin/Table.Label/Noun","Expiration date"),track_title:this.$pgettext("Content/*/Dropdown/Noun","Track name"),album_title:this.$pgettext("Content/*/Dropdown/Noun","Album name"),artist_name:this.$pgettext("Content/*/Dropdown/Noun","Artist name"),name:this.$pgettext("*/*/*/Noun","Name"),length:this.$pgettext("*/*/*/Noun","Length"),items_count:this.$pgettext("*/*/*/Noun","Items"),size:this.$pgettext("Content/*/*/Noun","Size"),bitrate:this.$pgettext("Content/Track/*/Noun","Bitrate"),duration:this.$pgettext("Content/*/*","Duration"),date_joined:this.$pgettext("Content/Admin/Table.Label/Noun","Sign-up date"),last_activity:this.$pgettext("Content/Profile/Table.Label/Short, Noun (Value is a date)","Last activity"),username:this.$pgettext("Content/*/*","Username"),domain:this.$pgettext("Content/Moderation/*/Noun","Domain"),users:this.$pgettext("*/*/*/Noun","Users"),received_messages:this.$pgettext("Content/Moderation/*/Noun","Received messages"),uploads:this.$pgettext("*/*/*","Uploads"),followers:this.$pgettext("Content/Federation/*/Noun","Followers")},scopes:{profile:{label:this.$pgettext("Content/OAuth Scopes/Label","Profile"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to email, username, and profile information")},libraries:{label:this.$pgettext("Content/OAuth Scopes/Label","Libraries and uploads"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to audio files, libraries, artists, albums and tracks")},favorites:{label:this.$pgettext("Sidebar/Favorites/List item.Link/Noun","Favorites"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to favorites")},listenings:{label:this.$pgettext("*/*/*/Noun","Listenings"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to listening history")},follows:{label:this.$pgettext("Content/OAuth Scopes/Label","Follows"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to follows")},playlists:{label:this.$pgettext("*/*/*","Playlists"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to playlists")},radios:{label:this.$pgettext("*/*/*","Radios"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to radios")},filters:{label:this.$pgettext("Content/Settings/Title/Noun","Content filters"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to content filters")},notifications:{label:this.$pgettext("*/Notifications/*","Notifications"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to notifications")},edits:{label:this.$pgettext("*/Admin/*/Noun","Edits"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to edits")},security:{label:this.$pgettext("*/Admin/*/Noun","Security"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to security settings such as password and authorization")},reports:{label:this.$pgettext("*/Moderation/*/Noun","Reports"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to moderation reports")}}}}}},r=n,o=a("2877"),l=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},"8dfe":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"ui vertical stripe segment"},[a("div",[a("section",[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Radio/Title"}},[t._v("Builder")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Radio/Paragraph"}},[t._v("You can use this interface to build your own custom radio, which will play tracks according to your criteria.")])],1),a("div",{staticClass:"ui form"},[t.success?a("div",{staticClass:"ui positive message"},[a("h4",{staticClass:"header"},[t.radioName?[a("translate",{attrs:{"translate-context":"Content/Radio/Message"}},[t._v("Radio updated")])]:[a("translate",{attrs:{"translate-context":"Content/Radio/Message"}},[t._v("Radio created")])]],2)]):t._e(),a("div",{},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"name"}},[a("translate",{attrs:{"translate-context":"Content/Radio/Input.Label/Noun"}},[t._v("Radio name")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.radioName,expression:"radioName"}],attrs:{id:"name",name:"name",type:"text",placeholder:t.labels.placeholder.name},domProps:{value:t.radioName},on:{input:function(e){e.target.composing||(t.radioName=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"description"}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Description")])],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.radioDesc,expression:"radioDesc"}],attrs:{rows:"2",id:"description",type:"text",placeholder:t.labels.placeholder.description},domProps:{value:t.radioDesc},on:{input:function(e){e.target.composing||(t.radioDesc=e.target.value)}}})]),a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isPublic,expression:"isPublic"}],attrs:{id:"public",type:"checkbox"},domProps:{checked:Array.isArray(t.isPublic)?t._i(t.isPublic,null)>-1:t.isPublic},on:{change:function(e){var a=t.isPublic,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);i.checked?r<0&&(t.isPublic=a.concat([n])):r>-1&&(t.isPublic=a.slice(0,r).concat(a.slice(r+1)))}else t.isPublic=s}}}),a("label",{attrs:{for:"public"}},[a("translate",{attrs:{"translate-context":"Content/Radio/Checkbox.Label/Verb"}},[t._v("Display publicly")])],1)]),a("div",{staticClass:"ui hidden divider"}),a("button",{class:["ui","success",{loading:t.isLoading},"button"],attrs:{disabled:!t.canSave},on:{click:t.save}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Save")])],1),t.id?a("radio-button",{attrs:{type:"custom","custom-radio-id":t.id}}):t._e()],1)]),a("div",{staticClass:"ui form"},[a("div",{staticClass:"inline field"},[a("label",{attrs:{id:"radioFilterLabel",for:"radio-filters"}},[a("translate",{attrs:{"translate-context":"Content/Radio/Paragraph"}},[t._v("Add filters to customize your radio")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentFilterType,expression:"currentFilterType"}],staticClass:"ui dropdown",attrs:{id:"radio-filters"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentFilterType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[a("translate",{attrs:{"translate-context":"Content/Radio/Dropdown.Placeholder/Verb"}},[t._v("Select a filter")])],1),t._l(t.availableFilters,(function(e){return a("option",{domProps:{value:e.type}},[t._v(t._s(e.label))])}))],2),a("button",{staticClass:"ui button",attrs:{id:"addFilter",disabled:!t.currentFilterType},on:{click:t.add}},[a("translate",{attrs:{"translate-context":"Content/Radio/Button.Label/Verb"}},[t._v("Add filter")])],1)]),t.currentFilter?a("p",[t._v(" "+t._s(t.currentFilter.help_text)+" ")]):t._e()]),a("table",{staticClass:"ui table"},[a("thead",[a("tr",[a("th",{staticClass:"two wide"},[a("translate",{attrs:{"translate-context":"Content/Radio/Table.Label/Noun"}},[t._v("Filter name")])],1),a("th",{staticClass:"one wide"},[a("translate",{attrs:{"translate-context":"Content/Radio/Table.Label/Verb"}},[t._v("Exclude")])],1),a("th",{staticClass:"six wide"},[a("translate",{attrs:{"translate-context":"Content/Radio/Table.Label/Verb (Value is a List of Parameters)"}},[t._v("Config")])],1),a("th",{staticClass:"five wide"},[a("translate",{attrs:{"translate-context":"Content/Radio/Table.Label/Noun (Value is a number of Tracks)"}},[t._v("Candidates")])],1),a("th",{staticClass:"two wide"},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Actions")])],1)])]),a("tbody",t._l(t.filters,(function(e,i){return a("builder-filter",{key:e.hash,attrs:{index:i,config:e.config,filter:e.filter},on:{"update-config":t.updateConfig,delete:t.deleteFilter}})})),1)]),t.checkResult&&t.checkResult.candidates&&t.checkResult.candidates.count?[a("h3",{directives:[{name:"translate",rawName:"v-translate",value:{count:t.checkResult.candidates.count},expression:"{count: checkResult.candidates.count}"}],staticClass:"ui header",attrs:{"translate-n":t.checkResult.candidates.count,"translate-plural":"%{ count } tracks matching combined filters","translate-context":"Content/Radio/Table.Paragraph/Short"}},[t._v(" %{ count } track matching combined filters ")]),t.checkResult.candidates.sample?a("track-table",{attrs:{tracks:t.checkResult.candidates.sample,playable:!0}}):t._e()]:t._e()],2)])])},s=[],n=(a("a4d3"),a("e01a"),a("4de4"),a("d81d"),a("a434"),a("b0c0"),a("d3b7"),a("bc3a")),r=a.n(n),o=a("1157"),l=a.n(o),c=a("ceb5"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v(t._s(t.filter.label))]),a("td",[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.exclude,expression:"exclude"}],attrs:{id:"exclude-filter",name:"public",type:"checkbox"},domProps:{checked:Array.isArray(t.exclude)?t._i(t.exclude,null)>-1:t.exclude},on:{change:[function(e){var a=t.exclude,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);i.checked?r<0&&(t.exclude=a.concat([n])):r>-1&&(t.exclude=a.slice(0,r).concat(a.slice(r+1)))}else t.exclude=s},function(e){return t.$emit("update-config",t.index,"not",t.exclude)}]}}),a("label",{staticClass:"visually-hidden",attrs:{for:"exclude-filter"}},[a("translate",{attrs:{"translate-context":"Popup/Radio/Title/Noun"}},[t._v("Exclude")])],1)])]),a("td",t._l(t.filter.fields,(function(e,i){return a("div",{key:(e.name,i),ref:e.name,refInFor:!0,staticClass:"ui field"},[a("div",{class:["ui","search","selection","dropdown",{autocomplete:e.autocomplete},{multiple:"list"===e.type}]},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"default text"},[t._v(t._s(e.placeholder))]),"list"===e.type&&t.config[e.name]?a("input",{attrs:{id:e.name,type:"hidden"},domProps:{value:t.config[e.name].join(",")}}):t._e(),t.config[e.name]?a("div",{staticClass:"ui menu"},t._l(t.config[e.name],(function(i,s){return"list"===e.type?a("div",{staticClass:"ui item",attrs:{"data-value":i}},[t.config.names?[t._v(" "+t._s(t.config.names[s])+" ")]:[t._v(t._s(i))]],2):t._e()})),0):t._e()])])})),0),a("td",[t.checkResult?a("a",{class:["ui",{success:t.checkResult.candidates.count>10},"label"],attrs:{href:""},on:{click:function(e){e.preventDefault(),t.showCandidadesModal=!t.showCandidadesModal}}},[t._v(" "+t._s(t.checkResult.candidates.count)+" tracks matching filter ")]):t._e(),t.checkResult?a("modal",{attrs:{show:t.showCandidadesModal},on:{"update:show":function(e){t.showCandidadesModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Radio/Title/Noun"}},[t._v("Tracks matching filter")])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[t.checkResult.candidates.count>0?a("track-table",{attrs:{tracks:t.checkResult.candidates.sample}}):t._e()],1)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1)])]):t._e()],1),a("td",[a("button",{staticClass:"ui danger button",on:{click:function(e){return t.$emit("delete",t.index)}}},[a("translate",{attrs:{"translate-context":"Content/Radio/Button.Label/Verb"}},[t._v("Remove")])],1)])])},u=[],p=(a("7db0"),a("4160"),a("a15b"),a("a9e3"),a("e25e"),a("ac1f"),a("1276"),a("159b"),a("404d")),h=a("5a65"),g={components:{BuilderFilter:b,TrackTable:h["a"],Modal:p["default"]},props:{filter:{type:Object},config:{type:Object},index:{type:Number}},data:function(){return{checkResult:null,showCandidadesModal:!1,exclude:this.config.not}},mounted:function(){var t=this;this.filter.fields.forEach((function(e){var a=[".dropdown"],i={onChange:function(a,i,s){a=l()(this).dropdown("get value").split(","),"list"===e.type&&"number"===e.subtype&&(a=a.map((function(t){return parseInt(t)}))),t.value=a,t.$emit("update-config",t.index,e.name,a),t.fetchCandidates()}};"list"===e.type&&a.push(".multiple"),e.autocomplete&&(a.push(".autocomplete"),i.fields=e.autocomplete_fields,i.minCharacters=1,i.apiSettings={url:t.$store.getters["instance/absoluteUrl"](e.autocomplete+"?"+e.autocomplete_qs),beforeXHR:function(e){return t.$store.state.auth.oauth.accessToken&&e.setRequestHeader("Authorization",t.$store.getters["auth/header"]),e},onResponse:function(t){return i.fields.remoteValues?t:{results:t.results}}}),l()(t.$el).find(a.join("")).dropdown(i)}))},methods:{fetchCandidates:function(){var t=this,e="radios/radios/validate/",a=c["a"].clone(this.config);a.type=this.filter.type,a={filters:[a]},r.a.post(e,a).then((function(e){t.checkResult=e.data.filters[0]}))}},watch:{exclude:function(){this.fetchCandidates()}}},f=g,m=a("2877"),v=Object(m["a"])(f,d,u,!1,null,null,null),b=v.exports,C=a("d4fd"),x={props:{id:{required:!1}},components:{BuilderFilter:b,TrackTable:h["a"],RadioButton:C["a"]},data:function(){return{isLoading:!1,success:!1,availableFilters:[],currentFilterType:null,filters:[],checkResult:null,radioName:"",radioDesc:"",isPublic:!0}},created:function(){var t=this;this.fetchFilters().then((function(){t.id&&t.fetch()}))},mounted:function(){l()(".ui.dropdown").dropdown()},methods:{fetchFilters:function(){var t=this,e="radios/radios/filters/";return r.a.get(e).then((function(e){t.availableFilters=e.data}))},add:function(){this.filters.push({config:{},filter:this.currentFilter,hash:+new Date}),this.fetchCandidates()},updateConfig:function(t,e,a){this.filters[t].config[e]=a,this.fetchCandidates()},deleteFilter:function(t){this.filters.splice(t,1),this.fetchCandidates()},fetch:function(){var t=this,e=this;e.isLoading=!0;var a="radios/radios/"+this.id+"/";r.a.get(a).then((function(a){e.filters=a.data.config.map((function(e){return{config:e,filter:t.availableFilters.filter((function(t){return t.type===e.type}))[0],hash:+new Date}})),e.radioName=a.data.name,e.radioDesc=a.data.description,e.isPublic=a.data.is_public,e.isLoading=!1}))},fetchCandidates:function(){var t=this,e="radios/radios/validate/",a=this.filters.map((function(t){var e=c["a"].clone(t.config);return e.type=t.filter.type,e}));a={filters:[{type:"group",filters:a}]},r.a.post(e,a).then((function(e){t.checkResult=e.data.filters[0]}))},save:function(){var t=this;t.success=!1,t.isLoading=!0;var e=this.filters.map((function(t){var e=c["a"].clone(t.config);return e.type=t.filter.type,e}));if(e={name:this.radioName,description:this.radioDesc,is_public:this.isPublic,config:e},this.id){var a="radios/radios/"+this.id+"/";r.a.put(a,e).then((function(e){t.isLoading=!1,t.success=!0}))}else{var i="radios/radios/";r.a.post(i,e).then((function(e){t.success=!0,t.isLoading=!1,t.$router.push({name:"library.radios.detail",params:{id:e.data.id}})}))}}},computed:{labels:function(){var t=this.$pgettext("Head/Radio/Title","Radio Builder"),e={name:this.$pgettext("Content/Radio/Input.Placeholder","My awesome radio"),description:this.$pgettext("Content/Radio/Input.Placeholder","My awesome description")};return{title:t,placeholder:e}},canSave:function(){return this.radioName.length>0&&0===this.checkErrors.length},checkErrors:function(){if(!this.checkResult)return[];var t=this.checkResult.errors;return t},currentFilter:function(){var t=this;return this.availableFilters.filter((function(e){return e.type===t.currentFilterType}))[0]}},watch:{filters:{handler:function(){this.fetchCandidates()},deep:!0}}},y=x,_=Object(m["a"])(y,i,s,!1,null,null,null);e["default"]=_.exports},b5e5:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[a("h4",{staticClass:"header"},[t.radio.id?a("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.radios.detail",params:{id:t.radio.id}}}},[t._v(" "+t._s(t.radio.name)+" ")]):[t._v(" "+t._s(t.radio.name)+" ")]],2),a("div",{staticClass:"description"},[t._v(" "+t._s(t.radio.description)+" ")])]),a("div",{staticClass:"extra content"},[t.radio.user?a("user-link",{staticClass:"left floated",attrs:{user:t.radio.user}}):t._e(),a("div",{staticClass:"ui hidden divider"}),a("radio-button",{staticClass:"right floated button",attrs:{type:t.type,"custom-radio-id":t.customRadioId,"object-id":t.objectId}}),t.$store.state.auth.authenticated&&"custom"===t.type&&t.radio.user.id===t.$store.state.auth.profile.id?a("router-link",{staticClass:"ui success button right floated",attrs:{to:{name:"library.radios.edit",params:{id:t.customRadioId}}}},[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1):t._e()],1)])},s=[],n=a("d4fd"),r={props:{type:{type:String,required:!0},customRadio:{required:!1},objectId:{required:!1}},components:{RadioButton:n["a"]},computed:{radio:function(){return this.customRadio?this.customRadio:this.$store.getters["radios/types"][this.type]},customRadioId:function(){return this.customRadio?this.customRadio.id:null}}},o=r,l=a("2877"),c=Object(l["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports}}]);